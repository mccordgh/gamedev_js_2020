!function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(i,r,function(e){return t[e]}.bind(null,r));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=1)}([function(t){t.exports={b:{sender:"MGMT",subject:"Re: A few incidients",text:["There have been a few incidents","Regarding ACME products.","","I've given you access to the Footage app.","Please review the footage of the incidents.",'We need these folks "Alive"...',"","Thanks,","MGMT"]},d:{sender:"Bill from HR",subject:"Re: Codes",text:["Hey there, newbie!","How is your first day going?","","In this place we keep lots of secrets...","You'll need to utilize the CODE MAN app.","I've given you access to it.","There are CLUES to our codes everywhere.","Explore and find them!","","GL HF on your first day","Bill from HR"]},a:{sender:"Kenny from the basement",subject:"Re: Sick Games",text:["Yo, I heard you did good today.","Me and the crew have some secret games","installed on the netweork.","","I gave you access to a few new apps.","Check your desktop!","","It's games from the js13k game jam!!","","Game on yo","Kenny from the basement"]},e:{sender:"Dev Team",subject:"Re: Thanks for playing!",text:["Hey thanks for playing our game!","We hope you enjoyed it."," ","Have a great rest of your day!","The Dev Team"]},c:{sender:"Your Mom",subject:"Re: If you get stuck...",text:["Hey, Newbie!","If you are stuck call me.","My number is: 42","","Love ya,","Your Mom"]}}},function(t,n,i){"use strict";function r(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}i.r(n);var o=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.managerHandler=e,this.world=n}var e,n,i;return e=t,(n=[{key:"tick",value:function(t){this.world.tick(t)}},{key:"render",value:function(t){this.world.render(t)}},{key:"getManagerHandler",value:function(){return this.managerHandler}},{key:"getWorld",value:function(){return this.world}},{key:"setWorld",value:function(t){this.world=t}}])&&r(e.prototype,n),i&&r(e,i),t}();function a(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var s=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.managerHandler=e,this.initializeEvents()}var e,n,i;return e=t,(n=[{key:"getMouseXFromEvent",value:function(t){return t.offsetX}},{key:"getMouseYFromEvent",value:function(t){return t.offsetY}},{key:"initializeEvents",value:function(){var t=this,e=this.managerHandler.getGraphicsManager().getCanvas();e.onclick=function(e){var n=t.getMouseXFromEvent(e),i=t.getMouseYFromEvent(e);t.managerHandler.event("click",{x:n,y:i})},e.onmousemove=function(e){var n=t.getMouseXFromEvent(e),i=t.getMouseYFromEvent(e);t.managerHandler.event("move",{x:n,y:i})}}}])&&a(e.prototype,n),i&&a(e,i),t}(),u=window.location.href,h={BIG_FONT_SIZE:32,FONT_SIZE:18,EMAIL_ITEM_SIZE:16,APP_NAME_SIZE:16,APPS:{CODE_MAN:"Code Man",FOOTAGE:"Footage",EMAIL:"Email",SETTINGS:"Settings",THE_CORE:"The Core",ME_MYSELF_I:"Me, Myself, & I",THE_CODERS_GAME:"Coder's Game"},COLORS:{PURPLE:"#7B538F",LIGHT_PURPLE:"#BD7FDB",DARK_PURPLE:"#4F355C",CREAM:"#FCEDC3",RED:"#FF2F4C",LIGHT_RED:"#FF7A8C",DARK_RED:"#803D46"},FPS:60,DIALOGUE:{X:64,Y:448,WIDTH:896,HEIGHT:256/1.5},TELEBUTTON_WIDTH:35,TELEBUTTON_HEIGHT:28,SCREEN_WIDTH:512,SCREEN_HEIGHT:384,GAME_WIDTH:1024,GAME_HEIGHT:768,ICON_HEIGHT:64,ICON_WIDTH:64,SPATIAL_GRID_SIZE:64,RADIO_WIDTH:133,RADIO_HEIGHT:74,TYPES:{TELEBUTTONS:"tele-buttons",EMAIL_ITEMS:"email-items",EMAIL_INBOX_ITEMS:"email-inbox-items",FOOTAGE_ITEMS:"footage-items",FOOTAGE_LIBRARY_ITEMS:"footage-library-items",SETTINGS_ITEMS:"settings-items",SETTINGS_WINDOW_ITEMS:"settings-window-items",INTERACTIVE:"interactive",COMPUTER:"computer",COMPUTER_APP:"computer-app"},FINGER_WIDTH:16,BASE_PATH:u=u.replace(/index.html/,""),ASSETS_PATH:"".concat(u,"src/resources"),MUSIC_PATH:"".concat(u,"src/music")};function c(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var l=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.customizeContext(),this.initializeCanvas(),this.initializeGraphics()}var e,n,i;return e=t,(n=[{key:"customizeContext",value:function(){var t=this;CanvasRenderingContext2D.prototype.drawSprite=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0;r||(r=e.width),o||(o=e.height),t.graphics.drawImage(e.sheet,e.x,e.y,e.width,e.height,n,i,r,o)},CanvasRenderingContext2D.prototype.drawText=function(e,n,i){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:h.COLORS.CREAM,o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:h.FONT_SIZE;t.graphics.font="".concat(a,"px Roboto Slab"),o&&(t.graphics.fillStyle="black"===r,t.graphics.fillText(e,n-1,i+1)),t.graphics.fillStyle=r,t.graphics.fillText(e,n,i)}}},{key:"initializeCanvas",value:function(){this.canvas=document.querySelector("#canvas"),this.canvas.setAttribute("width",h.GAME_WIDTH),this.canvas.setAttribute("height",h.GAME_HEIGHT)}},{key:"initializeGraphics",value:function(){this.graphics=this.canvas.getContext("2d"),this.graphics.imageSmoothingEnabled=!1,this.graphics.webkitImageSmoothingEnabled=!1}},{key:"getCanvas",value:function(){return this.canvas}},{key:"getGraphics",value:function(){return this.graphics}}])&&c(e.prototype,n),i&&c(e,i),t}();function f(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var d=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.frames=e,this.index=0,this.lastTime=Date.now(),this.timer=0,this.speed=this.frames[this.index].speed}var e,n,i;return e=t,(n=[{key:"tick",value:function(){if(this.timer+=Date.now()-this.lastTime,this.lastTime=Date.now(),!this.speed)throw new Error("SPEED NOT DEFINED FOR",this);this.timer>=this.speed&&(this.index+=1,this.timer=0,this.index>=this.frames.length&&(this.index=0))}},{key:"getCurrentFrame",value:function(){return this.frames[this.index].frame}}])&&f(e.prototype,n),i&&f(e,i),t}();function y(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var p=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,i;return e=t,i=[{key:"loadImage",value:function(t){var e=new Image;return e.src=t,e}}],(n=null)&&y(e.prototype,n),i&&y(e,i),t}();function b(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var g=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.sheet=e}var e,n,i;return e=t,(n=[{key:"crop",value:function(t,e,n,i){return{sheet:this.sheet,x:t,y:e,width:n,height:i}}}])&&b(e.prototype,n),i&&b(e,i),t}();function v(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var w={},E=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),w[e]=this,this.name=e,this.path="".concat(h.ASSETS_PATH,"/").concat(n),this.sheet=new g(p.loadImage(this.path)),this.animations={}}var e,n,i;return e=t,i=[{key:"getAssets",value:function(t){return w[t]}}],(n=[{key:"addAnimation",value:function(t,e){this.animations[t]=e}}])&&v(e.prototype,n),i&&v(e,i),t}(),m=function(t,e,n){n.frames=[];for(var i=n.col;i<n.length+n.col;i+=1)n.frames.push({frame:t.sheet.crop(n.width*i,n.height*n.row,n.width,n.height),speed:n.speed});t.addAnimation(e,new d(n.frames))},O=new E("cursor","cursor.png");O.pointer=O.sheet.crop(0,0,49,56);var T=new E("cursor2","cursor2.png");T.pointer=T.sheet.crop(0,0,32,32);var S=new E("whiteCursor","white-cursor.png");S.pointer=S.sheet.crop(0,0,32,32);var k=new E("hand","hand.png");k.pointer=k.sheet.crop(0,0,64,64);var I=new E("hand2","hand2.png");I.pointer=I.sheet.crop(0,0,32,32);var _=new E("background","gameJamBg.png");_.image=_.sheet.crop(0,0,h.GAME_WIDTH,h.GAME_HEIGHT);var A=new E("email","email.png");A.icon=A.sheet.crop(0,0,h.ICON_WIDTH,h.ICON_HEIGHT),m(A,"loading",{speed:120,row:0,col:0,length:10,width:h.ICON_WIDTH,height:h.ICON_HEIGHT});var P=new E("footage","footage.png");P.icon=P.sheet.crop(0,0,h.ICON_WIDTH,h.ICON_HEIGHT),m(P,"loading",{speed:1,row:0,col:0,length:64,width:h.ICON_WIDTH,height:h.ICON_HEIGHT});var C=new E("bigFootage","big-footage.png");C.playButton=C.sheet.crop(0,0,h.SCREEN_WIDTH,h.SCREEN_HEIGHT),m(new E("johnDies","john-dies.png"),"playing",{speed:100,row:0,col:0,length:18,width:h.SCREEN_WIDTH,height:h.SCREEN_HEIGHT}),m(new E("johnLives","john-lives.png"),"playing",{speed:100,row:0,col:0,length:18,width:h.SCREEN_WIDTH,height:h.SCREEN_HEIGHT}),m(new E("oliviaDies","olivia-dies.png"),"playing",{speed:100,row:0,col:0,length:18,width:h.SCREEN_WIDTH,height:h.SCREEN_HEIGHT}),m(new E("oliviaLives","olivia-lives.png"),"playing",{speed:100,row:0,col:0,length:18,width:h.SCREEN_WIDTH,height:h.SCREEN_HEIGHT}),m(new E("peterDies","peter-dies.png"),"playing",{speed:100,row:0,col:0,length:18,width:h.SCREEN_WIDTH,height:h.SCREEN_HEIGHT}),m(new E("peterLives","peter-lives.png"),"playing",{speed:100,row:0,col:0,length:18,width:h.SCREEN_WIDTH,height:h.SCREEN_HEIGHT}),m(new E("os","jam-os-bootup.png"),"booting",{speed:300,row:0,col:0,length:10,width:h.SCREEN_WIDTH,height:h.SCREEN_HEIGHT});var M=new E("inbox","inbox-bg.png");M.bg=M.sheet.crop(0,0,768,672);var x=new E("footageLibrary","footage-library-bg.png");x.bg=x.sheet.crop(0,0,768,672);var H=new E("radio","radio.png");H.off=H.sheet.crop(0,0,h.RADIO_WIDTH,h.RADIO_HEIGHT),H.station1=H.sheet.crop(h.RADIO_WIDTH,0,h.RADIO_WIDTH,h.RADIO_HEIGHT),H.station2=H.sheet.crop(2*h.RADIO_WIDTH,0,h.RADIO_WIDTH,h.RADIO_HEIGHT),H.station3=H.sheet.crop(3*h.RADIO_WIDTH,0,h.RADIO_WIDTH,h.RADIO_HEIGHT);var j=new E("radioBanner","radio-banner.png");j.img=j.sheet.crop(0,0,225,225);var N=new E("telephone","telephone.png");N.img=N.sheet.crop(0,0,248,185);var R=new E("wallPaper","wall-paper-tear.png");R.one=R.sheet.crop(0,0,192,192),R.two=R.sheet.crop(192,0,192,192),R.three=R.sheet.crop(384,0,192,192),R.four=R.sheet.crop(576,0,192,192),R.five=R.sheet.crop(768,0,192,192);var G=new E("settings","settings-cog.png");G.icon=G.sheet.crop(0,0,64,64),m(G,"loading",{speed:160,row:0,col:0,length:8,width:h.ICON_WIDTH,height:h.ICON_HEIGHT});var D=new E("settingsWindow","settings-window.png");D.bg=D.sheet.crop(0,0,416,278);var L=new E("settingsCheck","settings-checkbox.png");L.box=L.sheet.crop(0,0,45,45),L.check=L.sheet.crop(45,0,45,45);var F=new E("codeMan","code-man.png");F.icon=F.sheet.crop(0,0,64,64),m(F,"loading",{speed:160,row:0,col:0,length:8,width:h.ICON_WIDTH,height:h.ICON_HEIGHT});var B=new E("theCore","the-core-icon.png");B.icon=B.sheet.crop(0,0,64,64);var W=new E("meMyselfI","me-myself-and-i-icon.png");W.icon=W.sheet.crop(0,0,64,64);var Y=new E("codersGame","the-coders-game-icon.png");function U(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}Y.icon=Y.sheet.crop(0,0,64,64);var z=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.x=null,this.y=null,this.handBounds={x:4,y:4,width:24,height:24},this.arrowBounds={x:4,y:0,width:6,height:6},this.assets={hand:E.getAssets("hand2").pointer,arrow:E.getAssets("cursor2").pointer},this.swapToComputer()}var e,n,i;return e=t,(n=[{key:"render",value:function(t){}},{key:"swapToComputer",value:function(){this.cursor=this.assets.arrow,this.bounds=this.arrowBounds}},{key:"swapToHand",value:function(){this.cursor=this.assets.hand,this.bounds=this.handBounds}}])&&U(e.prototype,n),i&&U(e,i),t}();function X(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var Z=function(){function t(e,n,i,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.x=e,this.y=n,this.width=i,this.height=r}var e,n,i;return e=t,(n=[{key:"intersects",value:function(t){return this.x<t.x+t.width&&this.x+this.width>t.x&&this.y<t.y+t.height&&this.y+this.height>t.y}}])&&X(e.prototype,n),i&&X(e,i),t}();function V(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function K(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var q=[h.TYPES.INTERACTIVE,h.TYPES.TELEBUTTONS,h.TYPES.COMPUTER_APP,h.TYPES.EMAIL_ITEMS,h.TYPES.EMAIL_INBOX_ITEMS,h.TYPES.FOOTAGE_ITEMS,h.TYPES.FOOTAGE_LIBRARY_ITEMS,h.TYPES.SETTINGS_ITEMS,h.TYPES.SETTINGS_WINDOW_ITEMS],J=[h.TYPES.TELEBUTTONS,h.TYPES.COMPUTER_APP,h.TYPES.EMAIL_INBOX_ITEMS,h.TYPES.FOOTAGE_LIBRARY_ITEMS,h.TYPES.SETTINGS_WINDOW_ITEMS],Q=(h.TYPES.COMPUTER,h.TYPES.COMPUTER_APP,h.TYPES.EMAIL_ITEMS,h.TYPES.EMAIL_INBOX_ITEMS,h.TYPES.FOOTAGE_ITEMS,h.TYPES.FOOTAGE_LIBRARY_ITEMS,h.TYPES.SETTINGS_ITEMS,h.TYPES.SETTINGS_WINDOW_ITEMS,1),$=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.handler=e,this.lastEntityHovered=null,this.cursor=new z,this.entities=[]}var e,n,i;return e=t,(n=[{key:"tick",value:function(t){for(var e=0;e<this.entities.length;e+=1)this.entities[e].tick(t)}},{key:"render",value:function(t){for(var e=0;e<this.entities.length;e+=1){var n=this.entities[e];J.includes(n.type)||this.entities[e].render(t)}this.cursor.x&&this.cursor.y&&this.cursor.render(t)}},{key:"addEntity",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t.id=Q,Q+=1,e?this.entities.unshift(t):this.entities.push(t);var n=new Z(t.x+t.bounds.x,t.y+t.bounds.y,t.bounds.width,t.bounds.height);return this.handler.getWorld().getSpatialGrid().insert(n,t),t}},{key:"findEntityByName",value:function(t){return this.entities.find((function(e){return e.name===t}))}},{key:"removeEntity",value:function(t){var e=this.entities.indexOf(t);this.handler.getWorld().getSpatialGrid().remove(new Z(t.x+t.bounds.x,t.y+t.bounds.y,t.bounds.width,t.bounds.height),t),this.entities.splice(e,1),t=void 0}},{key:"findClickableEntityAt",value:function(t,e){var n=new Z(this.cursor.x+this.cursor.bounds.x,this.cursor.y+this.cursor.bounds.y,this.cursor.bounds.width,this.cursor.bounds.height);return V(this.entities).reverse().find((function(t){if(!t.bounds)throw new Error("entity type ".concat(t.type," has no bounds"));var e=new Z(t.x+t.bounds.x,t.y+t.bounds.y,t.bounds.width,t.bounds.height);return n.intersects(e)&&q.includes(t.type)}))}},{key:"mouseClick",value:function(t){var e=t.x,n=t.y,i=this.findClickableEntityAt(e,n);i&&i.wasClickedAt&&i.wasClickedAt(e,n)}},{key:"mouseMove",value:function(t){var e=t.x,n=t.y;this.cursor.x=e,this.cursor.y=n;var i=this.findClickableEntityAt(e,n);i?i&&this.lastEntityHovered&&i.id===this.lastEntityHovered.id||(this.lastEntityHovered&&this.lastEntityHovered.wasBlurred&&this.lastEntityHovered.wasBlurred(),i.wasHoveredAt&&i.wasHoveredAt(e,n),this.lastEntityHovered=i):this.lastEntityHovered&&this.lastEntityHovered.wasBlurred&&(this.lastEntityHovered.wasBlurred(),this.lastEntityHovered=null)}},{key:"getEntitiesByType",value:function(t){return this.entities.filter((function(e){return e.type==t}))}}])&&K(e.prototype,n),i&&K(e,i),t}();function tt(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var et=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,i;return e=t,(n=[{key:"construct",value:function(){this.currentState=null}},{key:"getState",value:function(){return this.currentState}},{key:"setState",value:function(t){this.currentState=t}}])&&tt(e.prototype,n),i&&tt(e,i),t}();function nt(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var it=function(){function t(e,n,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.width=parseInt(e/i),this.height=parseInt(n/i),this.size=i,this.grid=[];for(var r=0;r<=this.width;r++){this.grid[r]=[];for(var o=0;o<=this.height;o++)this.grid[r][o]=[]}}var e,n,i;return e=t,(n=[{key:"insert",value:function(t,e){for(var n=Math.max(0,parseInt(t.x/this.size)),i=Math.max(0,parseInt(t.y/this.size)),r=Math.min(this.width,parseInt((t.x+t.width)/this.size)),o=Math.min(this.height,parseInt((t.y+t.height)/this.size)),a=i;a<=o;a++)for(var s=n;s<=r;s++)-1===this.grid[s][a].indexOf(e)&&this.grid[s][a].push(e)}},{key:"retrieve",value:function(t,e){for(var n=Math.max(0,parseInt(t.x/this.size)),i=Math.max(0,parseInt(t.y/this.size)),r=Math.min(this.width,parseInt((t.x+t.width)/this.size)),o=Math.min(this.height,parseInt((t.y+t.height)/this.size)),a=[],s=i;s<=o;s++)for(var u=n;u<=r;u++)this.grid[u][s].forEach((function(t){t!==e&&-1===a.indexOf(t)&&a.push(t)}));return a}},{key:"remove",value:function(t,e){for(var n=Math.max(0,parseInt(t.x/this.size)),i=Math.max(0,parseInt(t.y/this.size)),r=Math.min(this.width,parseInt((t.x+t.width)/this.size)),o=Math.min(this.height,parseInt((t.y+t.height)/this.size)),a=i;a<=o;a++)for(var s=n;s<=r;s++)for(var u=0;u<this.grid[s][a].length;u++)this.grid[s][a][u]===e&&this.grid[s][a].splice(u,1)}},{key:"reset",value:function(){for(var t=0;t<=this.width;t++){this.grid[t]=[];for(var e=0;e<=this.height;e++)this.grid[t][e]=[]}}},{key:"getWidth",value:function(){return this.width}},{key:"getHeight",value:function(){return this.height}},{key:"getSize",value:function(){return this.size}},{key:"render",value:function(t){for(var e=0;e<=this.height;e++)for(var n=0;n<=this.width;n++){var i=n*this.size,r=e*this.size;t.fillStyle="orange",t.strokeRect(i,r,this.size,this.size),this.grid[n][e].length>0&&(t.fillStyle="yellow",t.fillRect(i,r,this.size,this.size))}}}])&&nt(e.prototype,n),i&&nt(e,i),t}();function rt(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var ot=[h.TYPES.GARDEN,h.TYPES.PLOT,h.TYPES.LANE];function at(t){return(at="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function st(t,e){return!e||"object"!==at(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ut(t){return(ut=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ht(t,e){return(ht=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var ct=function(t){function e(t,n,i){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=st(this,ut(e).call(this,t,n,i))).handler=t,r.bounds={x:0,y:0,width:0,height:0},r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ht(t,e)}(e,t),e}(function(){function t(e,n,i,r,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.handler=e,this.x=n,this.y=i,this.bounds=new Z(0,0,this.width,this.height)}var e,n,i;return e=t,(n=[{key:"tick",value:function(){throw new Error("".concat(this.constructor.name," did not implement tick() method"))}},{key:"getCollisionBounds",value:function(t,e){var n=parseInt(this.x+this.bounds.x+t,10),i=parseInt(this.y+this.bounds.y+e);return new Z(n,i,this.bounds.width,this.bounds.height)}},{key:"checkEntityCollisions",value:function(t,e){var n=this.handler.getWorld().getSpatialGrid().retrieve(new Z(this.x+this.bounds.x,this.y+this.bounds.y,this.bounds.width,this.bounds.height),this);n=n.filter((function(t){return!ot.includes(t.type)}));for(var i=0;i<n.length;i++)if(n[i].getCollisionBounds(0,0).intersects(this.getCollisionBounds(t,e)))return!0;return!1}},{key:"drawCollisionBounds",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"blue";t.fillStyle=e,t.fillRect(this.x+this.bounds.x,this.y+this.bounds.y,this.bounds.width,this.bounds.height)}},{key:"destroySelf",value:function(){this.handler.getEntityManager().removeEntity(this)}}])&&rt(e.prototype,n),i&&rt(e,i),t}());function lt(t){return(lt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ft(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);i=!0);}catch(t){r=!0,o=t}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function dt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function yt(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function pt(t,e){return!e||"object"!==lt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function bt(t){return(bt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function gt(t,e){return(gt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var vt=function(t){function e(t,n){var i,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return dt(this,e),(i=pt(this,bt(e).call(this,t,r,o))).handler=t,i.name=n,i.nameWidth=t.getGraphicsManager().getGraphics().measureText(i.name).width,i.x=r,i.y=o,i.width=h.ICON_WIDTH,i.height=h.ICON_HEIGHT,i.type=h.TYPES.COMPUTER_APP,i.yPadding=22,i.hovered=!1,i.state="idle",i}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&gt(t,e)}(e,t),n=e,(i=[{key:"tick",value:function(){switch(this.state){case"idle":break;case"loading":var t=this.assets.animations.loading;if(!t)return this.appLoaded(),void(this.state="idle");if(t.index>=t.frames.length-1){this.appLoaded();var e=ft(this.handler.getEntityManager().getEntitiesByType(h.TYPES.COMPUTER),1)[0];if(!e)throw new Error("entity with type ".concat(h.TYPES.COMPUTER," not found."));return e.activeAppName=this.name===h.APPS.CODE_MAN?null:this.name,t.index=0,void(this.state="idle")}t.tick();break;case"inactive":break;default:throw new Error('Computer App animation state "'.concat(this.state," is not accounted for"))}}},{key:"getCurrentAnimationFrame",value:function(){switch(this.state){case"idle":break;case"loading":if(!this.assets||!this.assets.animations||!this.assets.animations.loading)return;return this.assets.animations.loading.getCurrentFrame();case"inactive":break;default:throw new Error('Computer App animation state "'.concat(this.state," is not accounted for"))}}},{key:"render",value:function(t){switch(this.state){case"idle":t.drawSprite(this.assets.icon,this.x,this.y,this.width,this.height),this.hovered&&(t.globalAlpha=.4,t.fillStyle="black",t.fillRect(this.x+this.bounds.x-6,this.y+this.bounds.y-6,this.bounds.width+12,this.bounds.height+12+h.FONT_SIZE+2),t.globalAlpha=1);break;case"loading":this.getCurrentAnimationFrame()&&t.drawSprite(this.getCurrentAnimationFrame(),this.x,this.y,this.width,this.height);break;case"inactive":break;default:throw new Error('Computer App state "'.concat(this.state," is not accounted for"))}}},{key:"wasClickedAt",value:function(t,e){var n=ft(this.handler.getEntityManager().getEntitiesByType(h.TYPES.COMPUTER),1)[0];if(!n)throw new Error("entity with type ".concat(h.TYPES.COMPUTER," not found."));if(n.activeAppName===this.name||!n.activeAppName)switch(this.hovered=!1,this.state){case"idle":this.state="loading";break;case"loading":case"inactive":break;default:throw new Error('Computer App state "'.concat(this.state," is not accounted for during mouseclicked"))}}},{key:"wasHoveredAt",value:function(t,e){"inactive"!==this.state&&"loading"!==this.state&&(this.hovered=!0)}},{key:"wasBlurred",value:function(){"inactive"!==this.state&&"loading"!==this.state&&(this.hovered=!1)}}])&&yt(n.prototype,i),r&&yt(n,r),e}(ct);function wt(t){return(wt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Et(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function mt(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Ot(t,e){return!e||"object"!==wt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Tt(t){return(Tt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function St(t,e){return(St=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var kt=function(t){function e(t,n){var i,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3?arguments[3]:void 0;return Et(this,e),(i=Ot(this,Tt(e).call(this,t,0,0))).x=0,i.y=0,i.bounds={x:0,y:0,width:h.GAME_WIDTH,height:h.GAME_HEIGHT},i.type=h.TYPES.INTERACTIVE,i.textArray=n.text,i.isRead=r,i.sender=n.sender,i.subject=n.subject,o&&(i.unlocksOnOpen=o),i}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&St(t,e)}(e,t),n=e,(i=[{key:"tick",value:function(){}},{key:"drawFadedBackground",value:function(t){var e=this.bounds,n=e.x,i=e.y,r=e.width,o=e.height;t.globalAlpha=.4,t.fillStyle="black",t.fillRect(n,i,r,o),t.globalAlpha=1}},{key:"render",value:function(t){this.drawFadedBackground(t),this.drawPaperAndText(t)}},{key:"drawPaperAndText",value:function(t){var e=h.GAME_WIDTH/8,n=h.GAME_HEIGHT/16,i=h.GAME_WIDTH-2*e,r=h.GAME_HEIGHT-2*n;t.fillStyle="white",t.fillRect(e,n,i,r);for(var o=e+64,a=n+64,s=0;s<this.textArray.length;s+=1)t.drawText(this.textArray[s],o,a,"black",!1,h.BIG_FONT_SIZE),a+=h.BIG_FONT_SIZE+16}},{key:"wasClickedAt",value:function(){this.setHiddenCallback(!1),this.handler.getEntityManager().removeEntity(this)}}])&&mt(n.prototype,i),r&&mt(n,r),e}(ct),It=i(0);function _t(t){return(_t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function At(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Pt(t,e){return!e||"object"!==_t(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ct(t){return(Ct=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Mt(t,e){return(Mt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var xt=function(t){function e(t,n,i,r,o,a,s,u,c){var l;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(l=Pt(this,Ct(e).call(this,t,n,i))).width=r,l.height=o,l.email=a,l.bgColor=s,l.highlightColor=u,l.hovered=!1,l.bounds={x:-16,y:-26,width:l.width,height:l.height},l.type=h.TYPES.EMAIL_INBOX_ITEMS,l.setHiddenCallback=c,l.hidden=!1,l}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Mt(t,e)}(e,t),n=e,(i=[{key:"tick",value:function(){}},{key:"render",value:function(t){if(!this.hidden){var e=this.x,n=this.y,i=this.width,r=this.height;t.fillStyle=this.hovered?this.highlightColor:this.bgColor,t.fillRect(e-16,n-26,i,r),t.fillStyle="black",t.drawText(this.email.sender,this.x,this.y-4,"white",!1,h.EMAIL_ITEM_SIZE),t.drawText(this.email.subject,this.x+224,this.y-4,"white",!1,h.EMAIL_ITEM_SIZE)}}},{key:"wasHoveredAt",value:function(t,e){this.hovered=!0}},{key:"wasBlurred",value:function(){this.hovered=!1}},{key:"wasClickedAt",value:function(){this.setHiddenCallback(!0),this.email.isRead=!0,this.email.setHiddenCallback=this.setHiddenCallback,this.handler.getEntityManager().addEntity(this.email),this.email.unlocksOnOpen&&this.handler.getEmailManager().unlockApp(this.email.unlocksOnOpen)}}])&&At(n.prototype,i),r&&At(n,r),e}(ct);function Ht(t){return(Ht="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function jt(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);i=!0);}catch(t){r=!0,o=t}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function Nt(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Rt(t,e){return!e||"object"!==Ht(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Gt(t){return(Gt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Dt(t,e){return(Dt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Lt=function(t){function e(t,n,i){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=Rt(this,Gt(e).call(this,t,0,0))).x=0,r.y=0,r.paddingX=h.GAME_WIDTH/8,r.paddingY=h.GAME_HEIGHT/16,r.width=h.GAME_WIDTH-2*r.paddingX,r.height=h.GAME_HEIGHT-2*r.paddingY,r.setActiveCallback=i,r.bounds={x:850,y:64,width:34,height:30},r.type=h.TYPES.EMAIL_ITEMS,r.hidden=!1,r.emails=n,r.assets=E.getAssets("inbox"),r.emailItems=[],r.initializeEmailItems(),r}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Dt(t,e)}(e,t),n=e,(i=[{key:"tick",value:function(){}},{key:"initializeEmailItems",value:function(){for(var t=this.paddingX+16+4,e=this.paddingY+118,n=0;n<this.emails.length;n+=1){var i=this.emails[n],r=n%2?h.COLORS.RED:h.COLORS.PURPLE,o=n%2?h.COLORS.LIGHT_RED:h.COLORS.LIGHT_PURPLE,a=new xt(this.handler,t,e,this.width-8,34,i,r,o,this.setHidden.bind(this));this.handler.getEntityManager().addEntity(a),this.emailItems.push(a),e+=36}}},{key:"drawFadedBackground",value:function(t){t.globalAlpha=.4,t.fillStyle="black",t.fillRect(0,0,h.GAME_WIDTH,h.GAME_HEIGHT),t.globalAlpha=1}},{key:"render",value:function(t){this.hidden||(this.drawFadedBackground(t),this.drawInbox(t),this.drawEmailItems(t))}},{key:"setHidden",value:function(t){this.hidden=t;for(var e=0;e<this.emailItems.length;e+=1)this.emailItems[e].hidden=t}},{key:"drawEmailItems",value:function(t){for(var e=0;e<this.emailItems.length;e+=1)this.emailItems[e].render(t)}},{key:"drawInbox",value:function(t){t.drawSprite(this.assets.bg,this.paddingX,this.paddingY,this.width,this.height)}},{key:"wasClickedAt",value:function(){for(var t=this.handler.getEntityManager(),e=0;e<this.emailItems.length;e+=1)t.removeEntity(this.emailItems[e]);var n=jt(this.handler.getEntityManager().getEntitiesByType(h.TYPES.COMPUTER),1)[0];if(!n)throw new Error("entity with type ".concat(h.TYPES.COMPUTER," not found."));n.activeAppName=null,this.setActiveCallback(),t.removeEntity(this)}}])&&Nt(n.prototype,i),r&&Nt(n,r),e}(ct);function Ft(t){return(Ft="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Bt(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Wt(t,e){return!e||"object"!==Ft(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Yt(t,e,n){return(Yt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Ut(t)););return t}(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function Ut(t){return(Ut=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function zt(t,e){return(zt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Xt=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Wt(this,Ut(e).call(this,t,h.APPS.EMAIL))).bounds={x:0,y:26,width:n.width,height:36},n.newEmail=!0,n.newFlasher=0,n.newFlasherMax=70,n.textXOffset=10,n.textYOffset=n.height+18,n.assets=E.getAssets("email"),n.emails=[new kt(n.handler,It.b,!1,h.APPS.FOOTAGE),new kt(n.handler,It.c)],n}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&zt(t,e)}(e,t),n=e,(i=[{key:"setActive",value:function(){this.state="idle"}},{key:"render",value:function(t){Yt(Ut(e.prototype),"render",this).call(this,t),this.newEmail&&"idle"===this.state&&(this.newFlasher+=1,this.newFlasher<this.newFlasherMax/2?(t.fillStyle="black",t.fillRect(this.x+28,this.y+18,50,24),t.fillStyle=h.COLORS.RED,t.fillRect(this.x+30,this.y+20,46,20),t.fillStyle="black",t.drawText("NEW!",this.x+32,this.y+36,h.COLORS.CREAM,!1,16)):this.newFlasher>this.newFlasherMax&&(this.newFlasher=0))}},{key:"addEmail",value:function(t){var e,n;switch(t){case"second":e=It.d;break;case"easterEggs":e=It.a;break;case"third":e=It.e;break;default:throw new Error("No email by name ".concat(t," found in emailCopy"))}switch(t){case"second":n=h.APPS.CODE_MAN;break;case"easterEggs":n=[h.APPS.THE_CORE,h.APPS.ME_MYSELF_I,h.APPS.THE_CODERS_GAME];break;case"third":n=[];break;default:throw new Error("No email by name ".concat(t," found in emailCopy"))}this.emails.push(new kt(this.handler,e,!1,n)),this.newEmail=!0}},{key:"appLoaded",value:function(){this.newEmail=!1,this.handler.getEntityManager().addEntity(new Lt(this.handler,this.emails,this.setActive.bind(this)))}}])&&Bt(n.prototype,i),r&&Bt(n,r),e}(vt);function Zt(t){return(Zt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Vt(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Kt(t,e){return!e||"object"!==Zt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function qt(t){return(qt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Jt(t,e){return(Jt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Qt=function(t){function e(t,n,i,r,o,a,s,u,c){var l;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(l=Kt(this,qt(e).call(this,t,n,i))).width=r,l.height=o,l.video=a,l.bgColor=s,l.highlightColor=u,l.hovered=!1,l.bounds={x:-16,y:-26,width:l.width,height:l.height},l.type=h.TYPES.FOOTAGE_LIBRARY_ITEMS,l.setHiddenCallback=c,l.hidden=!1,l}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Jt(t,e)}(e,t),n=e,(i=[{key:"tick",value:function(){}},{key:"render",value:function(t){if(!this.hidden){var e=this.x,n=this.y,i=this.width,r=this.height;t.fillStyle=this.hovered?this.highlightColor:this.bgColor,t.fillRect(e-16,n-26,i,r),t.fillStyle="black",t.drawText(this.video.video.who,this.x,this.y-4,"white",!1,h.EMAIL_ITEM_SIZE),t.drawText(this.video.video.status||"N/A (Please watch video)",this.x+224,this.y-4,"white",!1,h.EMAIL_ITEM_SIZE)}}},{key:"wasHoveredAt",value:function(t,e){this.hovered=!0}},{key:"wasBlurred",value:function(){this.hovered=!1}},{key:"wasClickedAt",value:function(){this.setHiddenCallback(!0),this.video.isViewed=!0,this.video.setHiddenCallback=this.setHiddenCallback,this.handler.getEntityManager().addEntity(this.video)}}])&&Vt(n.prototype,i),r&&Vt(n,r),e}(ct);function $t(t){return($t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function te(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);i=!0);}catch(t){r=!0,o=t}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function ee(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function ne(t,e){return!e||"object"!==$t(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ie(t){return(ie=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function re(t,e){return(re=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var oe=function(t){function e(t,n,i){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=ne(this,ie(e).call(this,t,0,0))).x=0,r.y=0,r.paddingX=h.GAME_WIDTH/8,r.paddingY=h.GAME_HEIGHT/16,r.width=h.GAME_WIDTH-2*r.paddingX,r.height=h.GAME_HEIGHT-2*r.paddingY,r.setActiveCallback=i,r.bounds={x:850,y:64,width:34,height:30},r.type=h.TYPES.FOOTAGE_ITEMS,r.hidden=!1,r.footage=n,r.assets=E.getAssets("footageLibrary"),r.footageItems=[],r.initializeFootageItems(),r}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&re(t,e)}(e,t),n=e,(i=[{key:"tick",value:function(){}},{key:"initializeFootageItems",value:function(){for(var t=this.paddingX+16+4,e=this.paddingY+118,n=0;n<this.footage.length;n+=1){var i=this.footage[n],r=n%2?h.COLORS.RED:h.COLORS.PURPLE,o=n%2?h.COLORS.LIGHT_RED:h.COLORS.LIGHT_PURPLE,a=new Qt(this.handler,t,e,this.width-8,34,i,r,o,this.setHidden.bind(this));this.handler.getEntityManager().addEntity(a),this.footageItems.push(a),e+=36}}},{key:"drawFadedBackground",value:function(t){t.globalAlpha=.4,t.fillStyle="black",t.fillRect(0,0,h.GAME_WIDTH,h.GAME_HEIGHT),t.globalAlpha=1}},{key:"render",value:function(t){this.hidden||(this.drawFadedBackground(t),this.drawLibrary(t),this.drawFootageItems(t))}},{key:"setHidden",value:function(t){this.hidden=t;for(var e=0;e<this.footageItems.length;e+=1)this.footageItems[e].hidden=t}},{key:"drawFootageItems",value:function(t){for(var e=0;e<this.footageItems.length;e+=1)this.footageItems[e].render(t)}},{key:"drawLibrary",value:function(t){t.drawSprite(this.assets.bg,this.paddingX,this.paddingY,this.width,this.height)}},{key:"wasClickedAt",value:function(){for(var t=this.handler.getEntityManager(),e=0;e<this.footageItems.length;e+=1)t.removeEntity(this.footageItems[e]);var n=te(this.handler.getEntityManager().getEntitiesByType(h.TYPES.COMPUTER),1)[0];if(!n)throw new Error("entity with type ".concat(h.TYPES.COMPUTER," not found."));n.activeAppName=null,t.removeEntity(this),this.setActiveCallback()}}])&&ee(n.prototype,i),r&&ee(n,r),e}(ct);function ae(t){return(ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function se(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ue(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function he(t,e){return!e||"object"!==ae(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ce(t){return(ce=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function le(t,e){return(le=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var fe=function(t){function e(t,n,i,r){var o,a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=arguments.length>5?arguments[5]:void 0;return se(this,e),(o=he(this,ce(e).call(this,t,n,i))).x=n,o.y=i,o.bounds={x:0,y:0,width:h.GAME_WIDTH,height:h.GAME_HEIGHT},o.type=h.TYPES.INTERACTIVE,o.isViewed=a,o.video=r,o.increaseWatchedCounterCallback=s,o.states={IDLE:"idle",PLAYING:"playing",FINISHED:"finished"},o.assets=E.getAssets("bigFootage"),o.state=o.states.IDLE,o}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&le(t,e)}(e,t),n=e,(i=[{key:"tick",value:function(){switch(this.state){case this.states.FINISHED:case this.states.IDLE:break;case this.states.PLAYING:var t=this.video.assets.animations[this.states.PLAYING];if(t.index>=t.frames.length-1)return this.video.status="death"===this.video.type?"Deceased":"Alive","alive"===this.video.type&&this.handler.getFootageManager().updateWatchedBestVideo(this.video.clueNumber),void(this.state=this.states.FINISHED);t.tick();break;default:throw new Error("Big Footage unrecognized state: ".concat(this.state))}}},{key:"drawFadedBackground",value:function(t){var e=this.bounds,n=e.x,i=e.y,r=e.width,o=e.height;t.globalAlpha=.4,t.fillStyle="black",t.fillRect(n,i,r,o),t.globalAlpha=1}},{key:"getCurrentAnimationFrame",value:function(){switch(this.state){case this.states.IDLE:break;case this.states.FINISHED:case this.states.PLAYING:return this.video.assets.animations[this.states.PLAYING].getCurrentFrame();default:throw new Error('Big Footage animation state "'.concat(this.state," is not accounted for"))}}},{key:"render",value:function(t){switch(this.drawFadedBackground(t),this.state){case this.states.IDLE:t.drawSprite(this.assets.playButton,this.x,this.y,this.width,this.height);break;case this.states.FINISHED:t.drawSprite(this.getCurrentAnimationFrame(),this.x,this.y,this.width,this.height),t.fillStyle="black",t.globalAlpha=.6,t.fillRect(this.x,this.y,this.assets.playButton.width,this.assets.playButton.height),t.globalAlpha=1,t.fillStyle="black",t.drawText("X",this.x+this.assets.playButton.height+60,this.y+80,"white",!0,64);break;case this.states.PLAYING:t.drawSprite(this.getCurrentAnimationFrame(),this.x,this.y,this.width,this.height);break;default:throw new Error("Big Footage unrecognized state: ".concat(this.state))}}},{key:"wasClickedAt",value:function(){switch(this.state){case this.states.IDLE:this.state=this.states.PLAYING;break;case this.states.PLAYING:break;case this.states.FINISHED:this.video.assets.animations[this.states.PLAYING].index=0,this.setHiddenCallback(!1),this.state=this.states.IDLE,this.increaseWatchedCounterCallback&&this.increaseWatchedCounterCallback(),this.handler.getFootageManager().isLogComplete()&&this.handler.getWorld().gameWon(),this.handler.getEntityManager().removeEntity(this);break;default:throw new Error("Big Footage wasClicked unrecognized state: ".concat(this.state))}}}])&&ue(n.prototype,i),r&&ue(n,r),e}(ct);function de(t){return(de="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ye(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);i=!0);}catch(t){r=!0,o=t}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function pe(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function be(t){return(be=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ge(t,e){return(ge=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ve(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var we=function(t){function e(t){var n,i,r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),i=this,(n=!(r=be(e).call(this,t,h.APPS.FOOTAGE))||"object"!==de(r)&&"function"!=typeof r?ve(i):r).bounds={x:0,y:26,width:n.width,height:36},n.textXOffset=0,n.textYOffset=n.height+18,n.assets=E.getAssets("footage"),n.watchedCounter=0,n.videos={johnDies:{clueNumber:1,who:"John Smith",type:"death",assets:E.getAssets("johnDies")},johnLives:{clueNumber:1,who:"John Smith",type:"alive",assets:E.getAssets("johnLives")},oliviaDies:{clueNumber:2,who:"Olivia Bouqets",type:"death",assets:E.getAssets("oliviaDies")},oliviaLives:{clueNumber:2,who:"Olivia Bouqets",type:"alive",assets:E.getAssets("oliviaLives")},peterDies:{clueNumber:3,who:"Peter Pipers",type:"death",assets:E.getAssets("peterDies")},peterLives:{clueNumber:3,who:"Peter Pipers",type:"alive",assets:E.getAssets("peterLives")}};var o=ye(n.handler.getEntityManager().getEntitiesByType(h.TYPES.COMPUTER),1)[0],a={x:o.x,y:o.y};return n.footage=[new fe(n.handler,a.x,a.y,n.videos.johnDies,!1,n.increaseWatchedCounter.bind(ve(ve(n)))),new fe(n.handler,a.x,a.y,n.videos.oliviaDies,!1,n.increaseWatchedCounter.bind(ve(ve(n)))),new fe(n.handler,a.x,a.y,n.videos.peterDies,!1,n.increaseWatchedCounter.bind(ve(ve(n))))],n}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ge(t,e)}(e,t),n=e,(i=[{key:"setActive",value:function(){this.state="idle"}},{key:"increaseWatchedCounter",value:function(){this.watchedCounter+=1,1===this.watchedCounter&&this.handler.getEmailManager().addEmail("second")}},{key:"appLoaded",value:function(){this.handler.getEntityManager().addEntity(new oe(this.handler,this.footage,this.setActive.bind(this)))}},{key:"updateFootage",value:function(t){for(var e=ye(this.handler.getEntityManager().getEntitiesByType(h.TYPES.COMPUTER),1)[0],n={x:e.x,y:e.y},i=!1,r=0;r<this.footage.length;r+=1)if(this.footage[r].video.clueNumber===t)switch(t){case 1:this.footage[r]=new fe(this.handler,n.x,n.y,this.videos.johnLives,!1),i=!0;break;case 2:this.footage[r]=new fe(this.handler,n.x,n.y,this.videos.oliviaLives,!1),i=!0;break;case 3:this.footage[r]=new fe(this.handler,n.x,n.y,this.videos.peterLives,!1),i=!0}if(!i)throw new Error("video with clue number ".concat(t," not found in Footage.footage"))}}])&&pe(n.prototype,i),r&&pe(n,r),e}(vt);function Ee(t){return(Ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function me(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Oe(t,e){return!e||"object"!==Ee(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Te(t){return(Te=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Se(t,e){return(Se=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var ke=function(t){function e(t,n,i,r,o,a,s){var u;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(u=Oe(this,Te(e).call(this,t,n,i))).width=r,u.height=o,u.number=s,u.hovered=!1,u.setting=a,u.bounds={x:-32,y:0,width:u.width,height:u.height},u.type=h.TYPES.SETTINGS_WINDOW_ITEMS,u.hidden=a.hidden,u.isChecked=a.checked,u.wasToggled=!1,u.assets=E.getAssets("settingsCheck"),u}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Se(t,e)}(e,t),n=e,(i=[{key:"tick",value:function(){}},{key:"render",value:function(t){this.hidden?t.drawText("[missing setting #".concat(this.setting.number,"]"),this.x+50,this.y+32,"black",!1,24):(this.x,this.y,this.width,this.height,this.hovered&&(t.fillStyle=h.COLORS.LIGHT_PURPLE,t.globalAlpha=.4,t.fillRect(this.x+this.bounds.x,this.y+this.bounds.y,this.bounds.width,this.bounds.height),t.globalAlpha=1,t.fillStyle="black"),t.drawSprite(this.assets.box,this.x,this.y,this.assets.box.width,this.assets.box.height),this.setting.checked&&t.drawSprite(this.assets.check,this.x,this.y,this.assets.box.width,this.assets.box.height),t.drawText(this.setting.label,this.x+50,this.y+32,"black",!1,24))}},{key:"wasHoveredAt",value:function(t,e){this.hovered=!0}},{key:"wasBlurred",value:function(){this.hovered=!1}},{key:"wasClickedAt",value:function(){this.hidden||this.toggled||(this.toggled=!0,this.setting.checked=!this.setting.checked,this.handler.getFootageManager().interveneClue(this.setting.clueNumber))}}])&&me(n.prototype,i),r&&me(n,r),e}(ct);function Ie(t){return(Ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _e(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);i=!0);}catch(t){r=!0,o=t}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function Ae(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Pe(t,e){return!e||"object"!==Ie(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ce(t){return(Ce=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Me(t,e){return(Me=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var xe=function(t){function e(t,n,i,r,o){var a;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(a=Pe(this,Ce(e).call(this,t,n,i))).x=n,a.y=i,a.paddingX=50,a.paddingY=50,a.width=416,a.height=278,a.bounds={x:418,y:63,width:36,height:34},a.setActiveCallback=o,a.type=h.TYPES.SETTINGS_ITEMS,a.hidden=!1,a.settings=r,a.assets=E.getAssets("settingsWindow"),a.settingsItems=[],a.initializeSettingsItems(),a}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Me(t,e)}(e,t),n=e,(i=[{key:"tick",value:function(){}},{key:"initializeSettingsItems",value:function(){for(var t=80,e=0;e<this.settings.length;e+=1){var n=this.settings[e],i=new ke(this.handler,this.x+32+this.paddingX,this.y+t+this.paddingY,this.width,45,n,this.setHidden.bind(this));this.handler.getEntityManager().addEntity(i),this.settingsItems.push(i),t+=64}}},{key:"drawFadedBackground",value:function(t){t.globalAlpha=.4,t.fillStyle="black",t.fillRect(0,0,h.GAME_WIDTH,h.GAME_HEIGHT),t.globalAlpha=1}},{key:"render",value:function(t){this.hidden||(this.drawFadedBackground(t),this.drawWindow(t),this.drawSettingsItems(t))}},{key:"setHidden",value:function(t){this.hidden=t;for(var e=0;e<this.settingsItems.length;e+=1)this.settingsItems[e].hidden=t}},{key:"drawSettingsItems",value:function(t){for(var e=0;e<this.settingsItems.length;e+=1)this.settingsItems[e].render(t)}},{key:"drawWindow",value:function(t){t.drawSprite(this.assets.bg,this.paddingX+this.x,this.paddingY+this.y,this.width,this.height)}},{key:"wasClickedAt",value:function(){for(var t=this.handler.getEntityManager(),e=0;e<this.settingsItems.length;e+=1)t.removeEntity(this.settingsItems[e]);var n=_e(this.handler.getEntityManager().getEntitiesByType(h.TYPES.COMPUTER),1)[0];if(!n)throw new Error("entity with type ".concat(h.TYPES.COMPUTER," not found."));n.activeAppName=null,t.removeEntity(this),this.setActiveCallback()}}])&&Ae(n.prototype,i),r&&Ae(n,r),e}(ct);function He(t){return(He="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function je(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);i=!0);}catch(t){r=!0,o=t}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function Ne(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Re(t,e){return!e||"object"!==He(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ge(t){return(Ge=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function De(t,e){return(De=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Le=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Re(this,Ge(e).call(this,t,h.APPS.SETTINGS))).bounds={x:0,y:8,width:n.width,height:60},n.textXOffset=-2,n.textYOffset=n.height+18,n.assets=E.getAssets("settings"),n.settings=[{number:3731,clueNumber:1,hidden:!0,label:"Piano Hammer",checked:!1},{number:9182,clueNumber:2,hidden:!0,label:"UFO Intervention",checked:!1},{number:8742,clueNumber:3,hidden:!0,label:"Kamikaze Bird",checked:!1}],n}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&De(t,e)}(e,t),n=e,(i=[{key:"showSetting",value:function(t){var e=this.settings[t-1];return!1!==e.hidden&&(e.hidden=!1,!0)}},{key:"setActive",value:function(){this.state="idle"}},{key:"appLoaded",value:function(){var t=je(this.handler.getEntityManager().getEntitiesByType(h.TYPES.COMPUTER),1)[0],e={x:t.x,y:t.y};this.handler.getEntityManager().addEntity(new xe(this.handler,e.x,e.y,this.settings,this.setActive.bind(this)))}}])&&Ne(n.prototype,i),r&&Ne(n,r),e}(vt);function Fe(t){return(Fe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Be(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function We(t,e){return!e||"object"!==Fe(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ye(t){return(Ye=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ue(t,e){return(Ue=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var ze=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=We(this,Ye(e).call(this,t,h.APPS.CODE_MAN))).bounds={x:-4,y:0,width:n.width+16,height:64},n.textXOffset=-6,n.textYOffset=n.height+18,n.assets=E.getAssets("codeMan"),n}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ue(t,e)}(e,t),n=e,(i=[{key:"setActive",value:function(){this.state="idle"}},{key:"badClue",value:function(){this.handler.getWorld().createDialogue(["iNPuT NoT ReCoGNiZeD".toUpperCase(),"TRy aGaiN, HuMaN... :O".toUpperCase()],!0)}},{key:"appLoaded",value:function(){var t=prompt("GIVE YOUR CODE TO CODE MAN NOW:");if(t){var e=!1;switch(t=(t=t.trim()).toUpperCase()){case"BONK":e=this.handler.getSettingsManager().showSetting(1);break;case"UFO":e=this.handler.getSettingsManager().showSetting(2);break;case"BLUE":e=this.handler.getSettingsManager().showSetting(3);break;default:return void this.badClue()}e?this.handler.getWorld().createDialogue(["SySTeM SeTTiNGS HaVe BeeN uPDaTeD".toUpperCase(),"HaVe a NiCe DaY, HuMaN... :)".toUpperCase()],!0):this.handler.getWorld().createDialogue(["I aLReaDY uPDaTeD THaT SeTTiNG".toUpperCase(),"FoR YoU, HuMaN... :|".toUpperCase()],!0)}else this.badClue()}}])&&Be(n.prototype,i),r&&Be(n,r),e}(vt);function Xe(t){return(Xe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ze(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Ve(t,e){return!e||"object"!==Xe(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ke(t){return(Ke=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function qe(t,e){return(qe=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Je=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Ve(this,Ke(e).call(this,t,0,0))).width=h.GAME_WIDTH,n.height=h.GAME_HEIGHT,n.states={INIT:"init",IDLE:"idle"},n.bounds={x:0,y:0,width:0,height:0},n.state=n.states.INIT,n.parentWindow=document.querySelector("#main"),n}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&qe(t,e)}(e,t),n=e,(i=[{key:"initIframe",value:function(){this.wrapper=document.createElement("div");var t=document.createElement("iframe");this.wrapper.style.cursor="auto",this.wrapper.style.width="".concat(this.width,"px"),this.wrapper.style.height="".concat(this.height,"px"),this.wrapper.style.position="absolute",t.style.width=this.wrapper.style.width,t.style.height=this.wrapper.style.height,this.wrapper.setAttribute("z-index","9999"),t.setAttribute("z-index","9998"),t.setAttribute("src",this.src),this.parentWindow.appendChild(this.wrapper),this.wrapper.appendChild(t),this.initGameHeader()}},{key:"initGameHeader",value:function(){var t=document.createElement("div");t.setAttribute("id","game-header");var e=t.style;e.width="".concat(this.width+4,"px"),e.height="40px",e.position="absolute",e.top="0px",e.borderRadius="1%",e.border="2px black solid",t.setAttribute("z-index","9999"),this.wrapper.appendChild(t),this.initGameHeaderStripes(t),this.initGameHeaderCloseButton(t)}},{key:"initGameHeaderStripes",value:function(t){var e=document.createElement("div");e.style.height="100%",e.style.width="95%",e.style.display="inline-block",t.appendChild(e);for(var n=0;n<3;n+=1){var i=document.createElement("div");i.style.height="33%",i.style.backgroundColor=0===n?h.COLORS.PURPLE:1===n?h.COLORS.CREAM:h.COLORS.RED,e.appendChild(i)}}},{key:"initGameHeaderCloseButton",value:function(t){var e=document.createElement("div"),n=e.style;n.display="inline-block",n.width="4%",n.backgroundColor="lightgrey",n.height="80%",n.borderLeftColor="grey",n.borderTopColor="white",n.borderRightColor="white",n.borderBottomColor="grey",n.borderWidth="4px",n.borderStyle="solid",n.position="relative",t.appendChild(e);var i=document.createElement("h2");i.innerHTML="X",i.style.position="absolute",i.style.top="-17px",i.style.right="11px",e.appendChild(i),e.addEventListener("click",this.closeSelf.bind(this))}},{key:"closeSelf",value:function(){this.handler.getSoundManager().play("bgm"),this.parentWindow.removeChild(this.wrapper),this.destroySelf()}},{key:"tick",value:function(){switch(this.state){case this.states.INIT:if(!this.src)throw new Error("Easter egg game has no .src!");this.initIframe(),this.state=this.states.IDLE;break;case this.states.IDLE:break;default:throw new Error('Easter Egg Game state "'.concat(this.state," is not accounted for"))}}},{key:"render",value:function(t){}}])&&Ze(n.prototype,i),r&&Ze(n,r),e}(ct);function Qe(t){return(Qe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function $e(t,e){return!e||"object"!==Qe(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function tn(t){return(tn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function en(t,e){return(en=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var nn=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=$e(this,tn(e).call(this,t))).src="https://mccordgh.github.io/the_line_js13kgames_2018/",n.title="The Core",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&en(t,e)}(e,t),e}(Je);function rn(t){return(rn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function on(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function an(t,e){return!e||"object"!==rn(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function sn(t){return(sn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function un(t,e){return(un=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var hn=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=an(this,sn(e).call(this,t,h.APPS.THE_CORE))).bounds={x:-8,y:0,width:n.width+18,height:64},n.textXOffset=-8,n.textYOffset=n.height+18,n.assets=E.getAssets("theCore"),n}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&un(t,e)}(e,t),n=e,(i=[{key:"setActive",value:function(){this.state="idle"}},{key:"appLoaded",value:function(){this.handler.getSoundManager().stop(),this.handler.getEntityManager().addEntity(new nn(this.handler))}}])&&on(n.prototype,i),r&&on(n,r),e}(vt);function cn(t){return(cn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ln(t,e){return!e||"object"!==cn(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function fn(t){return(fn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function dn(t,e){return(dn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var yn=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=ln(this,fn(e).call(this,t))).src="https://mccordgh.github.io/js13kgames_2017_entry/",n.title="Me, Myself, and i",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&dn(t,e)}(e,t),e}(Je);function pn(t){return(pn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function bn(t,e){return!e||"object"!==pn(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function gn(t){return(gn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function vn(t,e){return(vn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var wn=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=bn(this,gn(e).call(this,t))).src="https://js13kgames.com/games/thecoders-game/index.html",n.title="The_Coder's Game",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&vn(t,e)}(e,t),e}(Je);function En(t){return(En="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function mn(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function On(t,e){return!e||"object"!==En(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Tn(t){return(Tn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Sn(t,e){return(Sn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var kn=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=On(this,Tn(e).call(this,t,h.APPS.THE_CODERS_GAME))).bounds={x:-30,y:0,width:n.width+64,height:64},n.textXOffset=-30,n.textYOffset=n.height+18,n.assets=E.getAssets("codersGame"),n}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Sn(t,e)}(e,t),n=e,(i=[{key:"setActive",value:function(){this.state="idle"}},{key:"appLoaded",value:function(){this.handler.getSoundManager().stop(),this.handler.getEntityManager().addEntity(new wn(this.handler))}}])&&mn(n.prototype,i),r&&mn(n,r),e}(vt);function In(t){return(In="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _n(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function An(t,e){return!e||"object"!==In(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Pn(t){return(Pn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Cn(t,e){return(Cn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Mn=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=An(this,Pn(e).call(this,t,h.APPS.ME_MYSELF_I))).bounds={x:-32,y:0,width:n.width+70,height:64},n.textXOffset=-28,n.textYOffset=n.height+18,n.assets=E.getAssets("meMyselfI"),n}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Cn(t,e)}(e,t),n=e,(i=[{key:"setActive",value:function(){this.state="idle"}},{key:"appLoaded",value:function(){this.handler.getSoundManager().stop(),this.handler.getEntityManager().addEntity(new yn(this.handler))}}])&&_n(n.prototype,i),r&&_n(n,r),e}(vt);function xn(t){return(xn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Hn(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);i=!0);}catch(t){r=!0,o=t}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function jn(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Nn(t,e){return!e||"object"!==xn(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Rn(t){return(Rn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Gn(t,e){return(Gn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Dn=function(t){function e(t,n,i){var r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=Nn(this,Rn(e).call(this,t,n,i))).states={OFF:"off",INITIALIZE:"initialize",BOOTING:"booting",IDLE:"idle"},r.width=h.SCREEN_WIDTH,r.height=h.SCREEN_HEIGHT,r.bounds={x:4,y:4,width:r.width-4,height:r.height-4},r.activeAppName=null,r.assets=E.getAssets("os"),r.padding=32,r.iconsPerRow=4,r.bootCounter=0,r.bootWait=0,r.type=h.TYPES.INTERACTIVE;r.handler.getEntityManager();return r.clickMeText=["[Click to initiate booting sequence]"],r.state=r.states.OFF,r}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Gn(t,e)}(e,t),n=e,(i=[{key:"initializeApps",value:function(){this.apps=[this.handler.getEntityManager().addEntity(new Xt(this.handler))]}},{key:"addApp",value:function(t){this.apps.push(t),this.handler.getEntityManager().addEntity(t),this.resetAppPositions()}},{key:"resetAppPositions",value:function(){var t=this.x+this.width/2,e=this.y+this.height/2;if(1===this.apps.length){var n=Hn(this.apps,1)[0];return n.x=t-n.bounds.width/2,void(n.y=e-n.bounds.height)}if(2===this.apps.length){var i=Hn(this.apps,2),r=i[0],o=i[1];return r.x=t-r.bounds.width/2-96,r.y=e-r.bounds.height,o.x=t-o.bounds.width/2+96,void(o.y=e-o.bounds.height)}if(3===this.apps.length){var a=Hn(this.apps,3),s=a[0],u=a[1],h=a[2];return s.x=t-s.bounds.width/2-96,s.y=e-s.bounds.height-96+16,u.x=t-u.bounds.width/2+96,u.y=e-u.bounds.height-96+16,h.x=t-h.bounds.width/2,void(h.y=e-u.bounds.height+32+16)}if(4===this.apps.length){var c=Hn(this.apps,4),l=c[0],f=c[1],d=c[2],y=c[3];return l.x=t-l.bounds.width/2-96,l.y=e-l.bounds.height-96+16,f.x=t-f.bounds.width/2+96,f.y=e-f.bounds.height-96+16,d.x=t-l.bounds.width/2-96,d.y=e-l.bounds.height+96-32,y.x=t-f.bounds.width/2+96,void(y.y=e-f.bounds.height+96-32)}if(5!==this.apps.length&&6!==this.apps.length){if(7===this.apps.length){var p=Hn(this.apps,7),b=p[0],g=p[1],v=p[2],w=p[3],E=p[4],m=p[5],O=p[6];return b.x=t-b.bounds.width/2-96,b.y=e-b.bounds.height-96-32-16,g.x=t-g.bounds.width/2+96,g.y=e-g.bounds.height-96-32-16,v.x=t-b.bounds.width/2-96,v.y=e-b.bounds.height+112-16,w.x=t-g.bounds.width/2+96,w.y=e-g.bounds.height+112-16,E.x=t-E.bounds.width/2+8+8,E.y=e-E.bounds.height+16-8,m.x=t-m.bounds.width/2-124,m.y=e-m.bounds.height+16-8,O.x=t-O.bounds.width/2+160+32,void(O.y=e-O.bounds.height+16-8)}throw new Error("apps length is great then expected (".concat(this.apps.length,") in ComputerScreen.resetAppPositions()"))}}},{key:"tick",value:function(){switch(this.state){case this.states.OFF:break;case this.states.INITIALIZE:this.initializeApps(),this.resetAppPositions(),this.state=this.states.BOOTING;break;case this.states.IDLE:break;case this.states.BOOTING:var t=this.assets.animations[this.states.BOOTING];if(t.index>=9)return this.bootCounter+=1,void(this.bootCounter>=this.bootWait&&(this.bootCounter=0,this.state=this.states.IDLE));t.tick();break;default:throw new Error('Computer Screen animation state "'.concat(this.state," is not accounted for"))}}},{key:"getCurrentAnimationFrame",value:function(){switch(this.state){case this.states.OFF:case this.states.INITIALIZE:case this.states.IDLE:break;case this.states.BOOTING:return this.assets.animations[this.states.BOOTING].getCurrentFrame();default:throw new Error('Computer App animation state "'.concat(this.state," is not accounted for"))}}},{key:"render",value:function(t){switch(t.fillStyle=this.state===this.states.OFF?"black":h.COLORS.PURPLE,t.fillRect(this.x,this.y,this.width,this.height),this.state){case this.states.OFF:t.drawText(this.clickMeText,this.x+120,this.y+200,h.COLORS.CREAM,!1);break;case this.states.INITIALIZE:break;case this.states.IDLE:for(var e=0;e<this.apps.length;e+=1){var n=this.apps[e];t.drawText(n.name,n.x+n.textXOffset,n.y+n.textYOffset,h.COLORS.CREAM,!1),n.render(t)}break;case this.states.BOOTING:this.bootCounter>this.bootWait/4&&(t.globalAlpha-=this.bootCounter/this.bootWait),t.drawSprite(this.getCurrentAnimationFrame(),this.x,this.y,this.width,this.height),t.globalAlpha=1;break;default:throw new Error('Computer App animation state "'.concat(this.state," is not accounted for"))}}},{key:"wasClickedAt",value:function(t,e){this.state===this.states.OFF&&(this.type=h.TYPES.COMPUTER,this.state=this.states.INITIALIZE)}}])&&jn(n.prototype,i),r&&jn(n,r),e}(ct);function Ln(t){return(Ln="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Fn(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Bn(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Wn(t,e){return!e||"object"!==Ln(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Yn(t){return(Yn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Un(t,e){return(Un=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var zn=function(t){function e(t,n){var i,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Fn(this,e),(i=Wn(this,Yn(e).call(this,t,h.DIALOGUE.X,h.DIALOGUE.Y))).x=h.DIALOGUE.X,i.y=h.DIALOGUE.Y,i.width=h.DIALOGUE.WIDTH,i.height=h.DIALOGUE.HEIGHT,i.bounds={x:-i.x,y:-i.y,width:h.GAME_WIDTH,height:h.GAME_HEIGHT},i.fontSize=30,i.textX=i.x+i.fontSize,i.textY=i.y+i.height/2+i.fontSize/3,i.type=h.TYPES.INTERACTIVE,i.dialogue="",i.speechTimer=5,i.wasClicked=!1,i.isRobot=r,i.words=[],i.soundManager=i.handler.getSoundManager(),i.nextCounter=0,i.nextCounterMax=70,i.soundCounter=0,i.soundCounterMax=2,i.addWords(n),i}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Un(t,e)}(e,t),n=e,(i=[{key:"tick",value:function(){if(!this.words.length)return this.handler.getWorld().dialogueFinished(),void this.handler.getEntityManager().removeEntity(this);this.speechTimer>=2&&this.words.length&&(this.words[0].length?(this.soundCounter+=1,this.soundCounter>this.soundCounterMax&&(this.soundManager.speak(this.isRobot),this.soundCounter=0),this.sayNextLetter()):this.wasClicked&&(this.wasClicked=!1,this.readNextSentence())),this.speechTimer<30&&this.speechTimer++}},{key:"render",value:function(t){this.words[0]&&(t.fillStyle="black",t.globalAlpha=.6,t.fillRect(this.x+this.bounds.x,this.y+this.bounds.y,this.bounds.width,this.bounds.height),t.globalAlpha=1,t.fillStyle="white",t.fillRect(this.x,this.y,this.width,this.height),t.drawText(this.dialogue,this.textX,this.textY,"black",!1,this.fontSize),this.words[0].length||(this.nextCounter+=1,this.nextCounter<this.nextCounterMax/2&&t.drawText(">",this.x+this.width-64,this.y+this.height-16,"black",!1,48),this.nextCounter>=this.nextCounterMax&&(this.nextCounter=0)))}},{key:"readNextSentence",value:function(){this.words.splice(0,1),this.clean()}},{key:"clean",value:function(){this.dialogue="",this.sentencePause=0}},{key:"sayNextLetter",value:function(){var t=this.words[0][0];this.dialogue+=t,this.words[0].splice(0,1),this.speechTimer=0}},{key:"addWords",value:function(t){var e=this;t instanceof Array||(t=[t]),t.forEach((function(t){e.words.push(t.split(""))}))}},{key:"clear",value:function(){this.words=[],this.clean()}},{key:"wasClickedAt",value:function(){this.words[0].length||(this.wasClicked=!0)}}])&&Bn(n.prototype,i),r&&Bn(n,r),e}(ct);function Xn(t){return(Xn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Zn(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Vn(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Kn(t,e){return!e||"object"!==Xn(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function qn(t){return(qn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Jn(t,e){return(Jn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Qn=function(t){function e(t,n,i){var r,o,a;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(a=Kn(this,qn(e).call(this,t,n,i))).width=h.RADIO_WIDTH,a.height=h.RADIO_HEIGHT,a.bounds={x:0,y:22,width:a.width,height:a.height-22},a.isRadio=!0,a.type=h.TYPES.INTERACTIVE,a.assets=E.getAssets("radio"),a.bannerAssets=E.getAssets("radioBanner"),a.states={OFF:"off",STATION1:"station-1",STATION2:"station-2",STATION3:"station-3"},a.state=a.states.OFF,a.titles=(Zn(r={},a.states.STATION1,"Dirt"),Zn(r,a.states.STATION2,"Rtten"),Zn(r,a.states.STATION3,"BLUE"),r),a.artists=(Zn(o={},a.states.STATION1,"The Greebles"),Zn(o,a.states.STATION2,"Black Eyeball"),Zn(o,a.states.STATION3,"The Clue-sters"),o),a.bannerCounter=0,a.showBannerMax=360,a.showBanner=!1,a}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Jn(t,e)}(e,t),n=e,(i=[{key:"tick",value:function(){this.showBanner&&(this.bannerCounter+=1,this.bannerCounter>=this.showBannerMax&&(this.showBanner=!1,this.bannerCounter=0))}},{key:"startBanner",value:function(){this.bannerCounter=0,this.showBanner=!0}},{key:"render",value:function(t){var e;switch(this.state){case this.states.OFF:e=this.assets.off;break;case this.states.STATION1:e=this.assets.station1;break;case this.states.STATION2:e=this.assets.station2;break;case this.states.STATION3:e=this.assets.station3}t.drawSprite(e,this.x,this.y,this.width,this.height),this.state!==this.states.OFF&&this.showBanner&&this.drawRadioBanner(t)}},{key:"drawRadioBanner",value:function(t){var e=this.x-36,n=this.y+46;t.drawSprite(this.bannerAssets.img,e,n,225,225),e+=40,n+=106,t.drawText("Now Playing:",e,n,"black",!0,18),n+=22,t.drawText(this.titles[this.state],e,n,"black",!0,18),n+=22,t.drawText(this.artists[this.state],e,n,"black",!0,18)}},{key:"wasClickedAt",value:function(t,e){var n=this.handler.getSoundManager();switch(this.state){case this.states.OFF:this.state=this.states.STATION1,n.play("station1");break;case this.states.STATION1:this.state=this.states.STATION2,n.play("station2");break;case this.states.STATION2:this.state=this.states.STATION3,n.play("station3");break;case this.states.STATION3:this.state=this.states.OFF,n.play("bgm")}this.state!==this.states.OFF&&this.startBanner()}}])&&Vn(n.prototype,i),r&&Vn(n,r),e}(ct);function $n(t){return($n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ti(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function ei(t,e){return!e||"object"!==$n(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ni(t){return(ni=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ii(t,e){return(ii=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var ri=function(t){function e(t,n,i,r,o){var a;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(a=ei(this,ni(e).call(this,t,n,i))).width=h.TELEBUTTON_WIDTH,a.height=h.TELEBUTTON_HEIGHT,a.bounds={x:0,y:0,width:a.width,height:a.height},a.type=h.TYPES.TELEBUTTONS,a.number=r,a.addNumberCallback=o,a}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ii(t,e)}(e,t),n=e,(i=[{key:"tick",value:function(){}},{key:"render",value:function(t){t.drawText(this.number,this.number.toString().length>1?this.x+7:this.x+11,this.y+21,"black",!1,h.BIG_FONT_SIZE-12)}},{key:"wasClickedAt",value:function(t,e){this.handler.getSoundManager().play("dialing"),this.addNumberCallback(this.number)}}])&&ti(n.prototype,i),r&&ti(n,r),e}(ct);function oi(t){return(oi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ai(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function si(t,e){return!e||"object"!==oi(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ui(t){return(ui=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function hi(t,e){return(hi=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var ci=function(t){function e(t,n,i){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=si(this,ui(e).call(this,t,n,i))).width=248,r.height=185,r.assets=E.getAssets("telephone"),r.buttons=[],r.numberSeries="",r.initializeButtons(),r.states={IDLE:"idle",CALLING:"calling",CALLED:"called"},r.state=r.states.IDLE,r.callingCounter=0,r.callingMax=120,r.seriesFlashTimer=0,r}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&hi(t,e)}(e,t),n=e,(i=[{key:"initializeButtons",value:function(){for(var t=[1,2,3,4,5,6,7,8,42],e=68,n=0,i=0;i<9;i+=1){var r=rndInt(0,t.length-1),o=t[r];t.splice(r,1),i>=3&&i<=5&&(n=-4),i>=6&&i<=8&&(n=-8),i%3==0&&0!==i&&(e+=h.TELEBUTTON_HEIGHT);var a=new ri(this.handler,this.x+120+i%3*h.TELEBUTTON_WIDTH+n,this.y+e,o,this.addNumber.bind(this));this.buttons.push(a),this.handler.getEntityManager().addEntity(a)}}},{key:"addNumber",value:function(t){this.state===this.states.IDLE&&(this.numberSeries+=t.toString(),this.numberSeries.length>=7&&(this.handler.getSoundManager().play("phoneRinging"),this.state=this.states.CALLING))}},{key:"endPhoneCall",value:function(){this.numberSeries="",this.state=this.states.IDLE}},{key:"tick",value:function(){switch(this.state){case this.states.IDLE:break;case this.states.CALLING:if(this.callingCounter+=1,this.callingCounter>this.callingMax){if(this.callingCounter=0,this.state=this.states.CALLED,"42424242"===this.numberSeries)return void this.handler.getWorld().addCorrectPhoneDialogue(this.endPhoneCall.bind(this));this.handler.getWorld().addBadPhoneDialogue(this.endPhoneCall.bind(this))}break;default:throw new Error("Telephone tick state not recognized: ".concat(this.state))}}},{key:"render",value:function(t){switch(t.drawSprite(this.assets.img,this.x,this.y,this.width,this.height),this.state){case this.states.CALLING:this.seriesFlashTimer+=1,this.seriesFlashTimer>20&&this.renderNumberSeries(t),this.seriesFlashTimer>39&&(this.seriesFlashTimer=0);break;default:this.renderNumberSeries(t)}this.renderButtons(t)}},{key:"renderNumberSeries",value:function(t){var e=this.numberSeries;this.numberSeries.length>3&&(e="".concat(this.numberSeries.substring(0,3),"-").concat(this.numberSeries.substring(3,this.numberSeries.length))),t.drawText(e,this.x+135,this.y+50,"black",!0,h.BIG_FONT_SIZE-16)}},{key:"renderButtons",value:function(t){for(var e=0;e<this.buttons.length;e+=1)this.buttons[e].render(t)}}])&&ai(n.prototype,i),r&&ai(n,r),e}(ct);function li(t){return(li="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function fi(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function di(t,e){return!e||"object"!==li(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function yi(t){return(yi=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function pi(t,e){return(pi=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var bi=function(t){function e(t,n,i){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=di(this,yi(e).call(this,t,n,i))).width=192,r.height=192,r.bounds={x:0,y:0,width:r.width,height:r.height},r.assets=E.getAssets("wallPaper"),r.states={ONE:"one",TWO:"two",THREE:"three",FOUR:"four",FIVE:"five"},r.state=r.states.ONE,r.type=h.TYPES.INTERACTIVE,r}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&pi(t,e)}(e,t),n=e,(i=[{key:"tick",value:function(){}},{key:"render",value:function(t){t.drawSprite(this.assets[this.state],this.x,this.y,this.width,this.height)}},{key:"wasClickedAt",value:function(){switch(this.state){case this.states.ONE:this.state=this.states.TWO;break;case this.states.TWO:this.state=this.states.THREE;break;case this.states.THREE:this.state=this.states.FOUR;break;case this.states.FOUR:this.state=this.states.FIVE;break;case this.states.FIVE:break;default:throw new Error("WallPaperTear state ".concat(this.state," not recognized in wasClickedAt"))}}}])&&fi(n.prototype,i),r&&fi(n,r),e}(ct);function gi(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var vi=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.handler=e,this.entityManager=e.createEntityManager(),this.assets={background:E.getAssets("background").image},this.spatialGrid=new it(h.GAME_WIDTH,h.GAME_HEIGHT,h.SPATIAL_GRID_SIZE),this.states={INITIALIZE:"initialize",INTRO:"intro",IDLE:"idle",TEST:"test",TEST_INIT:"test-init",GAME_WON:"game-won"},this.state=this.states.INITIALIZE}var e,n,i;return e=t,(n=[{key:"addCorrectPhoneDialogue",value:function(t){this.dialogue=this.entityManager.addEntity(new zn(this.handler,["Hello? HELLO????","Listen keep your voice down... OKAY?!","I'm not supposed to tell you this, but...","The clue is BONK."])),t()}},{key:"addBadPhoneDialogue",value:function(t){this.dialogue=this.entityManager.addEntity(new zn(this.handler,["No answer..."])),t()}},{key:"createDialogue",value:function(t){this.dialogue=this.entityManager.addEntity(new zn(this.handler,t,!0))}},{key:"initDialogue",value:function(){this.dialogue=this.entityManager.addEntity(new zn(this.handler,["Hey, newbie!","Looks like the manager is out sick today...","I bet you can figure this one out on your own, though.","Boot up that computer and check your email!"]))}},{key:"gameWon",value:function(){this.dialogue=this.entityManager.addEntity(new zn(this.handler,["Yo, newbie! You did it!","Looks like the incidents were resolved!","Great Job!","Also, we need you in on Saturday...","And that piano hammer comes out of your check..."])),this.state=this.states.GAME_WON}},{key:"dialogueFinished",value:function(t){switch(this.state){case this.states.INITIALIZE:case this.states.IDLE:break;case this.states.INTRO:this.entityManager.addEntity(new bi(this.handler,832,120)),this.handler.getSoundManager().play("bgm"),this.state=this.states.IDLE;break;case this.states.GAME_WON:this.handler.getEmailManager().addEmail("easterEggs"),this.handler.getEmailManager().addEmail("third"),this.state=this.states.IDLE;break;default:throw new Error('World One dialogue finished state "'.concat(this.state," is not accounted for"))}}},{key:"loadEntities",value:function(){var t=this;[new Dn(this.handler,256,136),new Qn(this.handler,52,62),new ci(this.handler,0,480)].forEach((function(e){t.entityManager.addEntity(e)}))}},{key:"tick",value:function(t){switch(this.state){case this.states.TEST_INIT:this.entityManager.addEntity(new yn(this.handler)),this.state=this.states.IDLE;break;case this.states.TEST:break;case this.states.INITIALIZE:this.initDialogue(),this.state=this.states.INTRO;break;case this.states.GAME_WON:case this.states.INTRO:case this.states.IDLE:break;default:throw new Error('World One animation state "'.concat(this.state," is not accounted for"))}this.entityManager.tick(t)}},{key:"render",value:function(t){switch(this.drawBackground(t),this.state){case this.states.TEST_INIT:case this.states.INITIALIZE:break;case this.states.GAME_WON:case this.states.INTRO:break;case this.states.TEST:case this.states.IDLE:break;default:throw new Error('World One state "'.concat(this.state," is not accounted for"))}this.entityManager.render(t)}},{key:"init",value:function(){this.loadEntities()}},{key:"drawBackground",value:function(t){var e=this.assets.background;t.drawSprite(e)}},{key:"getSpatialGrid",value:function(){return this.spatialGrid}}])&&gi(e.prototype,n),i&&gi(e,i),t}();function wi(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);i=!0);}catch(t){r=!0,o=t}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function Ei(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var mi=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.handler=e}var e,n,i;return e=t,(n=[{key:"unlockApp",value:function(t){var e=wi(this.handler.getEntityManager().getEntitiesByType(h.TYPES.COMPUTER),1)[0];if(!e)throw new Error("entity with type ".concat(h.TYPES.COMPUTER," not found."));if(Array.isArray(t))this.appExistsOnComputer(e,h.APPS.THE_CORE)||e.addApp(new hn(this.handler)),this.appExistsOnComputer(e,h.APPS.ME_MYSELF_I)||e.addApp(new Mn(this.handler)),this.appExistsOnComputer(e,h.APPS.THE_CODERS_GAME)||e.addApp(new kn(this.handler));else switch(t){case h.APPS.FOOTAGE:this.appExistsOnComputer(e,h.APPS.FOOTAGE)||e.addApp(new we(this.handler));break;case h.APPS.CODE_MAN:this.appExistsOnComputer(e,h.APPS.CODE_MAN)||e.addApp(new ze(this.handler));break;default:throw new Error("".concat(t," is not a valid app name to unlock"))}}},{key:"addEmail",value:function(t){var e=this.handler.getEntityManager().findEntityByName(h.APPS.EMAIL);if(!e)throw new Error("App with name ".concat(h.APPS.EMAIL," not found!"));e.addEmail(t)}},{key:"appExistsOnComputer",value:function(t,e){return!!t.apps.find((function(t){return t.name===e}))}}])&&Ei(e.prototype,n),i&&Ei(e,i),t}();function Oi(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var Ti=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.handler=e,this.log={john:{number:1,name:"John Smith",intervened:!1,watchedBestVideo:!1},olivia:{number:2,name:"Olivia Bouqets",intervened:!1,watchedBestVideo:!1},peter:{number:3,name:"Peter Pipers",intervened:!1,watchedBestVideo:!1}}}var e,n,i;return e=t,(n=[{key:"interveneClue",value:function(t){switch(t){case 1:this.log.john.intervened=!0;break;case 2:this.log.olivia.intervened=!0;break;case 3:this.log.peter.intervened=!0;break;default:throw new Error("clue number ".concat(t," not recognized in FootageManager.interveneClue"))}var e=this.handler.getEntityManager().findEntityByName(h.APPS.FOOTAGE);if(!e)throw new Error("Footage ".concat(name," not found in FootageManager.updateIntervened"));e.updateFootage(t)}},{key:"updateWatchedBestVideo",value:function(t){switch(t){case 1:this.log.john.watchedBestVideo=!0;break;case 2:this.log.olivia.watchedBestVideo=!0;break;case 3:this.log.peter.watchedBestVideo=!0;break;default:throw new Error("clue number ".concat(t," not recognized in FootageManager.interveneClue"))}}},{key:"isLogComplete",value:function(){return!!(this.log.john.intervened&&this.log.olivia.watchedBestVideo&&this.log.olivia.intervened&&this.log.peter.watchedBestVideo&&this.log.peter.intervened&&this.log.peter.watchedBestVideo)}}])&&Oi(e.prototype,n),i&&Oi(e,i),t}();function Si(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var ki=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.handler=e,this.sources={bgm:{source:this.getMusic("bgm"),loops:!0},station1:{source:this.getMusic("station1"),loops:!0},station2:{source:this.getMusic("station2"),loops:!0},station3:{source:this.getMusic("station3"),loops:!0},phoneRinging:{source:this.getMusic("phone-ringing"),loops:!1},dialing:{source:this.getMusic("dialing"),loops:!1},speak1:{source:this.getMusic("speak-1"),loops:!1},speak2:{source:this.getMusic("speak-2"),loops:!1},speak3:{source:this.getMusic("speak-3"),loops:!1},roboSpeak1:{source:this.getMusic("robo-speak-1"),loops:!1},roboSpeak2:{source:this.getMusic("robo-speak-2"),loops:!1},roboSpeak3:{source:this.getMusic("robo-speak-3"),loops:!1}}}var n,i,r;return n=t,(i=[{key:"getMusic",value:function(t){return"".concat(h.MUSIC_PATH,"/").concat(t,".mp3")}},{key:"stop",value:function(){for(var t=document.getElementsByTagName("audio"),n=0,i=t.length;n<i;n++)t[n]!=e.target&&t[n].pause()}},{key:"stopSound",value:function(t){this.stop(),t.pause(),t.currentTime=0,t.src=""}},{key:"initSound",value:function(t,e){var n=new Audio(t.source);return n.loop=t.loops,n.volume=e,n}},{key:"speak",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];t?this.play("roboSpeak"+rndInt(1,3),.35):this.play("speak"+rndInt(1,3),.2)}},{key:"play",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.8;if(this.stop(),"bgm"!==t){var n=this.sources[t];if(n)try{this.lastSoundPlayed&&n.loops&&this.stopSound(this.lastSoundPlayed);var i=this.initSound(n,e);return i.play(),this.lastSoundPlayed=i,i}catch(t){throw new Error(t)}throw new Error('Sound with name "'.concat(t,'" not found.'))}}}])&&Si(n.prototype,i),r&&Si(n,r),t}();function Ii(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);i=!0);}catch(t){r=!0,o=t}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function _i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var Ai=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.handler=e}var e,n,i;return e=t,(n=[{key:"showSetting",value:function(t){var e=this.handler.getEntityManager().findEntityByName(h.APPS.SETTINGS);return e||(e=new Le(this.handler),Ii(this.handler.getEntityManager().getEntitiesByType(h.TYPES.COMPUTER),1)[0].addApp(e)),e.showSetting(t)}}])&&_i(e.prototype,n),i&&_i(e,i),t}();function Pi(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var Ci=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.game=e,this.entityManager=null,this.graphicsManager=null,this.monsterManager=null,this.mouseManager=null,this.seedManager=null,this.stateManager=null,this.uiManager=null,this.world=null}var e,n,i;return e=t,(n=[{key:"getEmailManager",value:function(){return this.emailManager}},{key:"getFootageManager",value:function(){return this.footageManager}},{key:"getEntityManager",value:function(){return this.entityManager}},{key:"getGame",value:function(){return this.game}},{key:"getGraphicsManager",value:function(){return this.graphicsManager}},{key:"getMouseManager",value:function(){return this.mouseManager}},{key:"getSettingsManager",value:function(){return this.settingsManager}},{key:"getSoundManager",value:function(){return this.soundManager}},{key:"getWorld",value:function(){return this.world}},{key:"createEntityManager",value:function(){return this.entityManager=new $(this)}},{key:"createEmailManager",value:function(){return this.emailManager=new mi(this)}},{key:"createFootageManager",value:function(){return this.footageManager=new Ti(this)}},{key:"createGraphicsManager",value:function(){return this.graphicsManager=new l}},{key:"createMouseManager",value:function(){return this.mouseManager=new s(this)}},{key:"createSettingsManager",value:function(){return this.settingsManager=new Ai(this)}},{key:"createSoundManager",value:function(){return this.soundManager=new ki(this)}},{key:"createStateManager",value:function(){return this.stateManager=new et}},{key:"setWorld",value:function(t){return this.world=t}},{key:"updateWorld",value:function(t){this.setWorld(t);var e=new o(this,t);this.stateManager.setState(e)}},{key:"event",value:function(t,e){"click"===t&&this.entityManager.mouseClick(e),"move"===t&&this.entityManager.mouseMove(e)}}])&&Pi(e.prototype,n),i&&Pi(e,i),t}();function Mi(t){return(Mi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function xi(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Hi(t,e){return!e||"object"!==Mi(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ji(t){return(ji=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ni(t,e){return(Ni=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Ri=function(t){function e(t,n,i){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=Hi(this,ji(e).call(this,t,n,i))).width=h.GAME_WIDTH,r.height=h.GAME_HEIGHT,r.bounds={x:0,y:0,width:r.width,height:r.height},r.type=h.TYPES.INTERACTIVE,r}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ni(t,e)}(e,t),n=e,(i=[{key:"tick",value:function(){}},{key:"render",value:function(t){var e=100;["ACME Time Fixers","","Credits:","Matthew McCord: Programming, Sound, Game Design, Art","Addison Craik: Art, Programming","Keith Davis: Narrative, Game Design","","Click Here to Begin."].forEach((function(n){t.drawText(n,100,e,h.COLORS.CREAM,!0,h.BIG_FONT_SIZE),e+=64}))}},{key:"wasClickedAt",value:function(){var t=new vi(this.handler);this.handler.updateWorld(t),t.init()}}])&&xi(n.prototype,i),r&&xi(n,r),e}(ct);function Gi(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var Di=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.handler=e,this.entityManager=e.createEntityManager(),this.spatialGrid=new it(h.GAME_WIDTH,h.GAME_HEIGHT,h.SPATIAL_GRID_SIZE),this.states={INITIALIZE:"initialize"},this.state=this.states.INITIALIZE}var e,n,i;return e=t,(n=[{key:"tick",value:function(t){this.entityManager.tick(t)}},{key:"render",value:function(t){this.entityManager.render(t)}},{key:"init",value:function(){this.entityManager.addEntity(new Ri(this.handler,0,0))}},{key:"getSpatialGrid",value:function(){return this.spatialGrid}}])&&Gi(e.prototype,n),i&&Gi(e,i),t}();function Li(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var Fi=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,i;return e=t,(n=[{key:"initialize",value:function(){this.managerHandler=new Ci(this),this.graphicsManager=this.managerHandler.createGraphicsManager(),this.stateManager=this.managerHandler.createStateManager(),this.mouseManager=this.managerHandler.createMouseManager(),this.managerHandler.createEmailManager(),this.managerHandler.createFootageManager(),this.managerHandler.createSoundManager(),this.managerHandler.createSettingsManager();var t=new Di(this.managerHandler);this.managerHandler.setWorld(t),t.init();var e=new o(this.managerHandler,t);this.stateManager.setState(e)}},{key:"run",value:function(){var t=this;this.initialize();var e=1e3/h.FPS,n=0,i=a/1e3,r=Date.now(),o=r,a=0;!function s(){r=Date.now(),n=r-o,o=r,(a+=n)>=e&&(i=a/1e3,t.tick(i),t.render(t.graphicsManager.getGraphics()),a=0),window.requestAnimationFrame(s)}()}},{key:"tick",value:function(t){this.stateManager.getState().tick(t)}},{key:"render",value:function(t){t.clearRect(0,0,h.GAME_WIDTH,h.GAME_HEIGHT),this.stateManager.getState().render(t)}}])&&Li(e.prototype,n),i&&Li(e,i),t}();document.title="Gamedev.js 2020",window.rndIndex=function(t){return t[Math.floor(Math.random()*t.length)]},window.rndInt=function(t,e){return Math.floor(Math.random()*(e-t+1))+t},(new Fi).run()}]);