!function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(i,r,function(e){return t[e]}.bind(null,r));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=1)}([function(t){t.exports={a:{sender:"MGMT",subject:"Re: John Smith",text:["Regarding John:","","There has been an incident with John Smith.","","I've given you access to the Footage app.","Please review the footage of John.","We need him alive...","","Thanks,","MGMT"]}}},function(t,e,n){"use strict";function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}n.r(e);var r=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.managerHandler=e,this.world=n}var e,n,r;return e=t,(n=[{key:"tick",value:function(t){this.world.tick(t)}},{key:"render",value:function(t){this.world.render(t)}},{key:"getManagerHandler",value:function(){return this.managerHandler}},{key:"getWorld",value:function(){return this.world}},{key:"setWorld",value:function(t){this.world=t}}])&&i(e.prototype,n),r&&i(e,r),t}();function o(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var a=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.managerHandler=e,this.initializeEvents()}var e,n,i;return e=t,(n=[{key:"getMouseXFromEvent",value:function(t){return t.offsetX}},{key:"getMouseYFromEvent",value:function(t){return t.offsetY}},{key:"initializeEvents",value:function(){var t=this,e=this.managerHandler.getGraphicsManager().getCanvas();e.onclick=function(e){var n=t.getMouseXFromEvent(e),i=t.getMouseYFromEvent(e);t.managerHandler.event("click",{x:n,y:i})},e.onmousemove=function(e){var n=t.getMouseXFromEvent(e),i=t.getMouseYFromEvent(e);t.managerHandler.event("move",{x:n,y:i})}}}])&&o(e.prototype,n),i&&o(e,i),t}(),s=window.location.href,h={BIG_FONT_SIZE:32,FONT_SIZE:18,EMAIL_ITEM_SIZE:16,APP_NAME_SIZE:16,APPS:{FOOTAGE:"Footage",EMAIL:"Email",SETTINGS:"Settings"},COLORS:{PURPLE:"#7B538F",LIGHT_PURPLE:"#BD7FDB",DARK_PURPLE:"#4F355C",CREAM:"#FCEDC3",RED:"#FF2F4C",LIGHT_RED:"#FF7A8C",DARK_RED:"#803D46"},FPS:60,DIALOGUE:{X:64,Y:448,WIDTH:896,HEIGHT:256/1.5},TELEBUTTON_WIDTH:35,TELEBUTTON_HEIGHT:28,SCREEN_WIDTH:512,SCREEN_HEIGHT:384,GAME_WIDTH:1024,GAME_HEIGHT:768,ICON_HEIGHT:64,ICON_WIDTH:64,SPATIAL_GRID_SIZE:64,RADIO_WIDTH:133,RADIO_HEIGHT:74,TYPES:{TELEBUTTONS:"tele-buttons",EMAIL_ITEMS:"email-items",EMAIL_INBOX_ITEMS:"email-inbox-items",FOOTAGE_ITEMS:"footage-items",FOOTAGE_LIBRARY_ITEMS:"footage-library-items",SETTINGS_ITEMS:"settings-items",SETTINGS_WINDOW_ITEMS:"settings-window-items",INTERACTIVE:"interactive",COMPUTER:"computer",COMPUTER_APP:"computer-app"},FINGER_WIDTH:16,BASE_PATH:s=s.replace(/index.html/,""),ASSETS_PATH:"".concat(s,"src/resources"),MUSIC_PATH:"".concat(s,"src/music")};function u(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var c=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.customizeContext(),this.initializeCanvas(),this.initializeGraphics()}var e,n,i;return e=t,(n=[{key:"customizeContext",value:function(){var t=this;CanvasRenderingContext2D.prototype.drawSprite=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0;r||(r=e.width),o||(o=e.height),t.graphics.drawImage(e.sheet,e.x,e.y,e.width,e.height,n,i,r,o)},CanvasRenderingContext2D.prototype.drawText=function(e,n,i){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:h.COLORS.CREAM,o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:h.FONT_SIZE;t.graphics.font="".concat(a,"px Arial"),o&&(t.graphics.fillStyle="black"===r,t.graphics.fillText(e,n-1,i+1)),t.graphics.fillStyle=r,t.graphics.fillText(e,n,i)}}},{key:"initializeCanvas",value:function(){this.canvas=document.querySelector("#canvas"),this.canvas.setAttribute("width",h.GAME_WIDTH),this.canvas.setAttribute("height",h.GAME_HEIGHT)}},{key:"initializeGraphics",value:function(){this.graphics=this.canvas.getContext("2d"),this.graphics.imageSmoothingEnabled=!1,this.graphics.webkitImageSmoothingEnabled=!1}},{key:"getCanvas",value:function(){return this.canvas}},{key:"getGraphics",value:function(){return this.graphics}}])&&u(e.prototype,n),i&&u(e,i),t}();function l(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var f=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.frames=e,this.index=0,this.lastTime=Date.now(),this.timer=0,this.speed=this.frames[this.index].speed}var e,n,i;return e=t,(n=[{key:"tick",value:function(){if(this.timer+=Date.now()-this.lastTime,this.lastTime=Date.now(),!this.speed)throw new Error("SPEED NOT DEFINED FOR",this);this.timer>=this.speed&&(this.index+=1,this.timer=0,this.index>=this.frames.length&&(this.index=0))}},{key:"getCurrentFrame",value:function(){return this.frames[this.index].frame}}])&&l(e.prototype,n),i&&l(e,i),t}();function d(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var y=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,i;return e=t,i=[{key:"loadImage",value:function(t){var e=new Image;return e.src=t,e}}],(n=null)&&d(e.prototype,n),i&&d(e,i),t}();function p(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var b=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.sheet=e}var e,n,i;return e=t,(n=[{key:"crop",value:function(t,e,n,i){return{sheet:this.sheet,x:t,y:e,width:n,height:i}}}])&&p(e.prototype,n),i&&p(e,i),t}();function g(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var v={},w=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),v[e]=this,this.name=e,this.path="".concat(h.ASSETS_PATH,"/").concat(n),this.sheet=new b(y.loadImage(this.path)),this.animations={}}var e,n,i;return e=t,i=[{key:"getAssets",value:function(t){return v[t]}}],(n=[{key:"addAnimation",value:function(t,e){this.animations[t]=e}}])&&g(e.prototype,n),i&&g(e,i),t}(),E=function(t,e,n){n.frames=[];for(var i=n.col;i<n.length+n.col;i+=1)n.frames.push({frame:t.sheet.crop(n.width*i,n.height*n.row,n.width,n.height),speed:n.speed});t.addAnimation(e,new f(n.frames))},m=new w("cursor","cursor.png");m.pointer=m.sheet.crop(0,0,49,56);var T=new w("cursor2","cursor2.png");T.pointer=T.sheet.crop(0,0,32,32);var O=new w("whiteCursor","white-cursor.png");O.pointer=O.sheet.crop(0,0,32,32);var I=new w("hand","hand.png");I.pointer=I.sheet.crop(0,0,64,64);var S=new w("hand2","hand2.png");S.pointer=S.sheet.crop(0,0,32,32);var k=new w("background","gameJamBg.png");k.image=k.sheet.crop(0,0,h.GAME_WIDTH,h.GAME_HEIGHT);var _=new w("email","email.png");_.icon=_.sheet.crop(0,0,h.ICON_WIDTH,h.ICON_HEIGHT),E(_,"loading",{speed:120,row:0,col:0,length:10,width:h.ICON_WIDTH,height:h.ICON_HEIGHT});var A=new w("footage","footage.png");A.icon=A.sheet.crop(0,0,h.ICON_WIDTH,h.ICON_HEIGHT),E(A,"loading",{speed:1,row:0,col:0,length:64,width:h.ICON_WIDTH,height:h.ICON_HEIGHT});var P=new w("bigFootage","big-footage.png");P.playButton=P.sheet.crop(0,0,h.SCREEN_WIDTH,h.SCREEN_HEIGHT),E(new w("johnDies","john-dies.png"),"playing",{speed:100,row:0,col:0,length:18,width:h.SCREEN_WIDTH,height:h.SCREEN_HEIGHT}),E(new w("johnLives","john-lives.png"),"playing",{speed:100,row:0,col:0,length:18,width:h.SCREEN_WIDTH,height:h.SCREEN_HEIGHT}),E(new w("os","jam-os-bootup.png"),"booting",{speed:300,row:0,col:0,length:10,width:h.SCREEN_WIDTH,height:h.SCREEN_HEIGHT});var C=new w("inbox","inbox-bg.png");C.bg=C.sheet.crop(0,0,768,672);var x=new w("footageLibrary","footage-library-bg.png");x.bg=x.sheet.crop(0,0,768,672);var M=new w("radio","radio.png");M.off=M.sheet.crop(0,0,h.RADIO_WIDTH,h.RADIO_HEIGHT),M.station1=M.sheet.crop(h.RADIO_WIDTH,0,h.RADIO_WIDTH,h.RADIO_HEIGHT),M.station2=M.sheet.crop(2*h.RADIO_WIDTH,0,h.RADIO_WIDTH,h.RADIO_HEIGHT),M.station3=M.sheet.crop(3*h.RADIO_WIDTH,0,h.RADIO_WIDTH,h.RADIO_HEIGHT);var H=new w("radioBanner","radio-banner.png");H.img=H.sheet.crop(0,0,225,225);var j=new w("telephone","telephone.png");j.img=j.sheet.crop(0,0,248,185);var N=new w("wallPaper","wall-paper-tear.png");N.one=N.sheet.crop(0,0,192,192),N.two=N.sheet.crop(192,0,192,192),N.three=N.sheet.crop(384,0,192,192),N.four=N.sheet.crop(576,0,192,192),N.five=N.sheet.crop(768,0,192,192);var G=new w("settings","settings-cog.png");G.icon=G.sheet.crop(0,0,64,64),E(G,"loading",{speed:120,row:0,col:0,length:8,width:h.ICON_WIDTH,height:h.ICON_HEIGHT});var R=new w("settingsWindow","settings-window.png");R.bg=R.sheet.crop(0,0,416,278);var L=new w("settingsCheck","settings-checkbox.png");function D(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}L.box=L.sheet.crop(0,0,45,45),L.check=L.sheet.crop(45,0,45,45);var F=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.x=null,this.y=null,this.handBounds={x:4,y:4,width:24,height:24},this.arrowBounds={x:4,y:0,width:6,height:6},this.assets={hand:w.getAssets("hand2").pointer,arrow:w.getAssets("cursor2").pointer},this.swapToComputer()}var e,n,i;return e=t,(n=[{key:"render",value:function(t){var e=this.cursor===this.assets.hand,n=e?16:0,i=e?64:32;t.drawSprite(this.cursor,this.x-n,this.y-n,i,i)}},{key:"swapToComputer",value:function(){this.cursor=this.assets.arrow,this.bounds=this.arrowBounds}},{key:"swapToHand",value:function(){this.cursor=this.assets.hand,this.bounds=this.handBounds}}])&&D(e.prototype,n),i&&D(e,i),t}();function B(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var W=function(){function t(e,n,i,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.x=e,this.y=n,this.width=i,this.height=r}var e,n,i;return e=t,(n=[{key:"intersects",value:function(t){return this.x<t.x+t.width&&this.x+this.width>t.x&&this.y<t.y+t.height&&this.y+this.height>t.y}}])&&B(e.prototype,n),i&&B(e,i),t}();function Y(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function z(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var U=[h.TYPES.INTERACTIVE,h.TYPES.TELEBUTTONS,h.TYPES.COMPUTER_APP,h.TYPES.EMAIL_ITEMS,h.TYPES.EMAIL_INBOX_ITEMS,h.TYPES.FOOTAGE_ITEMS,h.TYPES.FOOTAGE_LIBRARY_ITEMS,h.TYPES.SETTINGS_ITEMS,h.TYPES.SETTINGS_WINDOW_ITEMS],X=[h.TYPES.TELEBUTTONS,h.TYPES.COMPUTER_APP,h.TYPES.EMAIL_INBOX_ITEMS,h.TYPES.FOOTAGE_LIBRARY_ITEMS,h.TYPES.SETTINGS_WINDOW_ITEMS],Z=(h.TYPES.COMPUTER,h.TYPES.COMPUTER_APP,h.TYPES.EMAIL_ITEMS,h.TYPES.EMAIL_INBOX_ITEMS,h.TYPES.FOOTAGE_ITEMS,h.TYPES.FOOTAGE_LIBRARY_ITEMS,h.TYPES.SETTINGS_ITEMS,h.TYPES.SETTINGS_WINDOW_ITEMS,1),V=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.handler=e,this.lastEntityHovered=null,this.cursor=new F,this.entities=[]}var e,n,i;return e=t,(n=[{key:"tick",value:function(t){for(var e=0;e<this.entities.length;e+=1)this.entities[e].tick(t)}},{key:"render",value:function(t){for(var e=0;e<this.entities.length;e+=1){var n=this.entities[e];X.includes(n.type)||this.entities[e].render(t)}this.cursor.x&&this.cursor.y&&this.cursor.render(t)}},{key:"addEntity",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t.id=Z,Z+=1,e?this.entities.unshift(t):this.entities.push(t);var n=new W(t.x+t.bounds.x,t.y+t.bounds.y,t.bounds.width,t.bounds.height);return this.handler.getWorld().getSpatialGrid().insert(n,t),t}},{key:"findEntityByName",value:function(t){return this.entities.find((function(e){return e.name===t}))}},{key:"removeEntity",value:function(t){var e=this.entities.indexOf(t);this.handler.getWorld().getSpatialGrid().remove(new W(t.x+t.bounds.x,t.y+t.bounds.y,t.bounds.width,t.bounds.height),t),this.entities.splice(e,1),t=void 0}},{key:"findClickableEntityAt",value:function(t,e){var n=new W(this.cursor.x+this.cursor.bounds.x,this.cursor.y+this.cursor.bounds.y,this.cursor.bounds.width,this.cursor.bounds.height);return Y(this.entities).reverse().find((function(t){if(!t.bounds)throw new Error("entity type ".concat(t.type," has no bounds"));var e=new W(t.x+t.bounds.x,t.y+t.bounds.y,t.bounds.width,t.bounds.height);return n.intersects(e)&&U.includes(t.type)}))}},{key:"mouseClick",value:function(t){var e=t.x,n=t.y,i=this.findClickableEntityAt(e,n);i&&i.wasClickedAt&&i.wasClickedAt(e,n)}},{key:"mouseMove",value:function(t){var e=t.x,n=t.y;this.cursor.x=e,this.cursor.y=n;var i=this.findClickableEntityAt(e,n);i?i&&this.lastEntityHovered&&i.id===this.lastEntityHovered.id||(this.lastEntityHovered&&this.lastEntityHovered.wasBlurred&&this.lastEntityHovered.wasBlurred(),i.wasHoveredAt&&i.wasHoveredAt(e,n),this.lastEntityHovered=i):this.lastEntityHovered&&this.lastEntityHovered.wasBlurred&&(this.lastEntityHovered.wasBlurred(),this.lastEntityHovered=null)}},{key:"getEntitiesByType",value:function(t){return this.entities.filter((function(e){return e.type==t}))}}])&&z(e.prototype,n),i&&z(e,i),t}();function J(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var q=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,i;return e=t,(n=[{key:"construct",value:function(){this.currentState=null}},{key:"getState",value:function(){return this.currentState}},{key:"setState",value:function(t){this.currentState=t}}])&&J(e.prototype,n),i&&J(e,i),t}();function K(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var Q=function(){function t(e,n,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.width=parseInt(e/i),this.height=parseInt(n/i),this.size=i,this.grid=[];for(var r=0;r<=this.width;r++){this.grid[r]=[];for(var o=0;o<=this.height;o++)this.grid[r][o]=[]}}var e,n,i;return e=t,(n=[{key:"insert",value:function(t,e){for(var n=Math.max(0,parseInt(t.x/this.size)),i=Math.max(0,parseInt(t.y/this.size)),r=Math.min(this.width,parseInt((t.x+t.width)/this.size)),o=Math.min(this.height,parseInt((t.y+t.height)/this.size)),a=i;a<=o;a++)for(var s=n;s<=r;s++)-1===this.grid[s][a].indexOf(e)&&this.grid[s][a].push(e)}},{key:"retrieve",value:function(t,e){for(var n=Math.max(0,parseInt(t.x/this.size)),i=Math.max(0,parseInt(t.y/this.size)),r=Math.min(this.width,parseInt((t.x+t.width)/this.size)),o=Math.min(this.height,parseInt((t.y+t.height)/this.size)),a=[],s=i;s<=o;s++)for(var h=n;h<=r;h++)this.grid[h][s].forEach((function(t){t!==e&&-1===a.indexOf(t)&&a.push(t)}));return a}},{key:"remove",value:function(t,e){for(var n=Math.max(0,parseInt(t.x/this.size)),i=Math.max(0,parseInt(t.y/this.size)),r=Math.min(this.width,parseInt((t.x+t.width)/this.size)),o=Math.min(this.height,parseInt((t.y+t.height)/this.size)),a=i;a<=o;a++)for(var s=n;s<=r;s++)for(var h=0;h<this.grid[s][a].length;h++)this.grid[s][a][h]===e&&this.grid[s][a].splice(h,1)}},{key:"reset",value:function(){for(var t=0;t<=this.width;t++){this.grid[t]=[];for(var e=0;e<=this.height;e++)this.grid[t][e]=[]}}},{key:"getWidth",value:function(){return this.width}},{key:"getHeight",value:function(){return this.height}},{key:"getSize",value:function(){return this.size}},{key:"render",value:function(t){for(var e=0;e<=this.height;e++)for(var n=0;n<=this.width;n++){var i=n*this.size,r=e*this.size;t.fillStyle="orange",t.strokeRect(i,r,this.size,this.size),this.grid[n][e].length>0&&(t.fillStyle="yellow",t.fillRect(i,r,this.size,this.size))}}}])&&K(e.prototype,n),i&&K(e,i),t}();function $(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var tt=[h.TYPES.GARDEN,h.TYPES.PLOT,h.TYPES.LANE];function et(t){return(et="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function nt(t,e){return!e||"object"!==et(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function it(t){return(it=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function rt(t,e){return(rt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var ot=function(t){function e(t,n,i){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=nt(this,it(e).call(this,t,n,i))).handler=t,r.bounds={x:0,y:0,width:0,height:0},r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&rt(t,e)}(e,t),e}(function(){function t(e,n,i,r,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.handler=e,this.x=n,this.y=i,this.bounds=new W(0,0,this.width,this.height)}var e,n,i;return e=t,(n=[{key:"tick",value:function(){throw new Error("".concat(this.constructor.name," did not implement tick() method"))}},{key:"getCollisionBounds",value:function(t,e){var n=parseInt(this.x+this.bounds.x+t,10),i=parseInt(this.y+this.bounds.y+e);return new W(n,i,this.bounds.width,this.bounds.height)}},{key:"checkEntityCollisions",value:function(t,e){var n=this.handler.getWorld().getSpatialGrid().retrieve(new W(this.x+this.bounds.x,this.y+this.bounds.y,this.bounds.width,this.bounds.height),this);n=n.filter((function(t){return!tt.includes(t.type)}));for(var i=0;i<n.length;i++)if(n[i].getCollisionBounds(0,0).intersects(this.getCollisionBounds(t,e)))return!0;return!1}},{key:"drawCollisionBounds",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"blue";t.fillStyle=e,t.fillRect(this.x+this.bounds.x,this.y+this.bounds.y,this.bounds.width,this.bounds.height)}},{key:"destroySelf",value:function(){this.handler.getEntityManager().removeEntity(this)}}])&&$(e.prototype,n),i&&$(e,i),t}());function at(t){return(at="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function st(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ht(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function ut(t,e){return!e||"object"!==at(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ct(t){return(ct=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function lt(t,e){return(lt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var ft=function(t){function e(t,n){var i,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return st(this,e),(i=ut(this,ct(e).call(this,t,r,o))).handler=t,i.name=n,i.nameWidth=t.getGraphicsManager().getGraphics().measureText(i.name).width,i.x=r,i.y=o,i.width=h.ICON_WIDTH,i.height=h.ICON_HEIGHT,i.type=h.TYPES.COMPUTER_APP,i.yPadding=22,i.hovered=!1,i.state="idle",i}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&lt(t,e)}(e,t),n=e,(i=[{key:"tick",value:function(){switch(this.state){case"idle":break;case"loading":var t=this.assets.animations.loading;if(t.index>=t.frames.length-1)return this.appLoaded(),t.index=0,void(this.state="inactive");t.tick();break;case"inactive":break;default:throw new Error('Computer App animation state "'.concat(this.state," is not accounted for"))}}},{key:"getCurrentAnimationFrame",value:function(){switch(this.state){case"idle":break;case"loading":return this.assets.animations.loading.getCurrentFrame();case"inactive":break;default:throw new Error('Computer App animation state "'.concat(this.state," is not accounted for"))}}},{key:"render",value:function(t){switch(this.state){case"idle":t.drawSprite(this.assets.icon,this.x,this.y,this.width,this.height),this.hovered&&(t.globalAlpha=.4,t.fillStyle="black",t.fillRect(this.x+this.bounds.x-6,this.y+this.bounds.y-6,this.bounds.width+12,this.bounds.height+12+h.FONT_SIZE+2),t.globalAlpha=1);break;case"loading":t.drawSprite(this.getCurrentAnimationFrame(),this.x,this.y,this.width,this.height);break;case"inactive":break;default:throw new Error('Computer App state "'.concat(this.state," is not accounted for"))}}},{key:"wasClickedAt",value:function(t,e){switch(this.hovered=!1,this.state){case"idle":this.state="loading";break;case"loading":case"inactive":break;default:throw new Error('Computer App state "'.concat(this.state," is not accounted for during mouseclicked"))}}},{key:"wasHoveredAt",value:function(t,e){"inactive"!==this.state&&"loading"!==this.state&&(this.hovered=!0)}},{key:"wasBlurred",value:function(){"inactive"!==this.state&&"loading"!==this.state&&(this.hovered=!1)}}])&&ht(n.prototype,i),r&&ht(n,r),e}(ot);function dt(t){return(dt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function yt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function pt(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function bt(t,e){return!e||"object"!==dt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function gt(t){return(gt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function vt(t,e){return(vt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var wt=function(t){function e(t,n){var i,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3?arguments[3]:void 0;return yt(this,e),(i=bt(this,gt(e).call(this,t,0,0))).x=0,i.y=0,i.bounds={x:0,y:0,width:h.GAME_WIDTH,height:h.GAME_HEIGHT},i.type=h.TYPES.INTERACTIVE,i.textArray=n.text,i.isRead=r,i.sender=n.sender,i.subject=n.subject,o&&(i.unlocksOnOpen=o),i}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&vt(t,e)}(e,t),n=e,(i=[{key:"tick",value:function(){}},{key:"drawFadedBackground",value:function(t){var e=this.bounds,n=e.x,i=e.y,r=e.width,o=e.height;t.globalAlpha=.4,t.fillStyle="black",t.fillRect(n,i,r,o),t.globalAlpha=1}},{key:"render",value:function(t){this.drawFadedBackground(t),this.drawPaperAndText(t)}},{key:"drawPaperAndText",value:function(t){var e=h.GAME_WIDTH/8,n=h.GAME_HEIGHT/16,i=h.GAME_WIDTH-2*e,r=h.GAME_HEIGHT-2*n;t.fillStyle="white",t.fillRect(e,n,i,r);for(var o=e+64,a=n+64,s=0;s<this.textArray.length;s+=1)t.drawText(this.textArray[s],o,a,"black",!1,h.BIG_FONT_SIZE),a+=h.BIG_FONT_SIZE+16}},{key:"wasClickedAt",value:function(){this.setHiddenCallback(!1),this.handler.getEntityManager().removeEntity(this)}}])&&pt(n.prototype,i),r&&pt(n,r),e}(ot),Et=n(0);function mt(t){return(mt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Tt(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Ot(t,e){return!e||"object"!==mt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function It(t){return(It=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function St(t,e){return(St=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var kt=function(t){function e(t,n,i,r,o,a,s,u,c){var l;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(l=Ot(this,It(e).call(this,t,n,i))).width=r,l.height=o,l.email=a,l.bgColor=s,l.highlightColor=u,l.hovered=!1,l.bounds={x:-16,y:-26,width:l.width,height:l.height},l.type=h.TYPES.EMAIL_INBOX_ITEMS,l.setHiddenCallback=c,l.hidden=!1,l}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&St(t,e)}(e,t),n=e,(i=[{key:"tick",value:function(){}},{key:"render",value:function(t){if(!this.hidden){var e=this.x,n=this.y,i=this.width,r=this.height;t.fillStyle=this.hovered?this.highlightColor:this.bgColor,t.fillRect(e-16,n-26,i,r),t.fillStyle="black",t.drawText(this.email.sender,this.x,this.y-4,"white",!1,h.EMAIL_ITEM_SIZE),t.drawText(this.email.subject,this.x+224,this.y-4,"white",!1,h.EMAIL_ITEM_SIZE)}}},{key:"wasHoveredAt",value:function(t,e){this.hovered=!0}},{key:"wasBlurred",value:function(){this.hovered=!1}},{key:"wasClickedAt",value:function(){this.setHiddenCallback(!0),this.email.isRead=!0,this.email.setHiddenCallback=this.setHiddenCallback,this.handler.getEntityManager().addEntity(this.email),this.email.unlocksOnOpen&&this.handler.getEmailManager().unlockApp(this.email.unlocksOnOpen)}}])&&Tt(n.prototype,i),r&&Tt(n,r),e}(ot);function _t(t){return(_t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function At(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Pt(t,e){return!e||"object"!==_t(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ct(t){return(Ct=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function xt(t,e){return(xt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Mt=function(t){function e(t,n,i){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=Pt(this,Ct(e).call(this,t,0,0))).x=0,r.y=0,r.paddingX=h.GAME_WIDTH/8,r.paddingY=h.GAME_HEIGHT/16,r.width=h.GAME_WIDTH-2*r.paddingX,r.height=h.GAME_HEIGHT-2*r.paddingY,r.setActiveCallback=i,r.bounds={x:850,y:52,width:34,height:30},r.type=h.TYPES.EMAIL_ITEMS,r.hidden=!1,r.emails=n,r.assets=w.getAssets("inbox"),r.emailItems=[],r.initializeEmailItems(),r}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&xt(t,e)}(e,t),n=e,(i=[{key:"tick",value:function(){}},{key:"initializeEmailItems",value:function(){for(var t=this.paddingX+16+4,e=this.paddingY+118,n=0;n<this.emails.length;n+=1){var i=this.emails[n],r=n%2?h.COLORS.RED:h.COLORS.PURPLE,o=n%2?h.COLORS.LIGHT_RED:h.COLORS.LIGHT_PURPLE,a=new kt(this.handler,t,e,this.width-8,34,i,r,o,this.setHidden.bind(this));this.handler.getEntityManager().addEntity(a),this.emailItems.push(a),e+=36}}},{key:"drawFadedBackground",value:function(t){t.globalAlpha=.4,t.fillStyle="black",t.fillRect(0,0,h.GAME_WIDTH,h.GAME_HEIGHT),t.globalAlpha=1}},{key:"render",value:function(t){this.hidden||(this.drawFadedBackground(t),this.drawInbox(t),this.drawEmailItems(t))}},{key:"setHidden",value:function(t){this.hidden=t;for(var e=0;e<this.emailItems.length;e+=1)this.emailItems[e].hidden=t}},{key:"drawEmailItems",value:function(t){for(var e=0;e<this.emailItems.length;e+=1)this.emailItems[e].render(t)}},{key:"drawInbox",value:function(t){t.drawSprite(this.assets.bg,this.paddingX,this.paddingY,this.width,this.height)}},{key:"wasClickedAt",value:function(){for(var t=this.handler.getEntityManager(),e=0;e<this.emailItems.length;e+=1)t.removeEntity(this.emailItems[e]);t.removeEntity(this),this.setActiveCallback()}}])&&At(n.prototype,i),r&&At(n,r),e}(ot);function Ht(t){return(Ht="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function jt(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Nt(t,e){return!e||"object"!==Ht(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Gt(t){return(Gt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Rt(t,e){return(Rt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Lt=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Nt(this,Gt(e).call(this,t,h.APPS.EMAIL))).bounds={x:0,y:26,width:n.width,height:36},n.textXOffset=10,n.textYOffset=n.height+18,n.assets=w.getAssets("email"),n.emails=[new wt(n.handler,Et.a,!1,h.APPS.FOOTAGE)],n}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Rt(t,e)}(e,t),n=e,(i=[{key:"setActive",value:function(){this.state="idle"}},{key:"appLoaded",value:function(){this.handler.getEntityManager().addEntity(new Mt(this.handler,this.emails,this.setActive.bind(this)))}}])&&jt(n.prototype,i),r&&jt(n,r),e}(ft);function Dt(t){return(Dt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ft(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Bt(t,e){return!e||"object"!==Dt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Wt(t){return(Wt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Yt(t,e){return(Yt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var zt=function(t){function e(t,n,i,r,o,a,s,u,c){var l;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(l=Bt(this,Wt(e).call(this,t,n,i))).width=r,l.height=o,l.video=a,l.bgColor=s,l.highlightColor=u,l.hovered=!1,l.bounds={x:-16,y:-26,width:l.width,height:l.height},l.type=h.TYPES.FOOTAGE_LIBRARY_ITEMS,l.setHiddenCallback=c,l.hidden=!1,l}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Yt(t,e)}(e,t),n=e,(i=[{key:"tick",value:function(){}},{key:"render",value:function(t){if(!this.hidden){var e=this.x,n=this.y,i=this.width,r=this.height;t.fillStyle=this.hovered?this.highlightColor:this.bgColor,t.fillRect(e-16,n-26,i,r),t.fillStyle="black",t.drawText(this.video.video.who,this.x,this.y-4,"white",!1,h.EMAIL_ITEM_SIZE),t.drawText(this.video.video.status||"N/A (Please watch video)",this.x+224,this.y-4,"white",!1,h.EMAIL_ITEM_SIZE)}}},{key:"wasHoveredAt",value:function(t,e){this.hovered=!0}},{key:"wasBlurred",value:function(){this.hovered=!1}},{key:"wasClickedAt",value:function(){this.setHiddenCallback(!0),this.video.video.isViewed=!0,this.video.setHiddenCallback=this.setHiddenCallback,this.handler.getEntityManager().addEntity(this.video)}}])&&Ft(n.prototype,i),r&&Ft(n,r),e}(ot);function Ut(t){return(Ut="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Xt(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Zt(t,e){return!e||"object"!==Ut(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Vt(t){return(Vt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Jt(t,e){return(Jt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var qt=function(t){function e(t,n,i){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=Zt(this,Vt(e).call(this,t,0,0))).x=0,r.y=0,r.paddingX=h.GAME_WIDTH/8,r.paddingY=h.GAME_HEIGHT/16,r.width=h.GAME_WIDTH-2*r.paddingX,r.height=h.GAME_HEIGHT-2*r.paddingY,r.setActiveCallback=i,r.bounds={x:850,y:52,width:34,height:30},r.type=h.TYPES.FOOTAGE_ITEMS,r.hidden=!1,r.footage=n,r.assets=w.getAssets("footageLibrary"),r.footageItems=[],r.initializeFootageItems(),r}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Jt(t,e)}(e,t),n=e,(i=[{key:"tick",value:function(){}},{key:"initializeFootageItems",value:function(){for(var t=this.paddingX+16+4,e=this.paddingY+118,n=0;n<this.footage.length;n+=1){var i=this.footage[n],r=n%2?h.COLORS.RED:h.COLORS.PURPLE,o=n%2?h.COLORS.LIGHT_RED:h.COLORS.LIGHT_PURPLE,a=new zt(this.handler,t,e,this.width-8,34,i,r,o,this.setHidden.bind(this));this.handler.getEntityManager().addEntity(a),this.footageItems.push(a),e+=36}}},{key:"drawFadedBackground",value:function(t){t.globalAlpha=.4,t.fillStyle="black",t.fillRect(0,0,h.GAME_WIDTH,h.GAME_HEIGHT),t.globalAlpha=1}},{key:"render",value:function(t){this.hidden||(this.drawFadedBackground(t),this.drawLibrary(t),this.drawFootageItems(t))}},{key:"setHidden",value:function(t){this.hidden=t;for(var e=0;e<this.footageItems.length;e+=1)this.footageItems[e].hidden=t}},{key:"drawFootageItems",value:function(t){for(var e=0;e<this.footageItems.length;e+=1)this.footageItems[e].render(t)}},{key:"drawLibrary",value:function(t){t.drawSprite(this.assets.bg,this.paddingX,this.paddingY,this.width,this.height)}},{key:"wasClickedAt",value:function(){for(var t=this.handler.getEntityManager(),e=0;e<this.footageItems.length;e+=1)t.removeEntity(this.footageItems[e]);t.removeEntity(this),this.setActiveCallback()}}])&&Xt(n.prototype,i),r&&Xt(n,r),e}(ot);function Kt(t){return(Kt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Qt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function $t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function te(t,e){return!e||"object"!==Kt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ee(t){return(ee=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ne(t,e){return(ne=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var ie=function(t){function e(t,n,i,r){var o,a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return Qt(this,e),(o=te(this,ee(e).call(this,t,n,i))).x=n,o.y=i,o.bounds={x:0,y:0,width:h.GAME_WIDTH,height:h.GAME_HEIGHT},o.type=h.TYPES.INTERACTIVE,o.isViewed=a,o.video=r,o.states={IDLE:"idle",PLAYING:"playing",FINISHED:"finished"},o.assets=w.getAssets("bigFootage"),o.state=o.states.IDLE,o}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ne(t,e)}(e,t),n=e,(i=[{key:"tick",value:function(){switch(this.state){case this.states.FINISHED:case this.states.IDLE:break;case this.states.PLAYING:var t=this.video.assets.animations[this.states.PLAYING];if(t.index>=t.frames.length-1)return this.video.status="death"===this.video.type?"Deceased":"Alive","alive"===this.video.type&&this.handler.getFootageManager().updateWatchedBestVideo(this.video.clueNumber),void(this.state=this.states.FINISHED);t.tick();break;default:throw new Error("Big Footage unrecognized state: ".concat(this.state))}}},{key:"drawFadedBackground",value:function(t){var e=this.bounds,n=e.x,i=e.y,r=e.width,o=e.height;t.globalAlpha=.4,t.fillStyle="black",t.fillRect(n,i,r,o),t.globalAlpha=1}},{key:"getCurrentAnimationFrame",value:function(){switch(this.state){case this.states.IDLE:break;case this.states.FINISHED:case this.states.PLAYING:return this.video.assets.animations[this.states.PLAYING].getCurrentFrame();default:throw new Error('Big Footage animation state "'.concat(this.state," is not accounted for"))}}},{key:"render",value:function(t){switch(this.drawFadedBackground(t),this.state){case this.states.IDLE:t.drawSprite(this.assets.playButton,this.x,this.y,this.width,this.height);break;case this.states.FINISHED:t.drawSprite(this.getCurrentAnimationFrame(),this.x,this.y,this.width,this.height),t.fillStyle="black",t.globalAlpha=.6,t.fillRect(this.x,this.y,this.assets.playButton.width,this.assets.playButton.height),t.globalAlpha=1,t.fillStyle="black",t.drawText("X",this.x+this.assets.playButton.height+60,this.y+80,"white",!0,64);break;case this.states.PLAYING:t.drawSprite(this.getCurrentAnimationFrame(),this.x,this.y,this.width,this.height);break;default:throw new Error("Big Footage unrecognized state: ".concat(this.state))}}},{key:"wasClickedAt",value:function(){switch(this.state){case this.states.IDLE:this.state=this.states.PLAYING;break;case this.states.PLAYING:break;case this.states.FINISHED:this.video.assets.animations[this.states.PLAYING].index=0,this.setHiddenCallback(!1),this.state=this.states.IDLE,this.handler.getFootageManager().isLogComplete()&&this.handler.getWorld().gameWon(),this.handler.getEntityManager().removeEntity(this);break;default:throw new Error("Big Footage wasClicked unrecognized state: ".concat(this.state))}}}])&&$t(n.prototype,i),r&&$t(n,r),e}(ot);function re(t){return(re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function oe(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);i=!0);}catch(t){r=!0,o=t}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function ae(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function se(t,e){return!e||"object"!==re(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function he(t){return(he=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ue(t,e){return(ue=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var ce=function(t){function e(t){var n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=se(this,he(e).call(this,t,h.APPS.FOOTAGE))).bounds={x:0,y:26,width:n.width,height:36},n.textXOffset=0,n.textYOffset=n.height+18,n.assets=w.getAssets("footage"),n.videos={johnDies:{clueNumber:1,who:"John Smith",type:"death",assets:w.getAssets("johnDies")},johnLives:{clueNumber:1,who:"John Smith",type:"alive",assets:w.getAssets("johnLives")},oliviaDies:{clueNumber:2,who:"Olivia Bouqets",type:"death",assets:w.getAssets("johnDies")},oliviaLives:{clueNumber:2,who:"Olivia Bouqets",type:"alive",assets:w.getAssets("johnLives")},peterDies:{clueNumber:3,who:"Peter Pipers",type:"death",assets:w.getAssets("johnDies")},peterLives:{clueNumber:3,who:"Peter Pipers",type:"alive",assets:w.getAssets("johnLives")}};var i=oe(n.handler.getEntityManager().getEntitiesByType(h.TYPES.COMPUTER),1)[0],r={x:i.x,y:i.y};return n.footage=[new ie(n.handler,r.x,r.y,n.videos.johnDies,!1),new ie(n.handler,r.x,r.y,n.videos.oliviaDies,!1),new ie(n.handler,r.x,r.y,n.videos.peterDies,!1)],n}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ue(t,e)}(e,t),n=e,(i=[{key:"setActive",value:function(){this.state="idle"}},{key:"appLoaded",value:function(){this.handler.getEntityManager().addEntity(new qt(this.handler,this.footage,this.setActive.bind(this)))}},{key:"updateFootage",value:function(t){for(var e=oe(this.handler.getEntityManager().getEntitiesByType(h.TYPES.COMPUTER),1)[0],n={x:e.x,y:e.y},i=!1,r=0;r<this.footage.length;r+=1)if(this.footage[r].video.clueNumber===t)switch(t){case 1:this.footage[r]=new ie(this.handler,n.x,n.y,this.videos.johnLives,!1),i=!0;break;case 2:this.footage[r]=new ie(this.handler,n.x,n.y,this.videos.oliviaLives,!1),i=!0;break;case 3:this.footage[r]=new ie(this.handler,n.x,n.y,this.videos.peterLives,!1),i=!0}if(!i)throw new Error("video with clue number ".concat(t," not found in Footage.footage"))}}])&&ae(n.prototype,i),r&&ae(n,r),e}(ft);function le(t){return(le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function fe(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function de(t,e){return!e||"object"!==le(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ye(t){return(ye=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function pe(t,e){return(pe=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var be=function(t){function e(t,n,i,r,o,a){var s;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(s=de(this,ye(e).call(this,t,n,i))).width=r,s.height=o,s.hovered=!1,s.setting=a,s.bounds={x:-32,y:0,width:s.width,height:s.height},s.type=h.TYPES.SETTINGS_WINDOW_ITEMS,s.hidden=a.hidden,s.isChecked=a.checked,s.wasToggled=!1,s.assets=w.getAssets("settingsCheck"),s}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&pe(t,e)}(e,t),n=e,(i=[{key:"tick",value:function(){}},{key:"render",value:function(t){this.hidden||(this.x,this.y,this.width,this.height,this.hovered&&(t.fillStyle=h.COLORS.LIGHT_PURPLE,t.globalAlpha=.4,t.fillRect(this.x+this.bounds.x,this.y+this.bounds.y,this.bounds.width,this.bounds.height),t.globalAlpha=1,t.fillStyle="black"),t.drawSprite(this.assets.box,this.x,this.y,this.assets.box.width,this.assets.box.height),this.setting.checked&&t.drawSprite(this.assets.check,this.x,this.y,this.assets.box.width,this.assets.box.height),t.drawText(this.setting.label,this.x+50,this.y+32,"black",!1,24))}},{key:"wasHoveredAt",value:function(t,e){this.hovered=!0}},{key:"wasBlurred",value:function(){this.hovered=!1}},{key:"wasClickedAt",value:function(){this.toggled||(this.toggled=!0,this.setting.checked=!this.setting.checked,this.handler.getFootageManager().interveneClue(this.setting.clueNumber))}}])&&fe(n.prototype,i),r&&fe(n,r),e}(ot);function ge(t){return(ge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ve(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function we(t,e){return!e||"object"!==ge(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ee(t){return(Ee=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function me(t,e){return(me=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Te=function(t){function e(t,n,i,r,o){var a;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(a=we(this,Ee(e).call(this,t,n,i))).x=n,a.y=i,a.paddingX=50,a.paddingY=50,a.width=416,a.height=278,a.bounds={x:418,y:63,width:36,height:34},a.setActiveCallback=o,a.type=h.TYPES.SETTINGS_ITEMS,a.hidden=!1,a.settings=r,a.assets=w.getAssets("settingsWindow"),a.settingsItems=[],a.initializeSettingsItems(),a}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&me(t,e)}(e,t),n=e,(i=[{key:"tick",value:function(){}},{key:"initializeSettingsItems",value:function(){for(var t=80,e=0;e<this.settings.length;e+=1){var n=this.settings[e],i=new be(this.handler,this.x+32+this.paddingX,this.y+t+this.paddingY,this.width,45,n,this.setHidden.bind(this));this.handler.getEntityManager().addEntity(i),this.settingsItems.push(i),t+=64}}},{key:"drawFadedBackground",value:function(t){t.globalAlpha=.4,t.fillStyle="black",t.fillRect(0,0,h.GAME_WIDTH,h.GAME_HEIGHT),t.globalAlpha=1}},{key:"render",value:function(t){this.hidden||(this.drawFadedBackground(t),this.drawWindow(t),this.drawSettingsItems(t))}},{key:"setHidden",value:function(t){this.hidden=t;for(var e=0;e<this.settingsItems.length;e+=1)this.settingsItems[e].hidden=t}},{key:"drawSettingsItems",value:function(t){for(var e=0;e<this.settingsItems.length;e+=1)this.settingsItems[e].render(t)}},{key:"drawWindow",value:function(t){t.drawSprite(this.assets.bg,this.paddingX+this.x,this.paddingY+this.y,this.width,this.height)}},{key:"wasClickedAt",value:function(){for(var t=this.handler.getEntityManager(),e=0;e<this.settingsItems.length;e+=1)t.removeEntity(this.settingsItems[e]);t.removeEntity(this),this.setActiveCallback()}}])&&ve(n.prototype,i),r&&ve(n,r),e}(ot);function Oe(t){return(Oe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ie(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);i=!0);}catch(t){r=!0,o=t}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function Se(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function ke(t,e){return!e||"object"!==Oe(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function _e(t){return(_e=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ae(t,e){return(Ae=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Pe=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=ke(this,_e(e).call(this,t,h.APPS.SETTINGS))).bounds={x:0,y:8,width:n.width,height:60},n.textXOffset=-2,n.textYOffset=n.height+18,n.assets=w.getAssets("settings"),n.settings=[{clueNumber:1,hidden:!1,label:"Falling Pianos",checked:!0},{clueNumber:2,hidden:!1,label:"UFO Intervention",checked:!1},{clueNumber:3,hidden:!1,label:"Third clue",checked:!0}],n}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ae(t,e)}(e,t),n=e,(i=[{key:"setActive",value:function(){this.state="idle"}},{key:"appLoaded",value:function(){var t=Ie(this.handler.getEntityManager().getEntitiesByType(h.TYPES.COMPUTER),1)[0],e={x:t.x,y:t.y};this.handler.getEntityManager().addEntity(new Te(this.handler,e.x,e.y,this.settings,this.setActive.bind(this)))}}])&&Se(n.prototype,i),r&&Se(n,r),e}(ft);function Ce(t){return(Ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function xe(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);i=!0);}catch(t){r=!0,o=t}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function Me(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function He(t,e){return!e||"object"!==Ce(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function je(t){return(je=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ne(t,e){return(Ne=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Ge=function(t){function e(t,n,i){var r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=He(this,je(e).call(this,t,n,i))).states={OFF:"off",INITIALIZE:"initialize",BOOTING:"booting",IDLE:"idle"},r.width=h.SCREEN_WIDTH,r.height=h.SCREEN_HEIGHT,r.bounds={x:4,y:4,width:r.width-4,height:r.height-4},r.assets=w.getAssets("os"),r.padding=32,r.iconsPerRow=4,r.bootCounter=0,r.bootWait=0,r.type=h.TYPES.INTERACTIVE;r.handler.getEntityManager();return r.type=h.TYPES.COMPUTER,r.state=r.states.INITIALIZE,r.assets.animations[r.states.BOOTING].index=9,r}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ne(t,e)}(e,t),n=e,(i=[{key:"initializeApps",value:function(){this.apps=[this.handler.getEntityManager().addEntity(new Lt(this.handler)),this.handler.getEntityManager().addEntity(new ce(this.handler)),this.handler.getEntityManager().addEntity(new Pe(this.handler))]}},{key:"addApp",value:function(t){this.apps.push(t),this.handler.getEntityManager().addEntity(t),this.resetAppPositions()}},{key:"resetAppPositions",value:function(){var t=this.x+this.width/2,e=this.y+this.height/2;if(1===this.apps.length){var n=xe(this.apps,1)[0];return n.x=t-n.bounds.width/2,void(n.y=e-n.bounds.height)}if(2===this.apps.length){var i=xe(this.apps,2),r=i[0],o=i[1];return r.x=t-r.bounds.width/2-96,r.y=e-r.bounds.height,o.x=t-o.bounds.width/2+96,void(o.y=e-o.bounds.height)}if(3===this.apps.length){var a=xe(this.apps,3),s=a[0],h=a[1],u=a[2];return s.x=t-s.bounds.width/2-96,s.y=e-s.bounds.height-96+16,h.x=t-h.bounds.width/2+96,h.y=e-h.bounds.height-96+16,u.x=t-u.bounds.width/2,void(u.y=e-h.bounds.height+32+16)}throw new Error("apps length is great then expected (".concat(this.apps.length,") in ComputerScreen.resetAppPositions()"))}},{key:"tick",value:function(){switch(this.state){case this.states.OFF:break;case this.states.INITIALIZE:this.initializeApps(),this.resetAppPositions(),this.state=this.states.BOOTING;break;case this.states.IDLE:break;case this.states.BOOTING:var t=this.assets.animations[this.states.BOOTING];if(t.index>=9)return this.bootCounter+=1,void(this.bootCounter>=this.bootWait&&(this.bootCounter=0,this.state=this.states.IDLE));t.tick();break;default:throw new Error('Computer Screen animation state "'.concat(this.state," is not accounted for"))}}},{key:"getCurrentAnimationFrame",value:function(){switch(this.state){case this.states.OFF:case this.states.INITIALIZE:case this.states.IDLE:break;case this.states.BOOTING:return this.assets.animations[this.states.BOOTING].getCurrentFrame();default:throw new Error('Computer App animation state "'.concat(this.state," is not accounted for"))}}},{key:"render",value:function(t){switch(t.fillStyle=this.state===this.states.OFF?"black":h.COLORS.PURPLE,t.fillRect(this.x,this.y,this.width,this.height),this.state){case this.states.OFF:case this.states.INITIALIZE:break;case this.states.IDLE:for(var e=0;e<this.apps.length;e+=1){var n=this.apps[e];t.drawText(n.name,n.x+n.textXOffset,n.y+n.textYOffset,h.COLORS.CREAM,!1),n.render(t)}break;case this.states.BOOTING:this.bootCounter>this.bootWait/4&&(t.globalAlpha-=this.bootCounter/this.bootWait),t.drawSprite(this.getCurrentAnimationFrame(),this.x,this.y,this.width,this.height),t.globalAlpha=1;break;default:throw new Error('Computer App animation state "'.concat(this.state," is not accounted for"))}}},{key:"wasClickedAt",value:function(t,e){this.state===this.states.OFF&&(this.type=h.TYPES.COMPUTER,this.state=this.states.INITIALIZE)}}])&&Me(n.prototype,i),r&&Me(n,r),e}(ot);function Re(t){return(Re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Le(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function De(t,e){return!e||"object"!==Re(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Fe(t){return(Fe=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Be(t,e){return(Be=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var We=function(t){function e(t,n){var i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(i=De(this,Fe(e).call(this,t,h.DIALOGUE.X,h.DIALOGUE.Y))).x=h.DIALOGUE.X,i.y=h.DIALOGUE.Y,i.width=h.DIALOGUE.WIDTH,i.height=h.DIALOGUE.HEIGHT,i.bounds={x:-i.x,y:-i.y,width:h.GAME_WIDTH,height:h.GAME_HEIGHT},i.fontSize=42,i.textX=i.x+i.fontSize,i.textY=i.y+i.height/2+i.fontSize/3,i.type=h.TYPES.INTERACTIVE,i.dialogue="",i.speechTimer=5,i.wasClicked=!1,i.words=[],i.addWords(n),i}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Be(t,e)}(e,t),n=e,(i=[{key:"tick",value:function(){if(!this.words.length)return this.handler.getWorld().dialogueFinished(),void this.handler.getEntityManager().removeEntity(this);this.speechTimer>=2&&this.words.length&&(this.words[0].length?this.sayNextLetter():this.wasClicked&&(this.wasClicked=!1,this.readNextSentence())),this.speechTimer<30&&this.speechTimer++}},{key:"render",value:function(t){this.words[0]&&(t.fillStyle="black",t.globalAlpha=.6,t.fillRect(this.x+this.bounds.x,this.y+this.bounds.y,this.bounds.width,this.bounds.height),t.globalAlpha=1,t.fillStyle="white",t.fillRect(this.x,this.y,this.width,this.height),t.drawText(this.dialogue,this.textX,this.textY,"black",!1,this.fontSize),this.words[0].length||t.drawText(">>",this.x+this.width-96,this.y+this.height-8,"black",!1,64))}},{key:"readNextSentence",value:function(){this.words.splice(0,1),this.clean()}},{key:"clean",value:function(){this.dialogue="",this.sentencePause=0}},{key:"sayNextLetter",value:function(){var t=this.words[0][0];this.dialogue+=t,this.words[0].splice(0,1),this.speechTimer=0}},{key:"addWords",value:function(t){var e=this;t instanceof Array||(t=[t]),t.forEach((function(t){e.words.push(t.split(""))}))}},{key:"clear",value:function(){this.words=[],this.clean()}},{key:"wasClickedAt",value:function(){this.words[0].length||(this.wasClicked=!0)}}])&&Le(n.prototype,i),r&&Le(n,r),e}(ot);function Ye(t){return(Ye="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ze(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Ue(t,e){return!e||"object"!==Ye(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Xe(t){return(Xe=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ze(t,e){return(Ze=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Ve=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Ue(this,Xe(e).call(this,t,0,0))).width=h.GAME_WIDTH,n.height=h.GAME_HEIGHT,n.states={INIT:"init",IDLE:"idle"},n.bounds={x:0,y:0,width:0,height:0},n.state=n.states.INIT,n.parentWindow=document.querySelector("#main"),n}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ze(t,e)}(e,t),n=e,(i=[{key:"initIframe",value:function(){this.wrapper=document.createElement("div");var t=document.createElement("iframe");this.wrapper.style.cursor="auto",this.wrapper.style.width="".concat(this.width,"px"),this.wrapper.style.height="".concat(this.height,"px"),this.wrapper.style.position="absolute",t.style.width=this.wrapper.style.width,t.style.height=this.wrapper.style.height,this.wrapper.setAttribute("z-index","9999"),t.setAttribute("z-index","9998"),t.setAttribute("src",this.src),this.parentWindow.appendChild(this.wrapper),this.wrapper.appendChild(t),this.initGameHeader()}},{key:"initGameHeader",value:function(){var t=document.createElement("div");t.setAttribute("id","game-header");var e=t.style;e.width="".concat(this.width+4,"px"),e.height="40px",e.position="absolute",e.top="0px",e.borderRadius="1%",e.border="2px black solid",t.setAttribute("z-index","9999"),this.wrapper.appendChild(t),this.initGameHeaderStripes(t),this.initGameHeaderCloseButton(t)}},{key:"initGameHeaderStripes",value:function(t){var e=document.createElement("div");e.style.height="100%",e.style.width="95%",e.style.display="inline-block",t.appendChild(e);for(var n=0;n<3;n+=1){var i=document.createElement("div");i.style.height="33%",i.style.backgroundColor=0===n?h.COLORS.PURPLE:1===n?h.COLORS.CREAM:h.COLORS.RED,e.appendChild(i)}}},{key:"initGameHeaderCloseButton",value:function(t){var e=document.createElement("div"),n=e.style;n.display="inline-block",n.width="4%",n.backgroundColor="lightgrey",n.height="80%",n.borderLeftColor="grey",n.borderTopColor="white",n.borderRightColor="white",n.borderBottomColor="grey",n.borderWidth="4px",n.borderStyle="solid",n.position="relative",t.appendChild(e);var i=document.createElement("h2");i.innerHTML="X",i.style.position="absolute",i.style.top="-17px",i.style.right="11px",e.appendChild(i),e.addEventListener("click",this.closeSelf.bind(this))}},{key:"closeSelf",value:function(){this.parentWindow.removeChild(this.wrapper),this.destroySelf()}},{key:"tick",value:function(){switch(this.state){case this.states.INIT:if(!this.src)throw new Error("Easter egg game has no .src!");this.initIframe(),this.state=this.states.IDLE;break;case this.states.IDLE:break;default:throw new Error('Easter Egg Game state "'.concat(this.state," is not accounted for"))}}},{key:"render",value:function(t){}}])&&ze(n.prototype,i),r&&ze(n,r),e}(ot);function Je(t){return(Je="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function qe(t,e){return!e||"object"!==Je(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ke(t){return(Ke=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Qe(t,e){return(Qe=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var $e=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=qe(this,Ke(e).call(this,t))).src="https://mccordgh.github.io/js13kgames_2017_entry/",n.title="Me, Myself, and i",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Qe(t,e)}(e,t),e}(Ve);function tn(t){return(tn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function en(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function nn(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function rn(t,e){return!e||"object"!==tn(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function on(t){return(on=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function an(t,e){return(an=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var sn=function(t){function e(t,n,i){var r,o,a;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(a=rn(this,on(e).call(this,t,n,i))).width=h.RADIO_WIDTH,a.height=h.RADIO_HEIGHT,a.bounds={x:0,y:22,width:a.width,height:a.height-22},a.type=h.TYPES.INTERACTIVE,a.assets=w.getAssets("radio"),a.bannerAssets=w.getAssets("radioBanner"),a.states={OFF:"off",STATION1:"station-1",STATION2:"station-2",STATION3:"station-3"},a.state=a.states.OFF,a.titles=(en(r={},a.states.STATION1,"Dirt"),en(r,a.states.STATION2,"Rtten"),en(r,a.states.STATION3,"B-L-U-E"),r),a.artists=(en(o={},a.states.STATION1,"The Greebles"),en(o,a.states.STATION2,"Black Eyeball"),en(o,a.states.STATION3,"The Clue-sters"),o),a.bannerCounter=0,a.showBannerMax=360,a.showBanner=!1,a}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&an(t,e)}(e,t),n=e,(i=[{key:"tick",value:function(){this.showBanner&&(this.bannerCounter+=1,this.bannerCounter>=this.showBannerMax&&(this.showBanner=!1,this.bannerCounter=0))}},{key:"startBanner",value:function(){this.bannerCounter=0,this.showBanner=!0}},{key:"render",value:function(t){var e;switch(this.state){case this.states.OFF:e=this.assets.off;break;case this.states.STATION1:e=this.assets.station1;break;case this.states.STATION2:e=this.assets.station2;break;case this.states.STATION3:e=this.assets.station3}t.drawSprite(e,this.x,this.y,this.width,this.height),this.state!==this.states.OFF&&this.showBanner&&this.drawRadioBanner(t)}},{key:"drawRadioBanner",value:function(t){var e=this.x-36,n=this.y+46;t.drawSprite(this.bannerAssets.img,e,n,225,225),e+=40,n+=106,t.drawText("Now Playing:",e,n,"black",!0,18),n+=22,t.drawText(this.titles[this.state],e,n,"black",!0,18),n+=22,t.drawText(this.artists[this.state],e,n,"black",!0,18)}},{key:"wasClickedAt",value:function(t,e){var n=this.handler.getSoundManager();switch(this.state){case this.states.OFF:this.state=this.states.STATION1,n.play("station1");break;case this.states.STATION1:this.state=this.states.STATION2,n.play("station2");break;case this.states.STATION2:this.state=this.states.STATION3,n.play("station3");break;case this.states.STATION3:this.state=this.states.OFF,n.play("bgm")}this.state!==this.states.OFF&&this.startBanner()}}])&&nn(n.prototype,i),r&&nn(n,r),e}(ot);function hn(t){return(hn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function un(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function cn(t,e){return!e||"object"!==hn(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ln(t){return(ln=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function fn(t,e){return(fn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var dn=function(t){function e(t,n,i,r,o){var a;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(a=cn(this,ln(e).call(this,t,n,i))).width=h.TELEBUTTON_WIDTH,a.height=h.TELEBUTTON_HEIGHT,a.bounds={x:0,y:0,width:a.width,height:a.height},a.type=h.TYPES.TELEBUTTONS,a.number=r,a.addNumberCallback=o,a}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&fn(t,e)}(e,t),n=e,(i=[{key:"tick",value:function(){}},{key:"render",value:function(t){t.drawText(this.number,this.number.toString().length>1?this.x+7:this.x+11,this.y+21,"black",!0,h.BIG_FONT_SIZE-12)}},{key:"wasClickedAt",value:function(t,e){this.handler.getSoundManager().play("dialing"),this.addNumberCallback(this.number)}}])&&un(n.prototype,i),r&&un(n,r),e}(ot);function yn(t){return(yn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function pn(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function bn(t,e){return!e||"object"!==yn(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function gn(t){return(gn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function vn(t,e){return(vn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var wn=function(t){function e(t,n,i){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=bn(this,gn(e).call(this,t,n,i))).width=248,r.height=185,r.assets=w.getAssets("telephone"),r.buttons=[],r.numberSeries="",r.initializeButtons(),r.states={IDLE:"idle",CALLING:"calling",CALLED:"called"},r.state=r.states.IDLE,r.callingCounter=0,r.callingMax=120,r.seriesFlashTimer=0,r}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&vn(t,e)}(e,t),n=e,(i=[{key:"initializeButtons",value:function(){for(var t=[1,2,3,4,5,6,7,8,42],e=68,n=0,i=0;i<9;i+=1){var r=rndInt(0,t.length-1),o=t[r];t.splice(r,1),i>=3&&i<=5&&(n=-4),i>=6&&i<=8&&(n=-8),i%3==0&&0!==i&&(e+=h.TELEBUTTON_HEIGHT);var a=new dn(this.handler,this.x+120+i%3*h.TELEBUTTON_WIDTH+n,this.y+e,o,this.addNumber.bind(this));this.buttons.push(a),this.handler.getEntityManager().addEntity(a)}}},{key:"addNumber",value:function(t){this.state===this.states.IDLE&&(this.numberSeries+=t.toString(),this.numberSeries.length>=7&&(this.handler.getSoundManager().play("phoneRinging"),this.state=this.states.CALLING))}},{key:"endPhoneCall",value:function(){this.numberSeries="",this.state=this.states.IDLE}},{key:"tick",value:function(){switch(this.state){case this.states.IDLE:break;case this.states.CALLING:if(this.callingCounter+=1,this.callingCounter>this.callingMax){if(this.callingCounter=0,this.state=this.states.CALLED,"42424242"===this.numberSeries)return void this.handler.getWorld().addCorrectPhoneDialogue(this.endPhoneCall.bind(this));this.handler.getWorld().addBadPhoneDialogue(this.endPhoneCall.bind(this))}break;default:throw new Error("Telephone tick state not recognized: ".concat(this.state))}}},{key:"render",value:function(t){switch(t.drawSprite(this.assets.img,this.x,this.y,this.width,this.height),this.state){case this.states.CALLING:this.seriesFlashTimer+=1,this.seriesFlashTimer>20&&this.renderNumberSeries(t),this.seriesFlashTimer>39&&(this.seriesFlashTimer=0);break;default:this.renderNumberSeries(t)}this.renderButtons(t)}},{key:"renderNumberSeries",value:function(t){var e=this.numberSeries;this.numberSeries.length>3&&(e="".concat(this.numberSeries.substring(0,3),"-").concat(this.numberSeries.substring(3,this.numberSeries.length))),t.drawText(e,this.x+135,this.y+50,"black",!0,h.BIG_FONT_SIZE-16)}},{key:"renderButtons",value:function(t){for(var e=0;e<this.buttons.length;e+=1)this.buttons[e].render(t)}}])&&pn(n.prototype,i),r&&pn(n,r),e}(ot);function En(t){return(En="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function mn(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Tn(t,e){return!e||"object"!==En(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function On(t){return(On=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function In(t,e){return(In=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Sn=function(t){function e(t,n,i){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=Tn(this,On(e).call(this,t,n,i))).width=192,r.height=192,r.bounds={x:0,y:0,width:r.width,height:r.height},r.assets=w.getAssets("wallPaper"),r.states={ONE:"one",TWO:"two",THREE:"three",FOUR:"four",FIVE:"five"},r.state=r.states.ONE,r.type=h.TYPES.INTERACTIVE,r}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&In(t,e)}(e,t),n=e,(i=[{key:"tick",value:function(){}},{key:"render",value:function(t){t.drawSprite(this.assets[this.state],this.x,this.y,this.width,this.height)}},{key:"wasClickedAt",value:function(){switch(this.state){case this.states.ONE:this.state=this.states.TWO;break;case this.states.TWO:this.state=this.states.THREE;break;case this.states.THREE:this.state=this.states.FOUR;break;case this.states.FOUR:this.state=this.states.FIVE;break;case this.states.FIVE:break;default:throw new Error("WallPaperTear state ".concat(this.state," not recognized in wasClickedAt"))}}}])&&mn(n.prototype,i),r&&mn(n,r),e}(ot);function kn(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var _n=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.handler=e,this.entityManager=e.createEntityManager(),this.assets={background:w.getAssets("background").image},this.spatialGrid=new Q(h.GAME_WIDTH,h.GAME_HEIGHT,h.SPATIAL_GRID_SIZE),this.states={INITIALIZE:"initialize",INTRO:"intro",IDLE:"idle",TEST:"test",TEST_INIT:"test-init",GAME_WON:"game-won"},this.state=this.states.INITIALIZE}var e,n,i;return e=t,(n=[{key:"addCorrectPhoneDialogue",value:function(t){this.dialogue=this.entityManager.addEntity(new We(this.handler,["Hello? HELLO????","Listen keep your voice down... OKAY?!","I'm not supposed to tell you this, but...","The clue is BONK."])),t()}},{key:"addBadPhoneDialogue",value:function(t){this.dialogue=this.entityManager.addEntity(new We(this.handler,["No answer..."])),t()}},{key:"initDialogue",value:function(){this.dialogue=this.entityManager.addEntity(new We(this.handler,[]))}},{key:"gameWon",value:function(){this.dialogue=this.entityManager.addEntity(new We(this.handler,["Yo, newbie! You did it!","Looks like John Smith is alive!","Great Job!","Also we need you in on Saturday..."])),this.state=this.states.GAME_WON}},{key:"dialogueFinished",value:function(t){switch(this.state){case this.states.INITIALIZE:case this.states.IDLE:break;case this.states.INTRO:this.state=this.states.IDLE;break;case this.states.GAME_WON:break;default:throw new Error('World One dialogue finished state "'.concat(this.state," is not accounted for"))}}},{key:"loadEntities",value:function(){var t=this;[new Ge(this.handler,256,136),new sn(this.handler,52,62),new wn(this.handler,0,480),new Sn(this.handler,832,120)].forEach((function(e){t.entityManager.addEntity(e)}))}},{key:"tick",value:function(t){switch(this.state){case this.states.TEST_INIT:this.entityManager.addEntity(new $e(this.handler)),this.state=this.states.IDLE;break;case this.states.TEST:break;case this.states.INITIALIZE:this.initDialogue(),this.state=this.states.INTRO;break;case this.states.GAME_WON:case this.states.INTRO:this.dialogue&&this.dialogue.tick();break;case this.states.IDLE:break;default:throw new Error('World One animation state "'.concat(this.state," is not accounted for"))}this.entityManager.tick(t)}},{key:"render",value:function(t){switch(this.drawBackground(t),this.state){case this.states.TEST_INIT:case this.states.INITIALIZE:break;case this.states.GAME_WON:case this.states.INTRO:this.dialogue&&this.dialogue.render(t);break;case this.states.TEST:case this.states.IDLE:break;default:throw new Error('World One state "'.concat(this.state," is not accounted for"))}this.entityManager.render(t)}},{key:"init",value:function(){this.loadEntities()}},{key:"drawBackground",value:function(t){var e=this.assets.background;t.drawSprite(e)}},{key:"getSpatialGrid",value:function(){return this.spatialGrid}}])&&kn(e.prototype,n),i&&kn(e,i),t}();function An(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);i=!0);}catch(t){r=!0,o=t}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function Pn(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var Cn=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.handler=e}var e,n,i;return e=t,(n=[{key:"unlockApp",value:function(t){var e=An(this.handler.getEntityManager().getEntitiesByType(h.TYPES.COMPUTER),1)[0];if(!e)throw new Error("entity with type ".concat(h.TYPES.COMPUTER," not found."));switch(t){case h.APPS.FOOTAGE:this.appExistsOnComputer(e,h.APPS.FOOTAGE)||e.addApp(new ce(this.handler));break;default:throw new Error("".concat(t," is not a valid app name to unlock"))}}},{key:"appExistsOnComputer",value:function(t,e){return!!t.apps.find((function(t){return t.name===e}))}}])&&Pn(e.prototype,n),i&&Pn(e,i),t}();function xn(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var Mn=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.handler=e,this.log={john:{number:1,name:"John Smith",intervened:!1,watchedBestVideo:!1},olivia:{number:2,name:"Olivia Bouqets",intervened:!1,watchedBestVideo:!1},peter:{number:3,name:"Peter Pipers",intervened:!1,watchedBestVideo:!1}}}var e,n,i;return e=t,(n=[{key:"interveneClue",value:function(t){switch(t){case 1:this.log.john.intervened=!0;break;case 2:this.log.olivia.intervened=!0;break;case 3:this.log.peter.intervened=!0;break;default:throw new Error("clue number ".concat(t," not recognized in FootageManager.interveneClue"))}var e=this.handler.getEntityManager().findEntityByName(h.APPS.FOOTAGE);if(!e)throw new Error("Footage ".concat(name," not found in FootageManager.updateIntervened"));e.updateFootage(t)}},{key:"updateWatchedBestVideo",value:function(t){switch(t){case 1:this.log.john.watchedBestVideo=!0;break;case 2:this.log.olivia.watchedBestVideo=!0;break;case 3:this.log.peter.watchedBestVideo=!0;break;default:throw new Error("clue number ".concat(t," not recognized in FootageManager.interveneClue"))}}},{key:"isLogComplete",value:function(){return!!(this.log.john.intervened&&this.log.olivia.watchedBestVideo&&this.log.olivia.intervened&&this.log.peter.watchedBestVideo&&this.log.peter.intervened&&this.log.peter.watchedBestVideo)}}])&&xn(e.prototype,n),i&&xn(e,i),t}();function Hn(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var jn=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.sources={bgm:{source:this.getMusic("bgm"),loops:!0},station1:{source:this.getMusic("station1"),loops:!0},station2:{source:this.getMusic("station2"),loops:!0},station3:{source:this.getMusic("station3"),loops:!0},phoneRinging:{source:this.getMusic("phone-ringing"),loops:!1},dialing:{source:this.getMusic("dialing"),loops:!1}};this.sources.bgm}var e,n,i;return e=t,(n=[{key:"getMusic",value:function(t){return"".concat(h.MUSIC_PATH,"/").concat(t,".mp3")}},{key:"stopSound",value:function(t){t.pause(),t.currentTime=0,t.src=""}},{key:"initSound",value:function(t){var e=new Audio(t.source);return e.loop=t.loops,e}},{key:"play",value:function(t){var e=this.sources[t];if(e)try{this.lastSoundPlayed&&e.loops&&this.stopSound(this.lastSoundPlayed);var n=this.initSound(e);return n.play(),this.lastSoundPlayed=n,n}catch(t){throw new Error(t)}throw new Error('Sound with name "'.concat(t,'" not found.'))}}])&&Hn(e.prototype,n),i&&Hn(e,i),t}();function Nn(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var Gn=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.game=e,this.entityManager=null,this.graphicsManager=null,this.monsterManager=null,this.mouseManager=null,this.seedManager=null,this.stateManager=null,this.uiManager=null,this.world=null}var e,n,i;return e=t,(n=[{key:"getEmailManager",value:function(){return this.emailManager}},{key:"getFootageManager",value:function(){return this.footageManager}},{key:"getEntityManager",value:function(){return this.entityManager}},{key:"getGame",value:function(){return this.game}},{key:"getGraphicsManager",value:function(){return this.graphicsManager}},{key:"getMouseManager",value:function(){return this.mouseManager}},{key:"getSoundManager",value:function(){return this.soundManager}},{key:"getWorld",value:function(){return this.world}},{key:"createEntityManager",value:function(){return this.entityManager=new V(this)}},{key:"createEmailManager",value:function(){return this.emailManager=new Cn(this)}},{key:"createFootageManager",value:function(){return this.footageManager=new Mn(this)}},{key:"createGraphicsManager",value:function(){return this.graphicsManager=new c}},{key:"createMouseManager",value:function(){return this.mouseManager=new a(this)}},{key:"createSoundManager",value:function(){return this.soundManager=new jn(this)}},{key:"createStateManager",value:function(){return this.stateManager=new q}},{key:"createWorld",value:function(){return this.world=new _n(this)}},{key:"event",value:function(t,e){"click"===t&&this.entityManager.mouseClick(e),"move"===t&&this.entityManager.mouseMove(e)}}])&&Nn(e.prototype,n),i&&Nn(e,i),t}();function Rn(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var Ln=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,i;return e=t,(n=[{key:"initialize",value:function(){this.managerHandler=new Gn(this),this.graphicsManager=this.managerHandler.createGraphicsManager(),this.stateManager=this.managerHandler.createStateManager(),this.mouseManager=this.managerHandler.createMouseManager(),this.managerHandler.createEmailManager(),this.managerHandler.createFootageManager(),this.managerHandler.createSoundManager();var t=this.managerHandler.createWorld();t.init();var e=new r(this.managerHandler,t);this.stateManager.setState(e)}},{key:"run",value:function(){var t=this;this.initialize();var e=1e3/h.FPS,n=0,i=a/1e3,r=Date.now(),o=r,a=0;!function s(){r=Date.now(),n=r-o,o=r,(a+=n)>=e&&(i=a/1e3,t.tick(i),t.render(t.graphicsManager.getGraphics()),a=0),window.requestAnimationFrame(s)}()}},{key:"tick",value:function(t){this.stateManager.getState().tick(t)}},{key:"render",value:function(t){t.clearRect(0,0,h.GAME_WIDTH,h.GAME_HEIGHT),this.stateManager.getState().render(t)}}])&&Rn(e.prototype,n),i&&Rn(e,i),t}();document.title="Gamedev.js 2020",window.rndIndex=function(t){return t[Math.floor(Math.random()*t.length)]},window.rndInt=function(t,e){return Math.floor(Math.random()*(e-t+1))+t},(new Ln).run()}]);