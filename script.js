!function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(i,r,function(e){return t[e]}.bind(null,r));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=1)}([function(t){t.exports={a:{sender:"MGMT",subject:"Re: A few incidients",text:["There have been a few incidents","Regarding ACME products.","","I've given you access to the Footage app.","Please review the footage of the incidents.",'We need these folks "Alive"...',"","Thanks,","MGMT"]},b:{sender:"Bill from HR",subject:"Re: Codes",text:["Hey there, newbie!","How is your first day going?","","In this place we keep lots of secrets...","You'll need to utilize the CODE MAN app.","I've given you access to it.","There are clues to codes everywhere... :)","Explore and find them!","","GL HF on your first day","Bill from HR"]}}},function(t,e,n){"use strict";function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}n.r(e);var r=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.managerHandler=e,this.world=n}var e,n,r;return e=t,(n=[{key:"tick",value:function(t){this.world.tick(t)}},{key:"render",value:function(t){this.world.render(t)}},{key:"getManagerHandler",value:function(){return this.managerHandler}},{key:"getWorld",value:function(){return this.world}},{key:"setWorld",value:function(t){this.world=t}}])&&i(e.prototype,n),r&&i(e,r),t}();function o(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var a=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.managerHandler=e,this.initializeEvents()}var e,n,i;return e=t,(n=[{key:"getMouseXFromEvent",value:function(t){return t.offsetX}},{key:"getMouseYFromEvent",value:function(t){return t.offsetY}},{key:"initializeEvents",value:function(){var t=this,e=this.managerHandler.getGraphicsManager().getCanvas();e.onclick=function(e){var n=t.getMouseXFromEvent(e),i=t.getMouseYFromEvent(e);t.managerHandler.event("click",{x:n,y:i})},e.onmousemove=function(e){var n=t.getMouseXFromEvent(e),i=t.getMouseYFromEvent(e);t.managerHandler.event("move",{x:n,y:i})}}}])&&o(e.prototype,n),i&&o(e,i),t}(),s=window.location.href,u={BIG_FONT_SIZE:32,FONT_SIZE:18,EMAIL_ITEM_SIZE:16,APP_NAME_SIZE:16,APPS:{CODE_MAN:"Code Man",FOOTAGE:"Footage",EMAIL:"Email",SETTINGS:"Settings"},COLORS:{PURPLE:"#7B538F",LIGHT_PURPLE:"#BD7FDB",DARK_PURPLE:"#4F355C",CREAM:"#FCEDC3",RED:"#FF2F4C",LIGHT_RED:"#FF7A8C",DARK_RED:"#803D46"},FPS:60,DIALOGUE:{X:64,Y:448,WIDTH:896,HEIGHT:256/1.5},TELEBUTTON_WIDTH:35,TELEBUTTON_HEIGHT:28,SCREEN_WIDTH:512,SCREEN_HEIGHT:384,GAME_WIDTH:1024,GAME_HEIGHT:768,ICON_HEIGHT:64,ICON_WIDTH:64,SPATIAL_GRID_SIZE:64,RADIO_WIDTH:133,RADIO_HEIGHT:74,TYPES:{TELEBUTTONS:"tele-buttons",EMAIL_ITEMS:"email-items",EMAIL_INBOX_ITEMS:"email-inbox-items",FOOTAGE_ITEMS:"footage-items",FOOTAGE_LIBRARY_ITEMS:"footage-library-items",SETTINGS_ITEMS:"settings-items",SETTINGS_WINDOW_ITEMS:"settings-window-items",INTERACTIVE:"interactive",COMPUTER:"computer",COMPUTER_APP:"computer-app"},FINGER_WIDTH:16,BASE_PATH:s=s.replace(/index.html/,""),ASSETS_PATH:"".concat(s,"src/resources"),MUSIC_PATH:"".concat(s,"src/music")};function h(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var l=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.customizeContext(),this.initializeCanvas(),this.initializeGraphics()}var e,n,i;return e=t,(n=[{key:"customizeContext",value:function(){var t=this;CanvasRenderingContext2D.prototype.drawSprite=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0;r||(r=e.width),o||(o=e.height),t.graphics.drawImage(e.sheet,e.x,e.y,e.width,e.height,n,i,r,o)},CanvasRenderingContext2D.prototype.drawText=function(e,n,i){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:u.COLORS.CREAM,o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:u.FONT_SIZE;t.graphics.font="".concat(a,"px Roboto Slab"),o&&(t.graphics.fillStyle="black"===r,t.graphics.fillText(e,n-1,i+1)),t.graphics.fillStyle=r,t.graphics.fillText(e,n,i)}}},{key:"initializeCanvas",value:function(){this.canvas=document.querySelector("#canvas"),this.canvas.setAttribute("width",u.GAME_WIDTH),this.canvas.setAttribute("height",u.GAME_HEIGHT)}},{key:"initializeGraphics",value:function(){this.graphics=this.canvas.getContext("2d"),this.graphics.imageSmoothingEnabled=!1,this.graphics.webkitImageSmoothingEnabled=!1}},{key:"getCanvas",value:function(){return this.canvas}},{key:"getGraphics",value:function(){return this.graphics}}])&&h(e.prototype,n),i&&h(e,i),t}();function c(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var f=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.frames=e,this.index=0,this.lastTime=Date.now(),this.timer=0,this.speed=this.frames[this.index].speed}var e,n,i;return e=t,(n=[{key:"tick",value:function(){if(this.timer+=Date.now()-this.lastTime,this.lastTime=Date.now(),!this.speed)throw new Error("SPEED NOT DEFINED FOR",this);this.timer>=this.speed&&(this.index+=1,this.timer=0,this.index>=this.frames.length&&(this.index=0))}},{key:"getCurrentFrame",value:function(){return this.frames[this.index].frame}}])&&c(e.prototype,n),i&&c(e,i),t}();function d(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var y=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,i;return e=t,i=[{key:"loadImage",value:function(t){var e=new Image;return e.src=t,e}}],(n=null)&&d(e.prototype,n),i&&d(e,i),t}();function p(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var g=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.sheet=e}var e,n,i;return e=t,(n=[{key:"crop",value:function(t,e,n,i){return{sheet:this.sheet,x:t,y:e,width:n,height:i}}}])&&p(e.prototype,n),i&&p(e,i),t}();function b(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var v={},w=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),v[e]=this,this.name=e,this.path="".concat(u.ASSETS_PATH,"/").concat(n),this.sheet=new g(y.loadImage(this.path)),this.animations={}}var e,n,i;return e=t,i=[{key:"getAssets",value:function(t){return v[t]}}],(n=[{key:"addAnimation",value:function(t,e){this.animations[t]=e}}])&&b(e.prototype,n),i&&b(e,i),t}(),E=function(t,e,n){n.frames=[];for(var i=n.col;i<n.length+n.col;i+=1)n.frames.push({frame:t.sheet.crop(n.width*i,n.height*n.row,n.width,n.height),speed:n.speed});t.addAnimation(e,new f(n.frames))},m=new w("cursor","cursor.png");m.pointer=m.sheet.crop(0,0,49,56);var T=new w("cursor2","cursor2.png");T.pointer=T.sheet.crop(0,0,32,32);var O=new w("whiteCursor","white-cursor.png");O.pointer=O.sheet.crop(0,0,32,32);var S=new w("hand","hand.png");S.pointer=S.sheet.crop(0,0,64,64);var k=new w("hand2","hand2.png");k.pointer=k.sheet.crop(0,0,32,32);var I=new w("background","gameJamBg.png");I.image=I.sheet.crop(0,0,u.GAME_WIDTH,u.GAME_HEIGHT);var _=new w("email","email.png");_.icon=_.sheet.crop(0,0,u.ICON_WIDTH,u.ICON_HEIGHT),E(_,"loading",{speed:120,row:0,col:0,length:10,width:u.ICON_WIDTH,height:u.ICON_HEIGHT});var A=new w("footage","footage.png");A.icon=A.sheet.crop(0,0,u.ICON_WIDTH,u.ICON_HEIGHT),E(A,"loading",{speed:1,row:0,col:0,length:64,width:u.ICON_WIDTH,height:u.ICON_HEIGHT});var C=new w("bigFootage","big-footage.png");C.playButton=C.sheet.crop(0,0,u.SCREEN_WIDTH,u.SCREEN_HEIGHT),E(new w("johnDies","john-dies.png"),"playing",{speed:100,row:0,col:0,length:18,width:u.SCREEN_WIDTH,height:u.SCREEN_HEIGHT}),E(new w("johnLives","john-lives.png"),"playing",{speed:100,row:0,col:0,length:18,width:u.SCREEN_WIDTH,height:u.SCREEN_HEIGHT}),E(new w("oliviaDies","olivia-dies.png"),"playing",{speed:100,row:0,col:0,length:18,width:u.SCREEN_WIDTH,height:u.SCREEN_HEIGHT}),E(new w("oliviaLives","olivia-lives.png"),"playing",{speed:100,row:0,col:0,length:18,width:u.SCREEN_WIDTH,height:u.SCREEN_HEIGHT}),E(new w("peterDies","peter-dies.png"),"playing",{speed:100,row:0,col:0,length:18,width:u.SCREEN_WIDTH,height:u.SCREEN_HEIGHT}),E(new w("peterLives","peter-lives.png"),"playing",{speed:100,row:0,col:0,length:18,width:u.SCREEN_WIDTH,height:u.SCREEN_HEIGHT}),E(new w("os","jam-os-bootup.png"),"booting",{speed:300,row:0,col:0,length:10,width:u.SCREEN_WIDTH,height:u.SCREEN_HEIGHT});var P=new w("inbox","inbox-bg.png");P.bg=P.sheet.crop(0,0,768,672);var M=new w("footageLibrary","footage-library-bg.png");M.bg=M.sheet.crop(0,0,768,672);var x=new w("radio","radio.png");x.off=x.sheet.crop(0,0,u.RADIO_WIDTH,u.RADIO_HEIGHT),x.station1=x.sheet.crop(u.RADIO_WIDTH,0,u.RADIO_WIDTH,u.RADIO_HEIGHT),x.station2=x.sheet.crop(2*u.RADIO_WIDTH,0,u.RADIO_WIDTH,u.RADIO_HEIGHT),x.station3=x.sheet.crop(3*u.RADIO_WIDTH,0,u.RADIO_WIDTH,u.RADIO_HEIGHT);var H=new w("radioBanner","radio-banner.png");H.img=H.sheet.crop(0,0,225,225);var N=new w("telephone","telephone.png");N.img=N.sheet.crop(0,0,248,185);var j=new w("wallPaper","wall-paper-tear.png");j.one=j.sheet.crop(0,0,192,192),j.two=j.sheet.crop(192,0,192,192),j.three=j.sheet.crop(384,0,192,192),j.four=j.sheet.crop(576,0,192,192),j.five=j.sheet.crop(768,0,192,192);var R=new w("settings","settings-cog.png");R.icon=R.sheet.crop(0,0,64,64),E(R,"loading",{speed:160,row:0,col:0,length:8,width:u.ICON_WIDTH,height:u.ICON_HEIGHT});var G=new w("settingsWindow","settings-window.png");G.bg=G.sheet.crop(0,0,416,278);var D=new w("settingsCheck","settings-checkbox.png");D.box=D.sheet.crop(0,0,45,45),D.check=D.sheet.crop(45,0,45,45);var L=new w("codeMan","code-man.png");function F(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}L.icon=L.sheet.crop(0,0,64,64),E(L,"loading",{speed:160,row:0,col:0,length:8,width:u.ICON_WIDTH,height:u.ICON_HEIGHT});var B=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.x=null,this.y=null,this.handBounds={x:4,y:4,width:24,height:24},this.arrowBounds={x:4,y:0,width:6,height:6},this.assets={hand:w.getAssets("hand2").pointer,arrow:w.getAssets("cursor2").pointer},this.swapToComputer()}var e,n,i;return e=t,(n=[{key:"render",value:function(t){}},{key:"swapToComputer",value:function(){this.cursor=this.assets.arrow,this.bounds=this.arrowBounds}},{key:"swapToHand",value:function(){this.cursor=this.assets.hand,this.bounds=this.handBounds}}])&&F(e.prototype,n),i&&F(e,i),t}();function W(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var Y=function(){function t(e,n,i,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.x=e,this.y=n,this.width=i,this.height=r}var e,n,i;return e=t,(n=[{key:"intersects",value:function(t){return this.x<t.x+t.width&&this.x+this.width>t.x&&this.y<t.y+t.height&&this.y+this.height>t.y}}])&&W(e.prototype,n),i&&W(e,i),t}();function U(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function z(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var X=[u.TYPES.INTERACTIVE,u.TYPES.TELEBUTTONS,u.TYPES.COMPUTER_APP,u.TYPES.EMAIL_ITEMS,u.TYPES.EMAIL_INBOX_ITEMS,u.TYPES.FOOTAGE_ITEMS,u.TYPES.FOOTAGE_LIBRARY_ITEMS,u.TYPES.SETTINGS_ITEMS,u.TYPES.SETTINGS_WINDOW_ITEMS],Z=[u.TYPES.TELEBUTTONS,u.TYPES.COMPUTER_APP,u.TYPES.EMAIL_INBOX_ITEMS,u.TYPES.FOOTAGE_LIBRARY_ITEMS,u.TYPES.SETTINGS_WINDOW_ITEMS],V=(u.TYPES.COMPUTER,u.TYPES.COMPUTER_APP,u.TYPES.EMAIL_ITEMS,u.TYPES.EMAIL_INBOX_ITEMS,u.TYPES.FOOTAGE_ITEMS,u.TYPES.FOOTAGE_LIBRARY_ITEMS,u.TYPES.SETTINGS_ITEMS,u.TYPES.SETTINGS_WINDOW_ITEMS,1),q=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.handler=e,this.lastEntityHovered=null,this.cursor=new B,this.entities=[]}var e,n,i;return e=t,(n=[{key:"tick",value:function(t){for(var e=0;e<this.entities.length;e+=1)this.entities[e].tick(t)}},{key:"render",value:function(t){for(var e=0;e<this.entities.length;e+=1){var n=this.entities[e];Z.includes(n.type)||this.entities[e].render(t)}this.cursor.x&&this.cursor.y&&this.cursor.render(t)}},{key:"addEntity",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t.id=V,V+=1,e?this.entities.unshift(t):this.entities.push(t);var n=new Y(t.x+t.bounds.x,t.y+t.bounds.y,t.bounds.width,t.bounds.height);return this.handler.getWorld().getSpatialGrid().insert(n,t),t}},{key:"findEntityByName",value:function(t){return this.entities.find((function(e){return e.name===t}))}},{key:"removeEntity",value:function(t){var e=this.entities.indexOf(t);this.handler.getWorld().getSpatialGrid().remove(new Y(t.x+t.bounds.x,t.y+t.bounds.y,t.bounds.width,t.bounds.height),t),this.entities.splice(e,1),t=void 0}},{key:"findClickableEntityAt",value:function(t,e){var n=new Y(this.cursor.x+this.cursor.bounds.x,this.cursor.y+this.cursor.bounds.y,this.cursor.bounds.width,this.cursor.bounds.height);return U(this.entities).reverse().find((function(t){if(!t.bounds)throw new Error("entity type ".concat(t.type," has no bounds"));var e=new Y(t.x+t.bounds.x,t.y+t.bounds.y,t.bounds.width,t.bounds.height);return n.intersects(e)&&X.includes(t.type)}))}},{key:"mouseClick",value:function(t){var e=t.x,n=t.y,i=this.findClickableEntityAt(e,n);i&&i.wasClickedAt&&i.wasClickedAt(e,n)}},{key:"mouseMove",value:function(t){var e=t.x,n=t.y;this.cursor.x=e,this.cursor.y=n;var i=this.findClickableEntityAt(e,n);i?i&&this.lastEntityHovered&&i.id===this.lastEntityHovered.id||(this.lastEntityHovered&&this.lastEntityHovered.wasBlurred&&this.lastEntityHovered.wasBlurred(),i.wasHoveredAt&&i.wasHoveredAt(e,n),this.lastEntityHovered=i):this.lastEntityHovered&&this.lastEntityHovered.wasBlurred&&(this.lastEntityHovered.wasBlurred(),this.lastEntityHovered=null)}},{key:"getEntitiesByType",value:function(t){return this.entities.filter((function(e){return e.type==t}))}}])&&z(e.prototype,n),i&&z(e,i),t}();function J(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var K=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,i;return e=t,(n=[{key:"construct",value:function(){this.currentState=null}},{key:"getState",value:function(){return this.currentState}},{key:"setState",value:function(t){this.currentState=t}}])&&J(e.prototype,n),i&&J(e,i),t}();function Q(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var $=function(){function t(e,n,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.width=parseInt(e/i),this.height=parseInt(n/i),this.size=i,this.grid=[];for(var r=0;r<=this.width;r++){this.grid[r]=[];for(var o=0;o<=this.height;o++)this.grid[r][o]=[]}}var e,n,i;return e=t,(n=[{key:"insert",value:function(t,e){for(var n=Math.max(0,parseInt(t.x/this.size)),i=Math.max(0,parseInt(t.y/this.size)),r=Math.min(this.width,parseInt((t.x+t.width)/this.size)),o=Math.min(this.height,parseInt((t.y+t.height)/this.size)),a=i;a<=o;a++)for(var s=n;s<=r;s++)-1===this.grid[s][a].indexOf(e)&&this.grid[s][a].push(e)}},{key:"retrieve",value:function(t,e){for(var n=Math.max(0,parseInt(t.x/this.size)),i=Math.max(0,parseInt(t.y/this.size)),r=Math.min(this.width,parseInt((t.x+t.width)/this.size)),o=Math.min(this.height,parseInt((t.y+t.height)/this.size)),a=[],s=i;s<=o;s++)for(var u=n;u<=r;u++)this.grid[u][s].forEach((function(t){t!==e&&-1===a.indexOf(t)&&a.push(t)}));return a}},{key:"remove",value:function(t,e){for(var n=Math.max(0,parseInt(t.x/this.size)),i=Math.max(0,parseInt(t.y/this.size)),r=Math.min(this.width,parseInt((t.x+t.width)/this.size)),o=Math.min(this.height,parseInt((t.y+t.height)/this.size)),a=i;a<=o;a++)for(var s=n;s<=r;s++)for(var u=0;u<this.grid[s][a].length;u++)this.grid[s][a][u]===e&&this.grid[s][a].splice(u,1)}},{key:"reset",value:function(){for(var t=0;t<=this.width;t++){this.grid[t]=[];for(var e=0;e<=this.height;e++)this.grid[t][e]=[]}}},{key:"getWidth",value:function(){return this.width}},{key:"getHeight",value:function(){return this.height}},{key:"getSize",value:function(){return this.size}},{key:"render",value:function(t){for(var e=0;e<=this.height;e++)for(var n=0;n<=this.width;n++){var i=n*this.size,r=e*this.size;t.fillStyle="orange",t.strokeRect(i,r,this.size,this.size),this.grid[n][e].length>0&&(t.fillStyle="yellow",t.fillRect(i,r,this.size,this.size))}}}])&&Q(e.prototype,n),i&&Q(e,i),t}();function tt(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var et=[u.TYPES.GARDEN,u.TYPES.PLOT,u.TYPES.LANE];function nt(t){return(nt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function it(t,e){return!e||"object"!==nt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function rt(t){return(rt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ot(t,e){return(ot=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var at=function(t){function e(t,n,i){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=it(this,rt(e).call(this,t,n,i))).handler=t,r.bounds={x:0,y:0,width:0,height:0},r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ot(t,e)}(e,t),e}(function(){function t(e,n,i,r,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.handler=e,this.x=n,this.y=i,this.bounds=new Y(0,0,this.width,this.height)}var e,n,i;return e=t,(n=[{key:"tick",value:function(){throw new Error("".concat(this.constructor.name," did not implement tick() method"))}},{key:"getCollisionBounds",value:function(t,e){var n=parseInt(this.x+this.bounds.x+t,10),i=parseInt(this.y+this.bounds.y+e);return new Y(n,i,this.bounds.width,this.bounds.height)}},{key:"checkEntityCollisions",value:function(t,e){var n=this.handler.getWorld().getSpatialGrid().retrieve(new Y(this.x+this.bounds.x,this.y+this.bounds.y,this.bounds.width,this.bounds.height),this);n=n.filter((function(t){return!et.includes(t.type)}));for(var i=0;i<n.length;i++)if(n[i].getCollisionBounds(0,0).intersects(this.getCollisionBounds(t,e)))return!0;return!1}},{key:"drawCollisionBounds",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"blue";t.fillStyle=e,t.fillRect(this.x+this.bounds.x,this.y+this.bounds.y,this.bounds.width,this.bounds.height)}},{key:"destroySelf",value:function(){this.handler.getEntityManager().removeEntity(this)}}])&&tt(e.prototype,n),i&&tt(e,i),t}());function st(t){return(st="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ut(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);i=!0);}catch(t){r=!0,o=t}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function ht(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function lt(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function ct(t,e){return!e||"object"!==st(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ft(t){return(ft=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function dt(t,e){return(dt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var yt=function(t){function e(t,n){var i,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return ht(this,e),(i=ct(this,ft(e).call(this,t,r,o))).handler=t,i.name=n,i.nameWidth=t.getGraphicsManager().getGraphics().measureText(i.name).width,i.x=r,i.y=o,i.width=u.ICON_WIDTH,i.height=u.ICON_HEIGHT,i.type=u.TYPES.COMPUTER_APP,i.yPadding=22,i.hovered=!1,i.state="idle",i}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&dt(t,e)}(e,t),n=e,(i=[{key:"tick",value:function(){switch(this.state){case"idle":break;case"loading":var t=this.assets.animations.loading;if(t.index>=t.frames.length-1){this.appLoaded();var e=ut(this.handler.getEntityManager().getEntitiesByType(u.TYPES.COMPUTER),1)[0];if(!e)throw new Error("entity with type ".concat(u.TYPES.COMPUTER," not found."));return e.activeAppName=this.name===u.APPS.CODE_MAN?null:this.name,t.index=0,void(this.state="idle")}t.tick();break;case"inactive":break;default:throw new Error('Computer App animation state "'.concat(this.state," is not accounted for"))}}},{key:"getCurrentAnimationFrame",value:function(){switch(this.state){case"idle":break;case"loading":return this.assets.animations.loading.getCurrentFrame();case"inactive":break;default:throw new Error('Computer App animation state "'.concat(this.state," is not accounted for"))}}},{key:"render",value:function(t){switch(this.state){case"idle":t.drawSprite(this.assets.icon,this.x,this.y,this.width,this.height),this.hovered&&(t.globalAlpha=.4,t.fillStyle="black",t.fillRect(this.x+this.bounds.x-6,this.y+this.bounds.y-6,this.bounds.width+12,this.bounds.height+12+u.FONT_SIZE+2),t.globalAlpha=1);break;case"loading":t.drawSprite(this.getCurrentAnimationFrame(),this.x,this.y,this.width,this.height);break;case"inactive":break;default:throw new Error('Computer App state "'.concat(this.state," is not accounted for"))}}},{key:"wasClickedAt",value:function(t,e){var n=ut(this.handler.getEntityManager().getEntitiesByType(u.TYPES.COMPUTER),1)[0];if(!n)throw new Error("entity with type ".concat(u.TYPES.COMPUTER," not found."));if(n.activeAppName===this.name||!n.activeAppName)switch(this.hovered=!1,this.state){case"idle":this.state="loading";break;case"loading":case"inactive":break;default:throw new Error('Computer App state "'.concat(this.state," is not accounted for during mouseclicked"))}}},{key:"wasHoveredAt",value:function(t,e){"inactive"!==this.state&&"loading"!==this.state&&(this.hovered=!0)}},{key:"wasBlurred",value:function(){"inactive"!==this.state&&"loading"!==this.state&&(this.hovered=!1)}}])&&lt(n.prototype,i),r&&lt(n,r),e}(at);function pt(t){return(pt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function gt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function bt(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function vt(t,e){return!e||"object"!==pt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function wt(t){return(wt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Et(t,e){return(Et=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var mt=function(t){function e(t,n){var i,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3?arguments[3]:void 0;return gt(this,e),(i=vt(this,wt(e).call(this,t,0,0))).x=0,i.y=0,i.bounds={x:0,y:0,width:u.GAME_WIDTH,height:u.GAME_HEIGHT},i.type=u.TYPES.INTERACTIVE,i.textArray=n.text,i.isRead=r,i.sender=n.sender,i.subject=n.subject,o&&(i.unlocksOnOpen=o),i}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Et(t,e)}(e,t),n=e,(i=[{key:"tick",value:function(){}},{key:"drawFadedBackground",value:function(t){var e=this.bounds,n=e.x,i=e.y,r=e.width,o=e.height;t.globalAlpha=.4,t.fillStyle="black",t.fillRect(n,i,r,o),t.globalAlpha=1}},{key:"render",value:function(t){this.drawFadedBackground(t),this.drawPaperAndText(t)}},{key:"drawPaperAndText",value:function(t){var e=u.GAME_WIDTH/8,n=u.GAME_HEIGHT/16,i=u.GAME_WIDTH-2*e,r=u.GAME_HEIGHT-2*n;t.fillStyle="white",t.fillRect(e,n,i,r);for(var o=e+64,a=n+64,s=0;s<this.textArray.length;s+=1)t.drawText(this.textArray[s],o,a,"black",!1,u.BIG_FONT_SIZE),a+=u.BIG_FONT_SIZE+16}},{key:"wasClickedAt",value:function(){this.setHiddenCallback(!1),this.handler.getEntityManager().removeEntity(this)}}])&&bt(n.prototype,i),r&&bt(n,r),e}(at),Tt=n(0);function Ot(t){return(Ot="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function St(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function kt(t,e){return!e||"object"!==Ot(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function It(t){return(It=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _t(t,e){return(_t=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var At=function(t){function e(t,n,i,r,o,a,s,h,l){var c;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(c=kt(this,It(e).call(this,t,n,i))).width=r,c.height=o,c.email=a,c.bgColor=s,c.highlightColor=h,c.hovered=!1,c.bounds={x:-16,y:-26,width:c.width,height:c.height},c.type=u.TYPES.EMAIL_INBOX_ITEMS,c.setHiddenCallback=l,c.hidden=!1,c}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_t(t,e)}(e,t),n=e,(i=[{key:"tick",value:function(){}},{key:"render",value:function(t){if(!this.hidden){var e=this.x,n=this.y,i=this.width,r=this.height;t.fillStyle=this.hovered?this.highlightColor:this.bgColor,t.fillRect(e-16,n-26,i,r),t.fillStyle="black",t.drawText(this.email.sender,this.x,this.y-4,"white",!1,u.EMAIL_ITEM_SIZE),t.drawText(this.email.subject,this.x+224,this.y-4,"white",!1,u.EMAIL_ITEM_SIZE)}}},{key:"wasHoveredAt",value:function(t,e){this.hovered=!0}},{key:"wasBlurred",value:function(){this.hovered=!1}},{key:"wasClickedAt",value:function(){this.setHiddenCallback(!0),this.email.isRead=!0,this.email.setHiddenCallback=this.setHiddenCallback,this.handler.getEntityManager().addEntity(this.email),this.email.unlocksOnOpen&&this.handler.getEmailManager().unlockApp(this.email.unlocksOnOpen)}}])&&St(n.prototype,i),r&&St(n,r),e}(at);function Ct(t){return(Ct="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Pt(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);i=!0);}catch(t){r=!0,o=t}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function Mt(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function xt(t,e){return!e||"object"!==Ct(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ht(t){return(Ht=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Nt(t,e){return(Nt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var jt=function(t){function e(t,n,i){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=xt(this,Ht(e).call(this,t,0,0))).x=0,r.y=0,r.paddingX=u.GAME_WIDTH/8,r.paddingY=u.GAME_HEIGHT/16,r.width=u.GAME_WIDTH-2*r.paddingX,r.height=u.GAME_HEIGHT-2*r.paddingY,r.setActiveCallback=i,r.bounds={x:850,y:64,width:34,height:30},r.type=u.TYPES.EMAIL_ITEMS,r.hidden=!1,r.emails=n,r.assets=w.getAssets("inbox"),r.emailItems=[],r.initializeEmailItems(),r}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Nt(t,e)}(e,t),n=e,(i=[{key:"tick",value:function(){}},{key:"initializeEmailItems",value:function(){for(var t=this.paddingX+16+4,e=this.paddingY+118,n=0;n<this.emails.length;n+=1){var i=this.emails[n],r=n%2?u.COLORS.RED:u.COLORS.PURPLE,o=n%2?u.COLORS.LIGHT_RED:u.COLORS.LIGHT_PURPLE,a=new At(this.handler,t,e,this.width-8,34,i,r,o,this.setHidden.bind(this));this.handler.getEntityManager().addEntity(a),this.emailItems.push(a),e+=36}}},{key:"drawFadedBackground",value:function(t){t.globalAlpha=.4,t.fillStyle="black",t.fillRect(0,0,u.GAME_WIDTH,u.GAME_HEIGHT),t.globalAlpha=1}},{key:"render",value:function(t){this.hidden||(this.drawFadedBackground(t),this.drawInbox(t),this.drawEmailItems(t))}},{key:"setHidden",value:function(t){this.hidden=t;for(var e=0;e<this.emailItems.length;e+=1)this.emailItems[e].hidden=t}},{key:"drawEmailItems",value:function(t){for(var e=0;e<this.emailItems.length;e+=1)this.emailItems[e].render(t)}},{key:"drawInbox",value:function(t){t.drawSprite(this.assets.bg,this.paddingX,this.paddingY,this.width,this.height)}},{key:"wasClickedAt",value:function(){for(var t=this.handler.getEntityManager(),e=0;e<this.emailItems.length;e+=1)t.removeEntity(this.emailItems[e]);var n=Pt(this.handler.getEntityManager().getEntitiesByType(u.TYPES.COMPUTER),1)[0];if(!n)throw new Error("entity with type ".concat(u.TYPES.COMPUTER," not found."));n.activeAppName=null,this.setActiveCallback(),t.removeEntity(this)}}])&&Mt(n.prototype,i),r&&Mt(n,r),e}(at);function Rt(t){return(Rt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Gt(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Dt(t,e){return!e||"object"!==Rt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Lt(t,e,n){return(Lt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Ft(t)););return t}(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function Ft(t){return(Ft=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Bt(t,e){return(Bt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Wt=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Dt(this,Ft(e).call(this,t,u.APPS.EMAIL))).bounds={x:0,y:26,width:n.width,height:36},n.newEmail=!0,n.newFlasher=0,n.newFlasherMax=70,n.textXOffset=10,n.textYOffset=n.height+18,n.assets=w.getAssets("email"),n.emails=[new mt(n.handler,Tt.a,!1,u.APPS.FOOTAGE)],n}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Bt(t,e)}(e,t),n=e,(i=[{key:"setActive",value:function(){this.state="idle"}},{key:"render",value:function(t){Lt(Ft(e.prototype),"render",this).call(this,t),this.newEmail&&"idle"===this.state&&(this.newFlasher+=1,this.newFlasher<this.newFlasherMax/2?(t.fillStyle="black",t.fillRect(this.x+28,this.y+18,50,24),t.fillStyle=u.COLORS.RED,t.fillRect(this.x+30,this.y+20,46,20),t.fillStyle="black",t.drawText("NEW!",this.x+32,this.y+36,u.COLORS.CREAM,!1,16)):this.newFlasher>this.newFlasherMax&&(this.newFlasher=0))}},{key:"addEmail",value:function(t){var e;switch(t){case"second":e=Tt.b;break;default:throw new Error("No email by name ".concat(t," found in emailCopy"))}var n="second"===t?u.APPS.CODE_MAN:void 0;this.emails.push(new mt(this.handler,e,!1,n)),this.newEmail=!0}},{key:"appLoaded",value:function(){this.newEmail=!1,this.handler.getEntityManager().addEntity(new jt(this.handler,this.emails,this.setActive.bind(this)))}}])&&Gt(n.prototype,i),r&&Gt(n,r),e}(yt);function Yt(t){return(Yt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ut(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function zt(t,e){return!e||"object"!==Yt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Xt(t){return(Xt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Zt(t,e){return(Zt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Vt=function(t){function e(t,n,i,r,o,a,s,h,l){var c;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(c=zt(this,Xt(e).call(this,t,n,i))).width=r,c.height=o,c.video=a,c.bgColor=s,c.highlightColor=h,c.hovered=!1,c.bounds={x:-16,y:-26,width:c.width,height:c.height},c.type=u.TYPES.FOOTAGE_LIBRARY_ITEMS,c.setHiddenCallback=l,c.hidden=!1,c}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Zt(t,e)}(e,t),n=e,(i=[{key:"tick",value:function(){}},{key:"render",value:function(t){if(!this.hidden){var e=this.x,n=this.y,i=this.width,r=this.height;t.fillStyle=this.hovered?this.highlightColor:this.bgColor,t.fillRect(e-16,n-26,i,r),t.fillStyle="black",t.drawText(this.video.video.who,this.x,this.y-4,"white",!1,u.EMAIL_ITEM_SIZE),t.drawText(this.video.video.status||"N/A (Please watch video)",this.x+224,this.y-4,"white",!1,u.EMAIL_ITEM_SIZE)}}},{key:"wasHoveredAt",value:function(t,e){this.hovered=!0}},{key:"wasBlurred",value:function(){this.hovered=!1}},{key:"wasClickedAt",value:function(){this.setHiddenCallback(!0),this.video.isViewed=!0,this.video.setHiddenCallback=this.setHiddenCallback,this.handler.getEntityManager().addEntity(this.video)}}])&&Ut(n.prototype,i),r&&Ut(n,r),e}(at);function qt(t){return(qt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Jt(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);i=!0);}catch(t){r=!0,o=t}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function Kt(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Qt(t,e){return!e||"object"!==qt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function $t(t){return($t=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function te(t,e){return(te=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var ee=function(t){function e(t,n,i){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=Qt(this,$t(e).call(this,t,0,0))).x=0,r.y=0,r.paddingX=u.GAME_WIDTH/8,r.paddingY=u.GAME_HEIGHT/16,r.width=u.GAME_WIDTH-2*r.paddingX,r.height=u.GAME_HEIGHT-2*r.paddingY,r.setActiveCallback=i,r.bounds={x:850,y:64,width:34,height:30},r.type=u.TYPES.FOOTAGE_ITEMS,r.hidden=!1,r.footage=n,r.assets=w.getAssets("footageLibrary"),r.footageItems=[],r.initializeFootageItems(),r}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&te(t,e)}(e,t),n=e,(i=[{key:"tick",value:function(){}},{key:"initializeFootageItems",value:function(){for(var t=this.paddingX+16+4,e=this.paddingY+118,n=0;n<this.footage.length;n+=1){var i=this.footage[n],r=n%2?u.COLORS.RED:u.COLORS.PURPLE,o=n%2?u.COLORS.LIGHT_RED:u.COLORS.LIGHT_PURPLE,a=new Vt(this.handler,t,e,this.width-8,34,i,r,o,this.setHidden.bind(this));this.handler.getEntityManager().addEntity(a),this.footageItems.push(a),e+=36}}},{key:"drawFadedBackground",value:function(t){t.globalAlpha=.4,t.fillStyle="black",t.fillRect(0,0,u.GAME_WIDTH,u.GAME_HEIGHT),t.globalAlpha=1}},{key:"render",value:function(t){this.hidden||(this.drawFadedBackground(t),this.drawLibrary(t),this.drawFootageItems(t))}},{key:"setHidden",value:function(t){this.hidden=t;for(var e=0;e<this.footageItems.length;e+=1)this.footageItems[e].hidden=t}},{key:"drawFootageItems",value:function(t){for(var e=0;e<this.footageItems.length;e+=1)this.footageItems[e].render(t)}},{key:"drawLibrary",value:function(t){t.drawSprite(this.assets.bg,this.paddingX,this.paddingY,this.width,this.height)}},{key:"wasClickedAt",value:function(){for(var t=this.handler.getEntityManager(),e=0;e<this.footageItems.length;e+=1)t.removeEntity(this.footageItems[e]);var n=Jt(this.handler.getEntityManager().getEntitiesByType(u.TYPES.COMPUTER),1)[0];if(!n)throw new Error("entity with type ".concat(u.TYPES.COMPUTER," not found."));n.activeAppName=null,t.removeEntity(this),this.setActiveCallback()}}])&&Kt(n.prototype,i),r&&Kt(n,r),e}(at);function ne(t){return(ne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ie(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function re(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function oe(t,e){return!e||"object"!==ne(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ae(t){return(ae=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function se(t,e){return(se=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var ue=function(t){function e(t,n,i,r){var o,a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=arguments.length>5?arguments[5]:void 0;return ie(this,e),(o=oe(this,ae(e).call(this,t,n,i))).x=n,o.y=i,o.bounds={x:0,y:0,width:u.GAME_WIDTH,height:u.GAME_HEIGHT},o.type=u.TYPES.INTERACTIVE,o.isViewed=a,o.video=r,o.increaseWatchedCounterCallback=s,o.states={IDLE:"idle",PLAYING:"playing",FINISHED:"finished"},o.assets=w.getAssets("bigFootage"),o.state=o.states.IDLE,o}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&se(t,e)}(e,t),n=e,(i=[{key:"tick",value:function(){switch(this.state){case this.states.FINISHED:case this.states.IDLE:break;case this.states.PLAYING:var t=this.video.assets.animations[this.states.PLAYING];if(t.index>=t.frames.length-1)return this.video.status="death"===this.video.type?"Deceased":"Alive","alive"===this.video.type&&this.handler.getFootageManager().updateWatchedBestVideo(this.video.clueNumber),void(this.state=this.states.FINISHED);t.tick();break;default:throw new Error("Big Footage unrecognized state: ".concat(this.state))}}},{key:"drawFadedBackground",value:function(t){var e=this.bounds,n=e.x,i=e.y,r=e.width,o=e.height;t.globalAlpha=.4,t.fillStyle="black",t.fillRect(n,i,r,o),t.globalAlpha=1}},{key:"getCurrentAnimationFrame",value:function(){switch(this.state){case this.states.IDLE:break;case this.states.FINISHED:case this.states.PLAYING:return this.video.assets.animations[this.states.PLAYING].getCurrentFrame();default:throw new Error('Big Footage animation state "'.concat(this.state," is not accounted for"))}}},{key:"render",value:function(t){switch(this.drawFadedBackground(t),this.state){case this.states.IDLE:t.drawSprite(this.assets.playButton,this.x,this.y,this.width,this.height);break;case this.states.FINISHED:t.drawSprite(this.getCurrentAnimationFrame(),this.x,this.y,this.width,this.height),t.fillStyle="black",t.globalAlpha=.6,t.fillRect(this.x,this.y,this.assets.playButton.width,this.assets.playButton.height),t.globalAlpha=1,t.fillStyle="black",t.drawText("X",this.x+this.assets.playButton.height+60,this.y+80,"white",!0,64);break;case this.states.PLAYING:t.drawSprite(this.getCurrentAnimationFrame(),this.x,this.y,this.width,this.height);break;default:throw new Error("Big Footage unrecognized state: ".concat(this.state))}}},{key:"wasClickedAt",value:function(){switch(this.state){case this.states.IDLE:this.state=this.states.PLAYING;break;case this.states.PLAYING:break;case this.states.FINISHED:this.video.assets.animations[this.states.PLAYING].index=0,this.setHiddenCallback(!1),this.state=this.states.IDLE,this.increaseWatchedCounterCallback&&this.increaseWatchedCounterCallback(),this.handler.getFootageManager().isLogComplete()&&this.handler.getWorld().gameWon(),this.handler.getEntityManager().removeEntity(this);break;default:throw new Error("Big Footage wasClicked unrecognized state: ".concat(this.state))}}}])&&re(n.prototype,i),r&&re(n,r),e}(at);function he(t){return(he="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function le(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);i=!0);}catch(t){r=!0,o=t}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function ce(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function fe(t){return(fe=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function de(t,e){return(de=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ye(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var pe=function(t){function e(t){var n,i,r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),i=this,(n=!(r=fe(e).call(this,t,u.APPS.FOOTAGE))||"object"!==he(r)&&"function"!=typeof r?ye(i):r).bounds={x:0,y:26,width:n.width,height:36},n.textXOffset=0,n.textYOffset=n.height+18,n.assets=w.getAssets("footage"),n.watchedCounter=0,n.videos={johnDies:{clueNumber:1,who:"John Smith",type:"death",assets:w.getAssets("johnDies")},johnLives:{clueNumber:1,who:"John Smith",type:"alive",assets:w.getAssets("johnLives")},oliviaDies:{clueNumber:2,who:"Olivia Bouqets",type:"death",assets:w.getAssets("oliviaDies")},oliviaLives:{clueNumber:2,who:"Olivia Bouqets",type:"alive",assets:w.getAssets("oliviaLives")},peterDies:{clueNumber:3,who:"Peter Pipers",type:"death",assets:w.getAssets("peterDies")},peterLives:{clueNumber:3,who:"Peter Pipers",type:"alive",assets:w.getAssets("peterLives")}};var o=le(n.handler.getEntityManager().getEntitiesByType(u.TYPES.COMPUTER),1)[0],a={x:o.x,y:o.y};return n.footage=[new ue(n.handler,a.x,a.y,n.videos.johnDies,!1,n.increaseWatchedCounter.bind(ye(ye(n)))),new ue(n.handler,a.x,a.y,n.videos.oliviaDies,!1,n.increaseWatchedCounter.bind(ye(ye(n)))),new ue(n.handler,a.x,a.y,n.videos.peterDies,!1,n.increaseWatchedCounter.bind(ye(ye(n))))],n}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&de(t,e)}(e,t),n=e,(i=[{key:"setActive",value:function(){this.state="idle"}},{key:"increaseWatchedCounter",value:function(){this.watchedCounter+=1,1===this.watchedCounter&&this.handler.getEmailManager().addEmail("second")}},{key:"appLoaded",value:function(){this.handler.getEntityManager().addEntity(new ee(this.handler,this.footage,this.setActive.bind(this)))}},{key:"updateFootage",value:function(t){for(var e=le(this.handler.getEntityManager().getEntitiesByType(u.TYPES.COMPUTER),1)[0],n={x:e.x,y:e.y},i=!1,r=0;r<this.footage.length;r+=1)if(this.footage[r].video.clueNumber===t)switch(t){case 1:this.footage[r]=new ue(this.handler,n.x,n.y,this.videos.johnLives,!1),i=!0;break;case 2:this.footage[r]=new ue(this.handler,n.x,n.y,this.videos.oliviaLives,!1),i=!0;break;case 3:this.footage[r]=new ue(this.handler,n.x,n.y,this.videos.peterLives,!1),i=!0}if(!i)throw new Error("video with clue number ".concat(t," not found in Footage.footage"))}}])&&ce(n.prototype,i),r&&ce(n,r),e}(yt);function ge(t){return(ge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function be(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function ve(t,e){return!e||"object"!==ge(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function we(t){return(we=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ee(t,e){return(Ee=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var me=function(t){function e(t,n,i,r,o,a){var s;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(s=ve(this,we(e).call(this,t,n,i))).width=r,s.height=o,s.hovered=!1,s.setting=a,s.bounds={x:-32,y:0,width:s.width,height:s.height},s.type=u.TYPES.SETTINGS_WINDOW_ITEMS,s.hidden=a.hidden,s.isChecked=a.checked,s.wasToggled=!1,s.assets=w.getAssets("settingsCheck"),s}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ee(t,e)}(e,t),n=e,(i=[{key:"tick",value:function(){}},{key:"render",value:function(t){this.hidden||(this.x,this.y,this.width,this.height,this.hovered&&(t.fillStyle=u.COLORS.LIGHT_PURPLE,t.globalAlpha=.4,t.fillRect(this.x+this.bounds.x,this.y+this.bounds.y,this.bounds.width,this.bounds.height),t.globalAlpha=1,t.fillStyle="black"),t.drawSprite(this.assets.box,this.x,this.y,this.assets.box.width,this.assets.box.height),this.setting.checked&&t.drawSprite(this.assets.check,this.x,this.y,this.assets.box.width,this.assets.box.height),t.drawText(this.setting.label,this.x+50,this.y+32,"black",!1,24))}},{key:"wasHoveredAt",value:function(t,e){this.hovered=!0}},{key:"wasBlurred",value:function(){this.hovered=!1}},{key:"wasClickedAt",value:function(){this.hidden||this.toggled||(this.toggled=!0,this.setting.checked=!this.setting.checked,this.handler.getFootageManager().interveneClue(this.setting.clueNumber))}}])&&be(n.prototype,i),r&&be(n,r),e}(at);function Te(t){return(Te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Oe(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);i=!0);}catch(t){r=!0,o=t}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function Se(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function ke(t,e){return!e||"object"!==Te(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ie(t){return(Ie=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _e(t,e){return(_e=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Ae=function(t){function e(t,n,i,r,o){var a;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(a=ke(this,Ie(e).call(this,t,n,i))).x=n,a.y=i,a.paddingX=50,a.paddingY=50,a.width=416,a.height=278,a.bounds={x:418,y:63,width:36,height:34},a.setActiveCallback=o,a.type=u.TYPES.SETTINGS_ITEMS,a.hidden=!1,a.settings=r,a.assets=w.getAssets("settingsWindow"),a.settingsItems=[],a.initializeSettingsItems(),a}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_e(t,e)}(e,t),n=e,(i=[{key:"tick",value:function(){}},{key:"initializeSettingsItems",value:function(){for(var t=80,e=0;e<this.settings.length;e+=1){var n=this.settings[e],i=new me(this.handler,this.x+32+this.paddingX,this.y+t+this.paddingY,this.width,45,n,this.setHidden.bind(this));this.handler.getEntityManager().addEntity(i),this.settingsItems.push(i),t+=64}}},{key:"drawFadedBackground",value:function(t){t.globalAlpha=.4,t.fillStyle="black",t.fillRect(0,0,u.GAME_WIDTH,u.GAME_HEIGHT),t.globalAlpha=1}},{key:"render",value:function(t){this.hidden||(this.drawFadedBackground(t),this.drawWindow(t),this.drawSettingsItems(t))}},{key:"setHidden",value:function(t){this.hidden=t;for(var e=0;e<this.settingsItems.length;e+=1)this.settingsItems[e].hidden=t}},{key:"drawSettingsItems",value:function(t){for(var e=0;e<this.settingsItems.length;e+=1)this.settingsItems[e].render(t)}},{key:"drawWindow",value:function(t){t.drawSprite(this.assets.bg,this.paddingX+this.x,this.paddingY+this.y,this.width,this.height)}},{key:"wasClickedAt",value:function(){for(var t=this.handler.getEntityManager(),e=0;e<this.settingsItems.length;e+=1)t.removeEntity(this.settingsItems[e]);var n=Oe(this.handler.getEntityManager().getEntitiesByType(u.TYPES.COMPUTER),1)[0];if(!n)throw new Error("entity with type ".concat(u.TYPES.COMPUTER," not found."));n.activeAppName=null,t.removeEntity(this),this.setActiveCallback()}}])&&Se(n.prototype,i),r&&Se(n,r),e}(at);function Ce(t){return(Ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Pe(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);i=!0);}catch(t){r=!0,o=t}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function Me(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function xe(t,e){return!e||"object"!==Ce(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function He(t){return(He=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ne(t,e){return(Ne=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var je=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=xe(this,He(e).call(this,t,u.APPS.SETTINGS))).bounds={x:0,y:8,width:n.width,height:60},n.textXOffset=-2,n.textYOffset=n.height+18,n.assets=w.getAssets("settings"),n.settings=[{clueNumber:1,hidden:!0,label:"Falling Pianos",checked:!0},{clueNumber:2,hidden:!0,label:"UFO Intervention",checked:!1},{clueNumber:3,hidden:!0,label:"Kamikaze Bird",checked:!1}],n}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ne(t,e)}(e,t),n=e,(i=[{key:"showSetting",value:function(t){var e=this.settings[t-1];return!1!==e.hidden&&(e.hidden=!1,!0)}},{key:"setActive",value:function(){this.state="idle"}},{key:"appLoaded",value:function(){var t=Pe(this.handler.getEntityManager().getEntitiesByType(u.TYPES.COMPUTER),1)[0],e={x:t.x,y:t.y};this.handler.getEntityManager().addEntity(new Ae(this.handler,e.x,e.y,this.settings,this.setActive.bind(this)))}}])&&Me(n.prototype,i),r&&Me(n,r),e}(yt);function Re(t){return(Re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ge(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function De(t,e){return!e||"object"!==Re(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Le(t){return(Le=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Fe(t,e){return(Fe=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Be=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=De(this,Le(e).call(this,t,u.APPS.CODE_MAN))).bounds={x:-4,y:0,width:n.width+16,height:64},n.textXOffset=-6,n.textYOffset=n.height+18,n.assets=w.getAssets("codeMan"),n}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Fe(t,e)}(e,t),n=e,(i=[{key:"setActive",value:function(){this.state="idle"}},{key:"badClue",value:function(){this.handler.getWorld().createDialogue(["iNPuT NoT ReCoGNiZeD".toUpperCase(),"TRy aGaiN, HuMaN... :O".toUpperCase()],!0)}},{key:"appLoaded",value:function(){var t=prompt("GIVE YOUR CODE TO CODE MAN NOW:");if(t){var e=!1;switch(t=(t=t.trim()).toUpperCase()){case"BONK":e=this.handler.getSettingsManager().showSetting(1);break;case"UFO":e=this.handler.getSettingsManager().showSetting(2);break;case"BLUE":e=this.handler.getSettingsManager().showSetting(3);break;default:return void this.badClue()}e?this.handler.getWorld().createDialogue(["SySTeM SeTTiNGS HaVe BeeN uPDaTeD".toUpperCase(),"HaVe a NiCe DaY, HuMaN... :)".toUpperCase()],!0):this.handler.getWorld().createDialogue(["I aLReaDY uPDaTeD THaT SeTTiNG".toUpperCase(),"FoR YoU, HuMaN... :|".toUpperCase()],!0)}else this.badClue()}}])&&Ge(n.prototype,i),r&&Ge(n,r),e}(yt);function We(t){return(We="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ye(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);i=!0);}catch(t){r=!0,o=t}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function Ue(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function ze(t,e){return!e||"object"!==We(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Xe(t){return(Xe=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ze(t,e){return(Ze=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Ve=function(t){function e(t,n,i){var r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=ze(this,Xe(e).call(this,t,n,i))).states={OFF:"off",INITIALIZE:"initialize",BOOTING:"booting",IDLE:"idle"},r.width=u.SCREEN_WIDTH,r.height=u.SCREEN_HEIGHT,r.bounds={x:4,y:4,width:r.width-4,height:r.height-4},r.activeAppName=null,r.assets=w.getAssets("os"),r.padding=32,r.iconsPerRow=4,r.bootCounter=0,r.bootWait=0,r.type=u.TYPES.INTERACTIVE;r.handler.getEntityManager();return r.state=r.states.OFF,r}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ze(t,e)}(e,t),n=e,(i=[{key:"initializeApps",value:function(){this.apps=[this.handler.getEntityManager().addEntity(new Wt(this.handler))]}},{key:"addApp",value:function(t){this.apps.push(t),this.handler.getEntityManager().addEntity(t),this.resetAppPositions()}},{key:"resetAppPositions",value:function(){var t=this.x+this.width/2,e=this.y+this.height/2;if(1===this.apps.length){var n=Ye(this.apps,1)[0];return n.x=t-n.bounds.width/2,void(n.y=e-n.bounds.height)}if(2===this.apps.length){var i=Ye(this.apps,2),r=i[0],o=i[1];return r.x=t-r.bounds.width/2-96,r.y=e-r.bounds.height,o.x=t-o.bounds.width/2+96,void(o.y=e-o.bounds.height)}if(3===this.apps.length){var a=Ye(this.apps,3),s=a[0],u=a[1],h=a[2];return s.x=t-s.bounds.width/2-96,s.y=e-s.bounds.height-96+16,u.x=t-u.bounds.width/2+96,u.y=e-u.bounds.height-96+16,h.x=t-h.bounds.width/2,void(h.y=e-u.bounds.height+32+16)}if(4===this.apps.length){var l=Ye(this.apps,4),c=l[0],f=l[1],d=l[2],y=l[3];return c.x=t-c.bounds.width/2-96,c.y=e-c.bounds.height-96+16,f.x=t-f.bounds.width/2+96,f.y=e-f.bounds.height-96+16,d.x=t-c.bounds.width/2-96,d.y=e-c.bounds.height+96-32,y.x=t-f.bounds.width/2+96,void(y.y=e-f.bounds.height+96-32)}throw new Error("apps length is great then expected (".concat(this.apps.length,") in ComputerScreen.resetAppPositions()"))}},{key:"tick",value:function(){switch(this.state){case this.states.OFF:break;case this.states.INITIALIZE:this.initializeApps(),this.resetAppPositions(),this.state=this.states.BOOTING;break;case this.states.IDLE:break;case this.states.BOOTING:var t=this.assets.animations[this.states.BOOTING];if(t.index>=9)return this.bootCounter+=1,void(this.bootCounter>=this.bootWait&&(this.bootCounter=0,this.state=this.states.IDLE));t.tick();break;default:throw new Error('Computer Screen animation state "'.concat(this.state," is not accounted for"))}}},{key:"getCurrentAnimationFrame",value:function(){switch(this.state){case this.states.OFF:case this.states.INITIALIZE:case this.states.IDLE:break;case this.states.BOOTING:return this.assets.animations[this.states.BOOTING].getCurrentFrame();default:throw new Error('Computer App animation state "'.concat(this.state," is not accounted for"))}}},{key:"render",value:function(t){switch(t.fillStyle=this.state===this.states.OFF?"black":u.COLORS.PURPLE,t.fillRect(this.x,this.y,this.width,this.height),this.state){case this.states.OFF:case this.states.INITIALIZE:break;case this.states.IDLE:for(var e=0;e<this.apps.length;e+=1){var n=this.apps[e];t.drawText(n.name,n.x+n.textXOffset,n.y+n.textYOffset,u.COLORS.CREAM,!1),n.render(t)}break;case this.states.BOOTING:this.bootCounter>this.bootWait/4&&(t.globalAlpha-=this.bootCounter/this.bootWait),t.drawSprite(this.getCurrentAnimationFrame(),this.x,this.y,this.width,this.height),t.globalAlpha=1;break;default:throw new Error('Computer App animation state "'.concat(this.state," is not accounted for"))}}},{key:"wasClickedAt",value:function(t,e){this.state===this.states.OFF&&(this.type=u.TYPES.COMPUTER,this.state=this.states.INITIALIZE)}}])&&Ue(n.prototype,i),r&&Ue(n,r),e}(at);function qe(t){return(qe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Je(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ke(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Qe(t,e){return!e||"object"!==qe(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function $e(t){return($e=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function tn(t,e){return(tn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var en=function(t){function e(t,n){var i,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Je(this,e),(i=Qe(this,$e(e).call(this,t,u.DIALOGUE.X,u.DIALOGUE.Y))).x=u.DIALOGUE.X,i.y=u.DIALOGUE.Y,i.width=u.DIALOGUE.WIDTH,i.height=u.DIALOGUE.HEIGHT,i.bounds={x:-i.x,y:-i.y,width:u.GAME_WIDTH,height:u.GAME_HEIGHT},i.fontSize=34,i.textX=i.x+i.fontSize,i.textY=i.y+i.height/2+i.fontSize/3,i.type=u.TYPES.INTERACTIVE,i.dialogue="",i.speechTimer=5,i.wasClicked=!1,i.isRobot=r,i.words=[],i.soundManager=i.handler.getSoundManager(),i.nextCounter=0,i.nextCounterMax=30,i.soundCounter=0,i.soundCounterMax=2,i.addWords(n),i}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&tn(t,e)}(e,t),n=e,(i=[{key:"tick",value:function(){if(!this.words.length)return this.handler.getWorld().dialogueFinished(),void this.handler.getEntityManager().removeEntity(this);this.speechTimer>=2&&this.words.length&&(this.words[0].length?(this.soundCounter+=1,this.soundCounter>this.soundCounterMax&&(this.soundManager.speak(this.isRobot),this.soundCounter=0),this.sayNextLetter()):this.wasClicked&&(this.wasClicked=!1,this.readNextSentence())),this.speechTimer<30&&this.speechTimer++}},{key:"render",value:function(t){this.words[0]&&(t.fillStyle="black",t.globalAlpha=.6,t.fillRect(this.x+this.bounds.x,this.y+this.bounds.y,this.bounds.width,this.bounds.height),t.globalAlpha=1,t.fillStyle="white",t.fillRect(this.x,this.y,this.width,this.height),t.drawText(this.dialogue,this.textX,this.textY,"black",!1,this.fontSize),this.words[0].length||(this.nextCounter+=1,this.nextCounter<this.nextCounterMax/2&&t.drawText(">",this.x+this.width-64,this.y+this.height-16,"black",!1,48),this.nextCounter>=this.nextCounterMax&&(this.nextCounter=0)))}},{key:"readNextSentence",value:function(){this.words.splice(0,1),this.clean()}},{key:"clean",value:function(){this.dialogue="",this.sentencePause=0}},{key:"sayNextLetter",value:function(){var t=this.words[0][0];this.dialogue+=t,this.words[0].splice(0,1),this.speechTimer=0}},{key:"addWords",value:function(t){var e=this;t instanceof Array||(t=[t]),t.forEach((function(t){e.words.push(t.split(""))}))}},{key:"clear",value:function(){this.words=[],this.clean()}},{key:"wasClickedAt",value:function(){this.words[0].length||(this.wasClicked=!0)}}])&&Ke(n.prototype,i),r&&Ke(n,r),e}(at);function nn(t){return(nn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function rn(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function on(t,e){return!e||"object"!==nn(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function an(t){return(an=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function sn(t,e){return(sn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var un=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=on(this,an(e).call(this,t,0,0))).width=u.GAME_WIDTH,n.height=u.GAME_HEIGHT,n.states={INIT:"init",IDLE:"idle"},n.bounds={x:0,y:0,width:0,height:0},n.state=n.states.INIT,n.parentWindow=document.querySelector("#main"),n}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&sn(t,e)}(e,t),n=e,(i=[{key:"initIframe",value:function(){this.wrapper=document.createElement("div");var t=document.createElement("iframe");this.wrapper.style.cursor="auto",this.wrapper.style.width="".concat(this.width,"px"),this.wrapper.style.height="".concat(this.height,"px"),this.wrapper.style.position="absolute",t.style.width=this.wrapper.style.width,t.style.height=this.wrapper.style.height,this.wrapper.setAttribute("z-index","9999"),t.setAttribute("z-index","9998"),t.setAttribute("src",this.src),this.parentWindow.appendChild(this.wrapper),this.wrapper.appendChild(t),this.initGameHeader()}},{key:"initGameHeader",value:function(){var t=document.createElement("div");t.setAttribute("id","game-header");var e=t.style;e.width="".concat(this.width+4,"px"),e.height="40px",e.position="absolute",e.top="0px",e.borderRadius="1%",e.border="2px black solid",t.setAttribute("z-index","9999"),this.wrapper.appendChild(t),this.initGameHeaderStripes(t),this.initGameHeaderCloseButton(t)}},{key:"initGameHeaderStripes",value:function(t){var e=document.createElement("div");e.style.height="100%",e.style.width="95%",e.style.display="inline-block",t.appendChild(e);for(var n=0;n<3;n+=1){var i=document.createElement("div");i.style.height="33%",i.style.backgroundColor=0===n?u.COLORS.PURPLE:1===n?u.COLORS.CREAM:u.COLORS.RED,e.appendChild(i)}}},{key:"initGameHeaderCloseButton",value:function(t){var e=document.createElement("div"),n=e.style;n.display="inline-block",n.width="4%",n.backgroundColor="lightgrey",n.height="80%",n.borderLeftColor="grey",n.borderTopColor="white",n.borderRightColor="white",n.borderBottomColor="grey",n.borderWidth="4px",n.borderStyle="solid",n.position="relative",t.appendChild(e);var i=document.createElement("h2");i.innerHTML="X",i.style.position="absolute",i.style.top="-17px",i.style.right="11px",e.appendChild(i),e.addEventListener("click",this.closeSelf.bind(this))}},{key:"closeSelf",value:function(){this.parentWindow.removeChild(this.wrapper),this.destroySelf()}},{key:"tick",value:function(){switch(this.state){case this.states.INIT:if(!this.src)throw new Error("Easter egg game has no .src!");this.initIframe(),this.state=this.states.IDLE;break;case this.states.IDLE:break;default:throw new Error('Easter Egg Game state "'.concat(this.state," is not accounted for"))}}},{key:"render",value:function(t){}}])&&rn(n.prototype,i),r&&rn(n,r),e}(at);function hn(t){return(hn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ln(t,e){return!e||"object"!==hn(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function cn(t){return(cn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function fn(t,e){return(fn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var dn=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=ln(this,cn(e).call(this,t))).src="https://mccordgh.github.io/js13kgames_2017_entry/",n.title="Me, Myself, and i",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&fn(t,e)}(e,t),e}(un);function yn(t){return(yn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function pn(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function gn(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function bn(t,e){return!e||"object"!==yn(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function vn(t){return(vn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function wn(t,e){return(wn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var En=function(t){function e(t,n,i){var r,o,a;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(a=bn(this,vn(e).call(this,t,n,i))).width=u.RADIO_WIDTH,a.height=u.RADIO_HEIGHT,a.bounds={x:0,y:22,width:a.width,height:a.height-22},a.type=u.TYPES.INTERACTIVE,a.assets=w.getAssets("radio"),a.bannerAssets=w.getAssets("radioBanner"),a.states={OFF:"off",STATION1:"station-1",STATION2:"station-2",STATION3:"station-3"},a.state=a.states.OFF,a.titles=(pn(r={},a.states.STATION1,"Dirt"),pn(r,a.states.STATION2,"Råtten"),pn(r,a.states.STATION3,"B-L-U-E"),r),a.artists=(pn(o={},a.states.STATION1,"The Greebles"),pn(o,a.states.STATION2,"Black Eyeball"),pn(o,a.states.STATION3,"The Clue-sters"),o),a.bannerCounter=0,a.showBannerMax=360,a.showBanner=!1,a}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&wn(t,e)}(e,t),n=e,(i=[{key:"tick",value:function(){this.showBanner&&(this.bannerCounter+=1,this.bannerCounter>=this.showBannerMax&&(this.showBanner=!1,this.bannerCounter=0))}},{key:"startBanner",value:function(){this.bannerCounter=0,this.showBanner=!0}},{key:"render",value:function(t){var e;switch(this.state){case this.states.OFF:e=this.assets.off;break;case this.states.STATION1:e=this.assets.station1;break;case this.states.STATION2:e=this.assets.station2;break;case this.states.STATION3:e=this.assets.station3}t.drawSprite(e,this.x,this.y,this.width,this.height),this.state!==this.states.OFF&&this.showBanner&&this.drawRadioBanner(t)}},{key:"drawRadioBanner",value:function(t){var e=this.x-36,n=this.y+46;t.drawSprite(this.bannerAssets.img,e,n,225,225),e+=40,n+=106,t.drawText("Now Playing:",e,n,"black",!0,18),n+=22,t.drawText(this.titles[this.state],e,n,"black",!0,18),n+=22,t.drawText(this.artists[this.state],e,n,"black",!0,18)}},{key:"wasClickedAt",value:function(t,e){var n=this.handler.getSoundManager();switch(this.state){case this.states.OFF:this.state=this.states.STATION1,n.play("station1");break;case this.states.STATION1:this.state=this.states.STATION2,n.play("station2");break;case this.states.STATION2:this.state=this.states.STATION3,n.play("station3");break;case this.states.STATION3:this.state=this.states.OFF,n.play("bgm")}this.state!==this.states.OFF&&this.startBanner()}}])&&gn(n.prototype,i),r&&gn(n,r),e}(at);function mn(t){return(mn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Tn(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function On(t,e){return!e||"object"!==mn(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Sn(t){return(Sn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function kn(t,e){return(kn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var In=function(t){function e(t,n,i,r,o){var a;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(a=On(this,Sn(e).call(this,t,n,i))).width=u.TELEBUTTON_WIDTH,a.height=u.TELEBUTTON_HEIGHT,a.bounds={x:0,y:0,width:a.width,height:a.height},a.type=u.TYPES.TELEBUTTONS,a.number=r,a.addNumberCallback=o,a}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&kn(t,e)}(e,t),n=e,(i=[{key:"tick",value:function(){}},{key:"render",value:function(t){t.drawText(this.number,this.number.toString().length>1?this.x+7:this.x+11,this.y+21,"black",!0,u.BIG_FONT_SIZE-12)}},{key:"wasClickedAt",value:function(t,e){this.handler.getSoundManager().play("dialing"),this.addNumberCallback(this.number)}}])&&Tn(n.prototype,i),r&&Tn(n,r),e}(at);function _n(t){return(_n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function An(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Cn(t,e){return!e||"object"!==_n(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Pn(t){return(Pn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Mn(t,e){return(Mn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var xn=function(t){function e(t,n,i){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=Cn(this,Pn(e).call(this,t,n,i))).width=248,r.height=185,r.assets=w.getAssets("telephone"),r.buttons=[],r.numberSeries="",r.initializeButtons(),r.states={IDLE:"idle",CALLING:"calling",CALLED:"called"},r.state=r.states.IDLE,r.callingCounter=0,r.callingMax=120,r.seriesFlashTimer=0,r}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Mn(t,e)}(e,t),n=e,(i=[{key:"initializeButtons",value:function(){for(var t=[1,2,3,4,5,6,7,8,42],e=68,n=0,i=0;i<9;i+=1){var r=rndInt(0,t.length-1),o=t[r];t.splice(r,1),i>=3&&i<=5&&(n=-4),i>=6&&i<=8&&(n=-8),i%3==0&&0!==i&&(e+=u.TELEBUTTON_HEIGHT);var a=new In(this.handler,this.x+120+i%3*u.TELEBUTTON_WIDTH+n,this.y+e,o,this.addNumber.bind(this));this.buttons.push(a),this.handler.getEntityManager().addEntity(a)}}},{key:"addNumber",value:function(t){this.state===this.states.IDLE&&(this.numberSeries+=t.toString(),this.numberSeries.length>=7&&(this.handler.getSoundManager().play("phoneRinging"),this.state=this.states.CALLING))}},{key:"endPhoneCall",value:function(){this.numberSeries="",this.state=this.states.IDLE}},{key:"tick",value:function(){switch(this.state){case this.states.IDLE:break;case this.states.CALLING:if(this.callingCounter+=1,this.callingCounter>this.callingMax){if(this.callingCounter=0,this.state=this.states.CALLED,"42424242"===this.numberSeries)return void this.handler.getWorld().addCorrectPhoneDialogue(this.endPhoneCall.bind(this));this.handler.getWorld().addBadPhoneDialogue(this.endPhoneCall.bind(this))}break;default:throw new Error("Telephone tick state not recognized: ".concat(this.state))}}},{key:"render",value:function(t){switch(t.drawSprite(this.assets.img,this.x,this.y,this.width,this.height),this.state){case this.states.CALLING:this.seriesFlashTimer+=1,this.seriesFlashTimer>20&&this.renderNumberSeries(t),this.seriesFlashTimer>39&&(this.seriesFlashTimer=0);break;default:this.renderNumberSeries(t)}this.renderButtons(t)}},{key:"renderNumberSeries",value:function(t){var e=this.numberSeries;this.numberSeries.length>3&&(e="".concat(this.numberSeries.substring(0,3),"-").concat(this.numberSeries.substring(3,this.numberSeries.length))),t.drawText(e,this.x+135,this.y+50,"black",!0,u.BIG_FONT_SIZE-16)}},{key:"renderButtons",value:function(t){for(var e=0;e<this.buttons.length;e+=1)this.buttons[e].render(t)}}])&&An(n.prototype,i),r&&An(n,r),e}(at);function Hn(t){return(Hn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Nn(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function jn(t,e){return!e||"object"!==Hn(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Rn(t){return(Rn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Gn(t,e){return(Gn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Dn=function(t){function e(t,n,i){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=jn(this,Rn(e).call(this,t,n,i))).width=192,r.height=192,r.bounds={x:0,y:0,width:r.width,height:r.height},r.assets=w.getAssets("wallPaper"),r.states={ONE:"one",TWO:"two",THREE:"three",FOUR:"four",FIVE:"five"},r.state=r.states.ONE,r.type=u.TYPES.INTERACTIVE,r}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Gn(t,e)}(e,t),n=e,(i=[{key:"tick",value:function(){}},{key:"render",value:function(t){t.drawSprite(this.assets[this.state],this.x,this.y,this.width,this.height)}},{key:"wasClickedAt",value:function(){switch(this.state){case this.states.ONE:this.state=this.states.TWO;break;case this.states.TWO:this.state=this.states.THREE;break;case this.states.THREE:this.state=this.states.FOUR;break;case this.states.FOUR:this.state=this.states.FIVE;break;case this.states.FIVE:break;default:throw new Error("WallPaperTear state ".concat(this.state," not recognized in wasClickedAt"))}}}])&&Nn(n.prototype,i),r&&Nn(n,r),e}(at);function Ln(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var Fn=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.handler=e,this.entityManager=e.createEntityManager(),this.assets={background:w.getAssets("background").image},this.spatialGrid=new $(u.GAME_WIDTH,u.GAME_HEIGHT,u.SPATIAL_GRID_SIZE),this.states={INITIALIZE:"initialize",INTRO:"intro",IDLE:"idle",TEST:"test",TEST_INIT:"test-init",GAME_WON:"game-won"},this.state=this.states.INITIALIZE}var e,n,i;return e=t,(n=[{key:"addCorrectPhoneDialogue",value:function(t){this.dialogue=this.entityManager.addEntity(new en(this.handler,["Hello? HELLO????","Listen keep your voice down... OKAY?!","I'm not supposed to tell you this, but...","The clue is BONK."])),t()}},{key:"addBadPhoneDialogue",value:function(t){this.dialogue=this.entityManager.addEntity(new en(this.handler,["No answer..."])),t()}},{key:"createDialogue",value:function(t){this.dialogue=this.entityManager.addEntity(new en(this.handler,t,!0))}},{key:"initDialogue",value:function(){this.dialogue=this.entityManager.addEntity(new en(this.handler,["Hey, newbie!","Looks like the manager is out sick today...","I bet you can figure this one out on your own, though.","Boot up that computer and check your email!"]))}},{key:"gameWon",value:function(){this.dialogue=this.entityManager.addEntity(new en(this.handler,["Yo, newbie! You did it!","Looks like John Smith is alive!","Great Job!","Also we need you in on Saturday..."])),this.state=this.states.GAME_WON}},{key:"dialogueFinished",value:function(t){switch(this.state){case this.states.INITIALIZE:case this.states.IDLE:break;case this.states.INTRO:this.entityManager.addEntity(new Dn(this.handler,832,120)),this.state=this.states.IDLE;break;case this.states.GAME_WON:break;default:throw new Error('World One dialogue finished state "'.concat(this.state," is not accounted for"))}}},{key:"loadEntities",value:function(){var t=this;[new Ve(this.handler,256,136),new En(this.handler,52,62),new xn(this.handler,0,480)].forEach((function(e){t.entityManager.addEntity(e)}))}},{key:"tick",value:function(t){switch(this.state){case this.states.TEST_INIT:this.entityManager.addEntity(new dn(this.handler)),this.state=this.states.IDLE;break;case this.states.TEST:break;case this.states.INITIALIZE:this.initDialogue(),this.state=this.states.INTRO;break;case this.states.GAME_WON:case this.states.INTRO:this.dialogue&&this.dialogue.tick();break;case this.states.IDLE:break;default:throw new Error('World One animation state "'.concat(this.state," is not accounted for"))}this.entityManager.tick(t)}},{key:"render",value:function(t){switch(this.drawBackground(t),this.state){case this.states.TEST_INIT:case this.states.INITIALIZE:break;case this.states.GAME_WON:case this.states.INTRO:this.dialogue&&this.dialogue.render(t);break;case this.states.TEST:case this.states.IDLE:break;default:throw new Error('World One state "'.concat(this.state," is not accounted for"))}this.entityManager.render(t)}},{key:"init",value:function(){this.loadEntities()}},{key:"drawBackground",value:function(t){var e=this.assets.background;t.drawSprite(e)}},{key:"getSpatialGrid",value:function(){return this.spatialGrid}}])&&Ln(e.prototype,n),i&&Ln(e,i),t}();function Bn(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);i=!0);}catch(t){r=!0,o=t}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function Wn(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var Yn=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.handler=e}var e,n,i;return e=t,(n=[{key:"unlockApp",value:function(t){var e=Bn(this.handler.getEntityManager().getEntitiesByType(u.TYPES.COMPUTER),1)[0];if(!e)throw new Error("entity with type ".concat(u.TYPES.COMPUTER," not found."));switch(t){case u.APPS.FOOTAGE:this.appExistsOnComputer(e,u.APPS.FOOTAGE)||e.addApp(new pe(this.handler));break;case u.APPS.CODE_MAN:this.appExistsOnComputer(e,u.APPS.CODE_MAN)||e.addApp(new Be(this.handler));break;default:throw new Error("".concat(t," is not a valid app name to unlock"))}}},{key:"addEmail",value:function(t){var e=this.handler.getEntityManager().findEntityByName(u.APPS.EMAIL);if(!e)throw new Error("App with name ".concat(u.APPS.EMAIL," not found!"));e.addEmail(t)}},{key:"appExistsOnComputer",value:function(t,e){return!!t.apps.find((function(t){return t.name===e}))}}])&&Wn(e.prototype,n),i&&Wn(e,i),t}();function Un(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var zn=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.handler=e,this.log={john:{number:1,name:"John Smith",intervened:!1,watchedBestVideo:!1},olivia:{number:2,name:"Olivia Bouqets",intervened:!1,watchedBestVideo:!1},peter:{number:3,name:"Peter Pipers",intervened:!1,watchedBestVideo:!1}}}var e,n,i;return e=t,(n=[{key:"interveneClue",value:function(t){switch(t){case 1:this.log.john.intervened=!0;break;case 2:this.log.olivia.intervened=!0;break;case 3:this.log.peter.intervened=!0;break;default:throw new Error("clue number ".concat(t," not recognized in FootageManager.interveneClue"))}var e=this.handler.getEntityManager().findEntityByName(u.APPS.FOOTAGE);if(!e)throw new Error("Footage ".concat(name," not found in FootageManager.updateIntervened"));e.updateFootage(t)}},{key:"updateWatchedBestVideo",value:function(t){switch(t){case 1:this.log.john.watchedBestVideo=!0;break;case 2:this.log.olivia.watchedBestVideo=!0;break;case 3:this.log.peter.watchedBestVideo=!0;break;default:throw new Error("clue number ".concat(t," not recognized in FootageManager.interveneClue"))}}},{key:"isLogComplete",value:function(){return!!(this.log.john.intervened&&this.log.olivia.watchedBestVideo&&this.log.olivia.intervened&&this.log.peter.watchedBestVideo&&this.log.peter.intervened&&this.log.peter.watchedBestVideo)}}])&&Un(e.prototype,n),i&&Un(e,i),t}();function Xn(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var Zn=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.sources={bgm:{source:this.getMusic("bgm"),loops:!0},station1:{source:this.getMusic("station1"),loops:!0},station2:{source:this.getMusic("station2"),loops:!0},station3:{source:this.getMusic("station3"),loops:!0},phoneRinging:{source:this.getMusic("phone-ringing"),loops:!1},dialing:{source:this.getMusic("dialing"),loops:!1},speak1:{source:this.getMusic("speak-1"),loops:!1},speak2:{source:this.getMusic("speak-2"),loops:!1},speak3:{source:this.getMusic("speak-3"),loops:!1},roboSpeak1:{source:this.getMusic("robo-speak-1"),loops:!1},roboSpeak2:{source:this.getMusic("robo-speak-2"),loops:!1},roboSpeak3:{source:this.getMusic("robo-speak-3"),loops:!1}};this.sources.bgm;this.lastSoundPlayed=null}var e,n,i;return e=t,(n=[{key:"getMusic",value:function(t){return"".concat(u.MUSIC_PATH,"/").concat(t,".mp3")}},{key:"stopSound",value:function(t){t.pause(),t.currentTime=0,t.src=""}},{key:"initSound",value:function(t,e){var n=new Audio(t.source);return n.loop=t.loops,n.volume=e,n}},{key:"speak",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];t?this.play("roboSpeak"+rndInt(1,3),.35):this.play("speak"+rndInt(1,3),.2)}},{key:"play",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.8,n=this.sources[t];if(n)try{this.lastSoundPlayed&&n.loops&&this.stopSound(this.lastSoundPlayed);var i=this.initSound(n,e);return i.play(),this.lastSoundPlayed=i,i}catch(t){throw new Error(t)}throw new Error('Sound with name "'.concat(t,'" not found.'))}}])&&Xn(e.prototype,n),i&&Xn(e,i),t}();function Vn(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);i=!0);}catch(t){r=!0,o=t}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function qn(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var Jn=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.handler=e}var e,n,i;return e=t,(n=[{key:"showSetting",value:function(t){var e=this.handler.getEntityManager().findEntityByName(u.APPS.SETTINGS);return e||(e=new je(this.handler),Vn(this.handler.getEntityManager().getEntitiesByType(u.TYPES.COMPUTER),1)[0].addApp(e)),e.showSetting(t)}}])&&qn(e.prototype,n),i&&qn(e,i),t}();function Kn(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var Qn=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.game=e,this.entityManager=null,this.graphicsManager=null,this.monsterManager=null,this.mouseManager=null,this.seedManager=null,this.stateManager=null,this.uiManager=null,this.world=null}var e,n,i;return e=t,(n=[{key:"getEmailManager",value:function(){return this.emailManager}},{key:"getFootageManager",value:function(){return this.footageManager}},{key:"getEntityManager",value:function(){return this.entityManager}},{key:"getGame",value:function(){return this.game}},{key:"getGraphicsManager",value:function(){return this.graphicsManager}},{key:"getMouseManager",value:function(){return this.mouseManager}},{key:"getSettingsManager",value:function(){return this.settingsManager}},{key:"getSoundManager",value:function(){return this.soundManager}},{key:"getWorld",value:function(){return this.world}},{key:"createEntityManager",value:function(){return this.entityManager=new q(this)}},{key:"createEmailManager",value:function(){return this.emailManager=new Yn(this)}},{key:"createFootageManager",value:function(){return this.footageManager=new zn(this)}},{key:"createGraphicsManager",value:function(){return this.graphicsManager=new l}},{key:"createMouseManager",value:function(){return this.mouseManager=new a(this)}},{key:"createSettingsManager",value:function(){return this.settingsManager=new Jn(this)}},{key:"createSoundManager",value:function(){return this.soundManager=new Zn(this)}},{key:"createStateManager",value:function(){return this.stateManager=new K}},{key:"setWorld",value:function(t){return this.world=t}},{key:"updateWorld",value:function(t){this.setWorld(t);var e=new r(this,t);this.stateManager.setState(e)}},{key:"event",value:function(t,e){"click"===t&&this.entityManager.mouseClick(e),"move"===t&&this.entityManager.mouseMove(e)}}])&&Kn(e.prototype,n),i&&Kn(e,i),t}();function $n(t){return($n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ti(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function ei(t,e){return!e||"object"!==$n(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ni(t){return(ni=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ii(t,e){return(ii=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var ri=function(t){function e(t,n,i){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=ei(this,ni(e).call(this,t,n,i))).width=u.GAME_WIDTH,r.height=u.GAME_HEIGHT,r.bounds={x:0,y:0,width:r.width,height:r.height},r.type=u.TYPES.INTERACTIVE,r}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ii(t,e)}(e,t),n=e,(i=[{key:"tick",value:function(){}},{key:"render",value:function(t){t.drawText("ACME Time Fixers",400,300,u.COLORS.CREAM,!0,u.BIG_FONT_SIZE),t.drawText("Click Here to Begin.",400,400,u.COLORS.CREAM,!0,u.BIG_FONT_SIZE)}},{key:"wasClickedAt",value:function(){var t=new Fn(this.handler);this.handler.updateWorld(t),t.init(),this.handler.getSoundManager().play("bgm")}}])&&ti(n.prototype,i),r&&ti(n,r),e}(at);function oi(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var ai=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.handler=e,this.entityManager=e.createEntityManager(),this.spatialGrid=new $(u.GAME_WIDTH,u.GAME_HEIGHT,u.SPATIAL_GRID_SIZE),this.states={INITIALIZE:"initialize"},this.state=this.states.INITIALIZE}var e,n,i;return e=t,(n=[{key:"tick",value:function(t){this.entityManager.tick(t)}},{key:"render",value:function(t){this.entityManager.render(t)}},{key:"init",value:function(){this.entityManager.addEntity(new ri(this.handler,0,0))}},{key:"getSpatialGrid",value:function(){return this.spatialGrid}}])&&oi(e.prototype,n),i&&oi(e,i),t}();function si(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var ui=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,i;return e=t,(n=[{key:"initialize",value:function(){this.managerHandler=new Qn(this),this.graphicsManager=this.managerHandler.createGraphicsManager(),this.stateManager=this.managerHandler.createStateManager(),this.mouseManager=this.managerHandler.createMouseManager(),this.managerHandler.createEmailManager(),this.managerHandler.createFootageManager(),this.managerHandler.createSoundManager(),this.managerHandler.createSettingsManager();var t=new ai(this.managerHandler);this.managerHandler.setWorld(t),t.init();var e=new r(this.managerHandler,t);this.stateManager.setState(e)}},{key:"run",value:function(){var t=this;this.initialize();var e=1e3/u.FPS,n=0,i=a/1e3,r=Date.now(),o=r,a=0;!function s(){r=Date.now(),n=r-o,o=r,(a+=n)>=e&&(i=a/1e3,t.tick(i),t.render(t.graphicsManager.getGraphics()),a=0),window.requestAnimationFrame(s)}()}},{key:"tick",value:function(t){this.stateManager.getState().tick(t)}},{key:"render",value:function(t){t.clearRect(0,0,u.GAME_WIDTH,u.GAME_HEIGHT),this.stateManager.getState().render(t)}}])&&si(e.prototype,n),i&&si(e,i),t}();document.title="Gamedev.js 2020",window.rndIndex=function(t){return t[Math.floor(Math.random()*t.length)]},window.rndInt=function(t,e){return Math.floor(Math.random()*(e-t+1))+t},(new ui).run()}]);