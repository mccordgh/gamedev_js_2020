!function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(i,r,function(e){return t[e]}.bind(null,r));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=1)}([function(t){t.exports={a:{sender:"MGMT",subject:"Re: John Smith",text:["Regarding John:","","There has been an incident with John Smith.","","I've given you access to the Footage app.","Please review the footage of John.","We need him alive...","","Thanks,","MGMT"]}}},function(t,e,n){"use strict";function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}n.r(e);var r=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.managerHandler=e,this.world=n}var e,n,r;return e=t,(n=[{key:"tick",value:function(t){this.world.tick(t)}},{key:"render",value:function(t){this.world.render(t)}},{key:"getManagerHandler",value:function(){return this.managerHandler}},{key:"getWorld",value:function(){return this.world}},{key:"setWorld",value:function(t){this.world=t}}])&&i(e.prototype,n),r&&i(e,r),t}();function o(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var a=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.managerHandler=e,this.initializeEvents()}var e,n,i;return e=t,(n=[{key:"getMouseXFromEvent",value:function(t){return t.offsetX}},{key:"getMouseYFromEvent",value:function(t){return t.offsetY}},{key:"initializeEvents",value:function(){var t=this,e=this.managerHandler.getGraphicsManager().getCanvas();e.onclick=function(e){var n=t.getMouseXFromEvent(e),i=t.getMouseYFromEvent(e);t.managerHandler.event("click",{x:n,y:i})},e.onmousemove=function(e){var n=t.getMouseXFromEvent(e),i=t.getMouseYFromEvent(e);t.managerHandler.event("move",{x:n,y:i})}}}])&&o(e.prototype,n),i&&o(e,i),t}(),s=window.location.href,u={BIG_FONT_SIZE:32,FONT_SIZE:18,EMAIL_ITEM_SIZE:16,APP_NAME_SIZE:16,APPS:{FOOTAGE:"Footage",EMAIL:"Email"},COLORS:{PURPLE:"#7B538F",LIGHT_PURPLE:"#BD7FDB",DARK_PURPLE:"#4F355C",CREAM:"#FCEDC3",RED:"#FF2F4C",LIGHT_RED:"#FF7A8C",DARK_RED:"#803D46"},FPS:60,DIALOGUE:{X:64,Y:448,WIDTH:896,HEIGHT:256/1.5},SCREEN_WIDTH:512,SCREEN_HEIGHT:384,GAME_WIDTH:1024,GAME_HEIGHT:768,ICON_HEIGHT:64,ICON_WIDTH:64,SPATIAL_GRID_SIZE:64,TYPES:{EMAIL_ITEMS:"email-items",EMAIL_INBOX_ITEMS:"email-inbox-items",FOOTAGE_ITEMS:"footage-items",FOOTAGE_LIBRARY_ITEMS:"footage-library-items",INTERACTIVE:"interactive",COMPUTER:"computer",COMPUTER_APP:"computer-app"},FINGER_WIDTH:16,BASE_PATH:s=s.replace(/index.html/,""),ASSETS_PATH:"".concat(s,"src/resources")};function h(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var c=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.customizeContext(),this.initializeCanvas(),this.initializeGraphics()}var e,n,i;return e=t,(n=[{key:"customizeContext",value:function(){var t=this;CanvasRenderingContext2D.prototype.drawSprite=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0;r||(r=e.width),o||(o=e.height),t.graphics.drawImage(e.sheet,e.x,e.y,e.width,e.height,n,i,r,o)},CanvasRenderingContext2D.prototype.drawText=function(e,n,i){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:u.COLORS.CREAM,o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:u.FONT_SIZE;t.graphics.font="".concat(a,"px Arial"),o&&(t.graphics.fillStyle="black",t.graphics.fillText(e,n-1,i+1)),t.graphics.fillStyle=r,t.graphics.fillText(e,n,i)}}},{key:"initializeCanvas",value:function(){this.canvas=document.querySelector("#canvas"),this.canvas.setAttribute("width",u.GAME_WIDTH),this.canvas.setAttribute("height",u.GAME_HEIGHT)}},{key:"initializeGraphics",value:function(){this.graphics=this.canvas.getContext("2d"),this.graphics.imageSmoothingEnabled=!1,this.graphics.webkitImageSmoothingEnabled=!1}},{key:"getCanvas",value:function(){return this.canvas}},{key:"getGraphics",value:function(){return this.graphics}}])&&h(e.prototype,n),i&&h(e,i),t}();function l(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var f=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.frames=e,this.index=0,this.lastTime=Date.now(),this.timer=0,this.speed=this.frames[this.index].speed}var e,n,i;return e=t,(n=[{key:"tick",value:function(){if(this.timer+=Date.now()-this.lastTime,this.lastTime=Date.now(),!this.speed)throw new Error("SPEED NOT DEFINED FOR",this);this.timer>=this.speed&&(this.index+=1,this.timer=0,this.index>=this.frames.length&&(this.index=0))}},{key:"getCurrentFrame",value:function(){return this.frames[this.index].frame}}])&&l(e.prototype,n),i&&l(e,i),t}();function d(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var y=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,i;return e=t,i=[{key:"loadImage",value:function(t){var e=new Image;return e.src=t,e}}],(n=null)&&d(e.prototype,n),i&&d(e,i),t}();function p(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var g=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.sheet=e}var e,n,i;return e=t,(n=[{key:"crop",value:function(t,e,n,i){return{sheet:this.sheet,x:t,y:e,width:n,height:i}}}])&&p(e.prototype,n),i&&p(e,i),t}();function b(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var v={},w=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),v[e]=this,this.name=e,this.path="".concat(u.ASSETS_PATH,"/").concat(n),this.sheet=new g(y.loadImage(this.path)),this.animations={}}var e,n,i;return e=t,i=[{key:"getAssets",value:function(t){return v[t]}}],(n=[{key:"addAnimation",value:function(t,e){this.animations[t]=e}}])&&b(e.prototype,n),i&&b(e,i),t}(),E=function(t,e,n){n.frames=[];for(var i=n.col;i<n.length+n.col;i+=1)n.frames.push({frame:t.sheet.crop(n.width*i,n.height*n.row,n.width,n.height),speed:n.speed});t.addAnimation(e,new f(n.frames))},m=new w("cursor","cursor.png");m.pointer=m.sheet.crop(0,0,49,56);var k=new w("cursor2","cursor2.png");k.pointer=k.sheet.crop(0,0,32,32);var I=new w("whiteCursor","white-cursor.png");I.pointer=I.sheet.crop(0,0,32,32);var O=new w("hand","hand.png");O.pointer=O.sheet.crop(0,0,64,64);var T=new w("hand2","hand2.png");T.pointer=T.sheet.crop(0,0,32,32);var S=new w("background","gameJamBg.png");S.image=S.sheet.crop(0,0,u.GAME_WIDTH,u.GAME_HEIGHT);var _=new w("email","email.png");_.icon=_.sheet.crop(0,0,u.ICON_WIDTH,u.ICON_HEIGHT),E(_,"loading",{speed:240,row:0,col:0,length:10,width:u.ICON_WIDTH,height:u.ICON_HEIGHT});var A=new w("footage","footage.png");A.icon=A.sheet.crop(0,0,u.ICON_WIDTH,u.ICON_HEIGHT),E(A,"loading",{speed:240,row:0,col:0,length:10,width:u.ICON_WIDTH,height:u.ICON_HEIGHT});var M=new w("bigFootage","big-footage.png");M.playButton=M.sheet.crop(0,0,u.SCREEN_WIDTH,u.SCREEN_HEIGHT),E(new w("johnDies","john-dies.png"),"playing",{speed:200,row:0,col:0,length:10,width:u.SCREEN_WIDTH,height:u.SCREEN_HEIGHT}),E(new w("johnLives","john-lives.png"),"playing",{speed:200,row:0,col:0,length:10,width:u.SCREEN_WIDTH,height:u.SCREEN_HEIGHT}),E(new w("os","jam-os-bootup.png"),"booting",{speed:300,row:0,col:0,length:10,width:u.SCREEN_WIDTH,height:u.SCREEN_HEIGHT});var P=new w("inbox","inbox-bg.png");P.bg=P.sheet.crop(0,0,768,672);var x=new w("footageLibrary","footage-library-bg.png");function C(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}x.bg=x.sheet.crop(0,0,768,672);var H=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.x=null,this.y=null,this.handBounds={x:4,y:4,width:24,height:24},this.arrowBounds={x:0,y:0,width:12,height:12},this.assets={hand:w.getAssets("hand2").pointer,arrow:w.getAssets("cursor2").pointer},this.swapToComputer()}var e,n,i;return e=t,(n=[{key:"render",value:function(t){var e=this.cursor===this.assets.hand,n=e?16:0,i=e?64:32;t.drawSprite(this.cursor,this.x-n,this.y-n,i,i)}},{key:"swapToComputer",value:function(){this.cursor=this.assets.arrow,this.bounds=this.arrowBounds}},{key:"swapToHand",value:function(){this.cursor=this.assets.hand,this.bounds=this.handBounds}}])&&C(e.prototype,n),i&&C(e,i),t}();function j(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var G=function(){function t(e,n,i,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.x=e,this.y=n,this.width=i,this.height=r}var e,n,i;return e=t,(n=[{key:"intersects",value:function(t){return this.x<t.x+t.width&&this.x+this.width>t.x&&this.y<t.y+t.height&&this.y+this.height>t.y}}])&&j(e.prototype,n),i&&j(e,i),t}();function R(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function L(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var N=[u.TYPES.INTERACTIVE,u.TYPES.COMPUTER_APP,u.TYPES.EMAIL_ITEMS,u.TYPES.EMAIL_INBOX_ITEMS,u.TYPES.FOOTAGE_ITEMS,u.TYPES.FOOTAGE_LIBRARY_ITEMS],D=[u.TYPES.COMPUTER_APP,u.TYPES.EMAIL_INBOX_ITEMS,u.TYPES.FOOTAGE_LIBRARY_ITEMS],F=(u.TYPES.COMPUTER,u.TYPES.COMPUTER_APP,u.TYPES.EMAIL_ITEMS,u.TYPES.EMAIL_INBOX_ITEMS,u.TYPES.FOOTAGE_ITEMS,u.TYPES.FOOTAGE_LIBRARY_ITEMS,1),B=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.handler=e,this.lastEntityHovered=null,this.cursor=new H,this.entities=[]}var e,n,i;return e=t,(n=[{key:"tick",value:function(t){for(var e=0;e<this.entities.length;e+=1)this.entities[e].tick(t)}},{key:"render",value:function(t){for(var e=0;e<this.entities.length;e+=1){var n=this.entities[e];D.includes(n.type)||this.entities[e].render(t)}this.cursor.x&&this.cursor.y&&this.cursor.render(t)}},{key:"addEntity",value:function(t){t.id=F,F+=1,this.entities.push(t);var e=new G(t.x+t.bounds.x,t.y+t.bounds.y,t.bounds.width,t.bounds.height);return this.handler.getWorld().getSpatialGrid().insert(e,t),t}},{key:"findEntityByName",value:function(t){return this.entities.find((function(e){return e.name===t}))}},{key:"removeEntity",value:function(t){var e=this.entities.indexOf(t);this.handler.getWorld().getSpatialGrid().remove(new G(t.x+t.bounds.x,t.y+t.bounds.y,t.bounds.width,t.bounds.height),t),this.entities.splice(e,1),t=void 0}},{key:"findClickableEntityAt",value:function(t,e){var n=new G(this.cursor.x+this.cursor.bounds.x,this.cursor.y+this.cursor.bounds.y,this.cursor.bounds.width,this.cursor.bounds.height);return R(this.entities).reverse().find((function(t){if(!t.bounds)throw new Error("entity type ".concat(t.type," has no bounds"));var e=new G(t.x+t.bounds.x,t.y+t.bounds.y,t.bounds.width,t.bounds.height);return n.intersects(e)&&N.includes(t.type)}))}},{key:"mouseClick",value:function(t){var e=t.x,n=t.y,i=this.findClickableEntityAt(e,n);i&&i.wasClickedAt&&i.wasClickedAt(e,n)}},{key:"mouseMove",value:function(t){var e=t.x,n=t.y;this.cursor.x=e,this.cursor.y=n;var i=this.findClickableEntityAt(e,n);i?i&&this.lastEntityHovered&&i.id===this.lastEntityHovered.id||(this.lastEntityHovered&&this.lastEntityHovered.wasBlurred&&this.lastEntityHovered.wasBlurred(),i.wasHoveredAt&&i.wasHoveredAt(e,n),this.lastEntityHovered=i):this.lastEntityHovered&&this.lastEntityHovered.wasBlurred&&(this.lastEntityHovered.wasBlurred(),this.lastEntityHovered=null)}},{key:"getEntitiesByType",value:function(t){return this.entities.filter((function(e){return e.type==t}))}}])&&L(e.prototype,n),i&&L(e,i),t}();function W(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var Y=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,i;return e=t,(n=[{key:"construct",value:function(){this.currentState=null}},{key:"getState",value:function(){return this.currentState}},{key:"setState",value:function(t){this.currentState=t}}])&&W(e.prototype,n),i&&W(e,i),t}();function z(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var U=function(){function t(e,n,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.width=parseInt(e/i),this.height=parseInt(n/i),this.size=i,this.grid=[];for(var r=0;r<=this.width;r++){this.grid[r]=[];for(var o=0;o<=this.height;o++)this.grid[r][o]=[]}}var e,n,i;return e=t,(n=[{key:"insert",value:function(t,e){for(var n=Math.max(0,parseInt(t.x/this.size)),i=Math.max(0,parseInt(t.y/this.size)),r=Math.min(this.width,parseInt((t.x+t.width)/this.size)),o=Math.min(this.height,parseInt((t.y+t.height)/this.size)),a=i;a<=o;a++)for(var s=n;s<=r;s++)-1===this.grid[s][a].indexOf(e)&&this.grid[s][a].push(e)}},{key:"retrieve",value:function(t,e){for(var n=Math.max(0,parseInt(t.x/this.size)),i=Math.max(0,parseInt(t.y/this.size)),r=Math.min(this.width,parseInt((t.x+t.width)/this.size)),o=Math.min(this.height,parseInt((t.y+t.height)/this.size)),a=[],s=i;s<=o;s++)for(var u=n;u<=r;u++)this.grid[u][s].forEach((function(t){t!==e&&-1===a.indexOf(t)&&a.push(t)}));return a}},{key:"remove",value:function(t,e){for(var n=Math.max(0,parseInt(t.x/this.size)),i=Math.max(0,parseInt(t.y/this.size)),r=Math.min(this.width,parseInt((t.x+t.width)/this.size)),o=Math.min(this.height,parseInt((t.y+t.height)/this.size)),a=i;a<=o;a++)for(var s=n;s<=r;s++)for(var u=0;u<this.grid[s][a].length;u++)this.grid[s][a][u]===e&&this.grid[s][a].splice(u,1)}},{key:"reset",value:function(){for(var t=0;t<=this.width;t++){this.grid[t]=[];for(var e=0;e<=this.height;e++)this.grid[t][e]=[]}}},{key:"getWidth",value:function(){return this.width}},{key:"getHeight",value:function(){return this.height}},{key:"getSize",value:function(){return this.size}},{key:"render",value:function(t){for(var e=0;e<=this.height;e++)for(var n=0;n<=this.width;n++)this.size,this.size}}])&&z(e.prototype,n),i&&z(e,i),t}();function X(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var Z=[u.TYPES.GARDEN,u.TYPES.PLOT,u.TYPES.LANE];function V(t){return(V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function J(t,e){return!e||"object"!==V(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function q(t){return(q=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function K(t,e){return(K=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Q=function(t){function e(t,n,i){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=J(this,q(e).call(this,t,n,i))).handler=t,r.bounds={x:0,y:0,width:0,height:0},r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&K(t,e)}(e,t),e}(function(){function t(e,n,i,r,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.handler=e,this.x=n,this.y=i,this.bounds=new G(0,0,this.width,this.height)}var e,n,i;return e=t,(n=[{key:"tick",value:function(){throw new Error("".concat(this.constructor.name," did not implement tick() method"))}},{key:"getCollisionBounds",value:function(t,e){var n=parseInt(this.x+this.bounds.x+t,10),i=parseInt(this.y+this.bounds.y+e);return new G(n,i,this.bounds.width,this.bounds.height)}},{key:"checkEntityCollisions",value:function(t,e){var n=this.handler.getWorld().getSpatialGrid().retrieve(new G(this.x+this.bounds.x,this.y+this.bounds.y,this.bounds.width,this.bounds.height),this);n=n.filter((function(t){return!Z.includes(t.type)}));for(var i=0;i<n.length;i++)if(n[i].getCollisionBounds(0,0).intersects(this.getCollisionBounds(t,e)))return!0;return!1}},{key:"drawCollisionBounds",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"blue";t.fillStyle=e,t.fillRect(this.x+this.bounds.x,this.y+this.bounds.y,this.bounds.width,this.bounds.height)}},{key:"destroySelf",value:function(){this.handler.getEntityManager().removeEntity(this)}}])&&X(e.prototype,n),i&&X(e,i),t}());function $(t){return($="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function tt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function et(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function nt(t,e){return!e||"object"!==$(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function it(t){return(it=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function rt(t,e){return(rt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var ot=function(t){function e(t,n){var i,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return tt(this,e),(i=nt(this,it(e).call(this,t,r,o))).handler=t,i.name=n,i.nameWidth=t.getGraphicsManager().getGraphics().measureText(i.name).width,i.x=r,i.y=o,i.width=u.ICON_WIDTH,i.height=u.ICON_HEIGHT,i.type=u.TYPES.COMPUTER_APP,i.yPadding=22,i.hovered=!1,i.state="idle",i}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&rt(t,e)}(e,t),n=e,(i=[{key:"tick",value:function(){switch(this.state){case"idle":break;case"loading":var t=this.assets.animations.loading;if(t.index>=9)return this.appLoaded(),t.index=0,void(this.state="inactive");t.tick();break;case"inactive":break;default:throw new Error('Computer App animation state "'.concat(this.state," is not accounted for"))}}},{key:"getCurrentAnimationFrame",value:function(){switch(this.state){case"idle":break;case"loading":return this.assets.animations.loading.getCurrentFrame();case"inactive":break;default:throw new Error('Computer App animation state "'.concat(this.state," is not accounted for"))}}},{key:"render",value:function(t){switch(this.state){case"idle":t.drawSprite(this.assets.icon,this.x,this.y,this.width,this.height),this.hovered&&(t.globalAlpha=.4,t.fillStyle="black",t.fillRect(this.x+this.bounds.x-6,this.y+this.bounds.y-6,this.bounds.width+12,this.bounds.height+12+u.FONT_SIZE+2),t.globalAlpha=1);break;case"loading":t.drawSprite(this.getCurrentAnimationFrame(),this.x,this.y,this.width,this.height);break;case"inactive":break;default:throw new Error('Computer App state "'.concat(this.state," is not accounted for"))}}},{key:"wasClickedAt",value:function(t,e){switch(this.hovered=!1,this.state){case"idle":this.state="loading";break;case"loading":case"inactive":break;default:throw new Error('Computer App state "'.concat(this.state," is not accounted for during mouseclicked"))}}},{key:"wasHoveredAt",value:function(t,e){"inactive"!==this.state&&"loading"!==this.state&&(this.hovered=!0)}},{key:"wasBlurred",value:function(){"inactive"!==this.state&&"loading"!==this.state&&(this.hovered=!1)}}])&&et(n.prototype,i),r&&et(n,r),e}(Q);function at(t){return(at="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function st(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ut(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function ht(t,e){return!e||"object"!==at(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ct(t){return(ct=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function lt(t,e){return(lt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var ft=function(t){function e(t,n){var i,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3?arguments[3]:void 0;return st(this,e),(i=ht(this,ct(e).call(this,t,0,0))).x=0,i.y=0,i.bounds={x:0,y:0,width:u.GAME_WIDTH,height:u.GAME_HEIGHT},i.type=u.TYPES.INTERACTIVE,i.textArray=n.text,i.isRead=r,i.sender=n.sender,i.subject=n.subject,o&&(i.unlocksOnOpen=o),i}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&lt(t,e)}(e,t),n=e,(i=[{key:"tick",value:function(){}},{key:"drawFadedBackground",value:function(t){var e=this.bounds,n=e.x,i=e.y,r=e.width,o=e.height;t.globalAlpha=.4,t.fillStyle="black",t.fillRect(n,i,r,o),t.globalAlpha=1}},{key:"render",value:function(t){this.drawFadedBackground(t),this.drawPaperAndText(t)}},{key:"drawPaperAndText",value:function(t){var e=u.GAME_WIDTH/8,n=u.GAME_HEIGHT/16,i=u.GAME_WIDTH-2*e,r=u.GAME_HEIGHT-2*n;t.fillStyle="white",t.fillRect(e,n,i,r);for(var o=e+64,a=n+64,s=0;s<this.textArray.length;s+=1)t.drawText(this.textArray[s],o,a,"black",!1,u.BIG_FONT_SIZE),a+=u.BIG_FONT_SIZE+16}},{key:"wasClickedAt",value:function(){this.setHiddenCallback(!1),this.handler.getEntityManager().removeEntity(this)}}])&&ut(n.prototype,i),r&&ut(n,r),e}(Q),dt=n(0);function yt(t){return(yt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function pt(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function gt(t,e){return!e||"object"!==yt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function bt(t){return(bt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function vt(t,e){return(vt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var wt=function(t){function e(t,n,i,r,o,a,s,h,c){var l;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(l=gt(this,bt(e).call(this,t,n,i))).width=r,l.height=o,l.email=a,l.bgColor=s,l.highlightColor=h,l.hovered=!1,l.bounds={x:-16,y:-26,width:l.width,height:l.height},l.type=u.TYPES.EMAIL_INBOX_ITEMS,l.setHiddenCallback=c,l.hidden=!1,l}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&vt(t,e)}(e,t),n=e,(i=[{key:"tick",value:function(){}},{key:"render",value:function(t){if(!this.hidden){var e=this.x,n=this.y,i=this.width,r=this.height;t.fillStyle=this.hovered?this.highlightColor:this.bgColor,t.fillRect(e-16,n-26,i,r),t.fillStyle="black",t.drawText(this.email.sender,this.x,this.y-4,"white",!1,u.EMAIL_ITEM_SIZE),t.drawText(this.email.subject,this.x+224,this.y-4,"white",!1,u.EMAIL_ITEM_SIZE)}}},{key:"wasHoveredAt",value:function(t,e){this.hovered=!0}},{key:"wasBlurred",value:function(){this.hovered=!1}},{key:"wasClickedAt",value:function(){this.setHiddenCallback(!0),this.email.isRead=!0,this.email.setHiddenCallback=this.setHiddenCallback,this.handler.getEntityManager().addEntity(this.email),this.email.unlocksOnOpen&&this.handler.getEmailManager().unlockApp(this.email.unlocksOnOpen)}}])&&pt(n.prototype,i),r&&pt(n,r),e}(Q);function Et(t){return(Et="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function mt(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function kt(t,e){return!e||"object"!==Et(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function It(t){return(It=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ot(t,e){return(Ot=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Tt=function(t){function e(t,n,i){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=kt(this,It(e).call(this,t,0,0))).x=0,r.y=0,r.paddingX=u.GAME_WIDTH/8,r.paddingY=u.GAME_HEIGHT/16,r.width=u.GAME_WIDTH-2*r.paddingX,r.height=u.GAME_HEIGHT-2*r.paddingY,r.setActiveCallback=i,r.bounds={x:850,y:52,width:34,height:30},r.type=u.TYPES.EMAIL_ITEMS,r.hidden=!1,r.emails=n,r.assets=w.getAssets("inbox"),r.emailItems=[],r.initializeEmailItems(),r}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ot(t,e)}(e,t),n=e,(i=[{key:"tick",value:function(){}},{key:"initializeEmailItems",value:function(){for(var t=this.paddingX+16,e=this.paddingY+64+38,n=0;n<this.emails.length;n+=1){var i=this.emails[n],r=n%2?u.COLORS.PURPLE:u.COLORS.RED,o=n%2?u.COLORS.LIGHT_PURPLE:u.COLORS.LIGHT_RED,a=new wt(this.handler,t,e,this.width,34,i,r,o,this.setHidden.bind(this));this.handler.getEntityManager().addEntity(a),this.emailItems.push(a),e+=36}}},{key:"drawFadedBackground",value:function(t){t.globalAlpha=.4,t.fillStyle="black",t.fillRect(0,0,u.GAME_WIDTH,u.GAME_HEIGHT),t.globalAlpha=1}},{key:"render",value:function(t){this.hidden||(this.drawFadedBackground(t),this.drawInbox(t),this.drawEmailItems(t))}},{key:"setHidden",value:function(t){this.hidden=t;for(var e=0;e<this.emailItems.length;e+=1)this.emailItems[e].hidden=t}},{key:"drawEmailItems",value:function(t){for(var e=0;e<this.emailItems.length;e+=1)this.emailItems[e].render(t)}},{key:"drawInbox",value:function(t){t.drawSprite(this.assets.bg,this.paddingX,this.paddingY,this.width,this.height)}},{key:"wasClickedAt",value:function(){for(var t=this.handler.getEntityManager(),e=0;e<this.emailItems.length;e+=1)t.removeEntity(this.emailItems[e]);t.removeEntity(this),this.setActiveCallback()}}])&&mt(n.prototype,i),r&&mt(n,r),e}(Q);function St(t){return(St="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function At(t,e){return!e||"object"!==St(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Mt(t){return(Mt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Pt(t,e){return(Pt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var xt=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=At(this,Mt(e).call(this,t,u.APPS.EMAIL))).bounds={x:0,y:26,width:n.width,height:36},n.textXOffset=10,n.textYOffset=n.height+18,n.assets=w.getAssets("email"),n.emails=[new ft(n.handler,dt.a,!1,u.APPS.FOOTAGE)],n}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Pt(t,e)}(e,t),n=e,(i=[{key:"setActive",value:function(){this.state="idle"}},{key:"appLoaded",value:function(){this.handler.getEntityManager().addEntity(new Tt(this.handler,this.emails,this.setActive.bind(this)))}}])&&_t(n.prototype,i),r&&_t(n,r),e}(ot);function Ct(t){return(Ct="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ht(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function jt(t,e){return!e||"object"!==Ct(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Gt(t){return(Gt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Rt(t,e){return(Rt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Lt=function(t){function e(t,n,i,r,o,a,s,h,c){var l;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(l=jt(this,Gt(e).call(this,t,n,i))).width=r,l.height=o,l.video=a,l.bgColor=s,l.highlightColor=h,l.hovered=!1,l.bounds={x:-16,y:-26,width:l.width,height:l.height},l.type=u.TYPES.FOOTAGE_LIBRARY_ITEMS,l.setHiddenCallback=c,l.hidden=!1,l}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Rt(t,e)}(e,t),n=e,(i=[{key:"tick",value:function(){}},{key:"render",value:function(t){if(!this.hidden){var e=this.x,n=this.y,i=this.width,r=this.height;t.fillStyle=this.hovered?this.highlightColor:this.bgColor,t.fillRect(e-16,n-26,i,r),t.fillStyle="black",t.drawText(this.video.video.who,this.x,this.y-4,"white",!1,u.EMAIL_ITEM_SIZE),t.drawText(this.video.video.status||"N/A (Please watch video)",this.x+224,this.y-4,"white",!1,u.EMAIL_ITEM_SIZE)}}},{key:"wasHoveredAt",value:function(t,e){this.hovered=!0}},{key:"wasBlurred",value:function(){this.hovered=!1}},{key:"wasClickedAt",value:function(){this.setHiddenCallback(!0),this.video.video.isViewed=!0,this.video.setHiddenCallback=this.setHiddenCallback,this.handler.getEntityManager().addEntity(this.video)}}])&&Ht(n.prototype,i),r&&Ht(n,r),e}(Q);function Nt(t){return(Nt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Dt(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Ft(t,e){return!e||"object"!==Nt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Bt(t){return(Bt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Wt(t,e){return(Wt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Yt=function(t){function e(t,n,i){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=Ft(this,Bt(e).call(this,t,0,0))).x=0,r.y=0,r.paddingX=u.GAME_WIDTH/8,r.paddingY=u.GAME_HEIGHT/16,r.width=u.GAME_WIDTH-2*r.paddingX,r.height=u.GAME_HEIGHT-2*r.paddingY,r.setActiveCallback=i,r.bounds={x:850,y:52,width:34,height:30},r.type=u.TYPES.FOOTAGE_ITEMS,r.hidden=!1,r.footage=n,r.assets=w.getAssets("footageLibrary"),r.footageItems=[],r.initializeFootageItems(),r}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Wt(t,e)}(e,t),n=e,(i=[{key:"tick",value:function(){}},{key:"initializeFootageItems",value:function(){for(var t=this.paddingX+16,e=this.paddingY+64+38,n=0;n<this.footage.length;n+=1){var i=this.footage[n],r=new Lt(this.handler,t,e,this.width,34,i,"black","grey",this.setHidden.bind(this));this.handler.getEntityManager().addEntity(r),this.footageItems.push(r),e+=36}}},{key:"drawFadedBackground",value:function(t){t.globalAlpha=.4,t.fillStyle="black",t.fillRect(0,0,u.GAME_WIDTH,u.GAME_HEIGHT),t.globalAlpha=1}},{key:"render",value:function(t){this.hidden||(this.drawFadedBackground(t),this.drawLibrary(t),this.drawFootageItems(t))}},{key:"setHidden",value:function(t){this.hidden=t;for(var e=0;e<this.footageItems.length;e+=1)this.footageItems[e].hidden=t}},{key:"drawFootageItems",value:function(t){for(var e=0;e<this.footageItems.length;e+=1)this.footageItems[e].render(t)}},{key:"drawLibrary",value:function(t){t.drawSprite(this.assets.bg,this.paddingX,this.paddingY,this.width,this.height)}},{key:"wasClickedAt",value:function(){for(var t=this.handler.getEntityManager(),e=0;e<this.footageItems.length;e+=1)t.removeEntity(this.footageItems[e]);t.removeEntity(this),this.setActiveCallback()}}])&&Dt(n.prototype,i),r&&Dt(n,r),e}(Q);function zt(t){return(zt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ut(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Xt(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Zt(t,e){return!e||"object"!==zt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Vt(t){return(Vt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Jt(t,e){return(Jt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var qt=function(t){function e(t,n,i,r){var o,a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return Ut(this,e),(o=Zt(this,Vt(e).call(this,t,n,i))).x=n,o.y=i,o.bounds={x:0,y:0,width:u.GAME_WIDTH,height:u.GAME_HEIGHT},o.type=u.TYPES.INTERACTIVE,o.isViewed=a,o.video=r,o.states={IDLE:"idle",PLAYING:"playing",FINISHED:"finished"},o.assets=w.getAssets("bigFootage"),o.state=o.states.IDLE,o}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Jt(t,e)}(e,t),n=e,(i=[{key:"tick",value:function(){switch(this.state){case this.states.FINISHED:case this.states.IDLE:break;case this.states.PLAYING:var t=this.video.assets.animations[this.states.PLAYING];if(t.index>=9)return this.video.status="death"===this.video.type?"Deceased":"Alive",console.log(this.video.type),"alive"===this.video.type&&(console.log("just watched best vid"),this.handler.getFootageManager().updateWatchedBestVideo()),void(this.state=this.states.FINISHED);t.tick();break;default:throw new Error("Big Footage unrecognized state: ".concat(this.state))}}},{key:"drawFadedBackground",value:function(t){var e=this.bounds,n=e.x,i=e.y,r=e.width,o=e.height;t.globalAlpha=.4,t.fillStyle="black",t.fillRect(n,i,r,o),t.globalAlpha=1}},{key:"getCurrentAnimationFrame",value:function(){switch(this.state){case this.states.IDLE:break;case this.states.FINISHED:case this.states.PLAYING:return this.video.assets.animations[this.states.PLAYING].getCurrentFrame();default:throw new Error('Big Footage animation state "'.concat(this.state," is not accounted for"))}}},{key:"render",value:function(t){switch(this.drawFadedBackground(t),this.state){case this.states.IDLE:t.drawSprite(this.assets.playButton,this.x,this.y,this.width,this.height);break;case this.states.FINISHED:t.drawSprite(this.getCurrentAnimationFrame(),this.x,this.y,this.width,this.height),t.fillStyle="black",t.globalAlpha=.6,t.fillRect(this.x,this.y,this.assets.playButton.width,this.assets.playButton.height),t.globalAlpha=1,t.fillStyle="black",t.drawText("X",this.x+this.assets.playButton.height+60,this.y+80,"white",!0,64);break;case this.states.PLAYING:t.drawSprite(this.getCurrentAnimationFrame(),this.x,this.y,this.width,this.height);break;default:throw new Error("Big Footage unrecognized state: ".concat(this.state))}}},{key:"wasClickedAt",value:function(){switch(this.state){case this.states.IDLE:this.state=this.states.PLAYING;break;case this.states.PLAYING:break;case this.states.FINISHED:this.video.assets.animations[this.states.PLAYING].index=0,this.setHiddenCallback(!1),this.state=this.states.IDLE,this.handler.getFootageManager().isLogComplete()&&this.handler.getWorld().gameWon(),this.handler.getEntityManager().removeEntity(this);break;default:throw new Error("Big Footage wasClicked unrecognized state: ".concat(this.state))}}}])&&Xt(n.prototype,i),r&&Xt(n,r),e}(Q);function Kt(t){return(Kt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Qt(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);i=!0);}catch(t){r=!0,o=t}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function $t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function te(t,e){return!e||"object"!==Kt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ee(t){return(ee=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ne(t,e){return(ne=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var ie=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=te(this,ee(e).call(this,t,u.APPS.FOOTAGE))).bounds={x:0,y:26,width:n.width,height:36},n.textXOffset=0,n.textYOffset=n.height+18,n.assets=w.getAssets("footage"),n.videos={johnDies:{who:"John Smith",type:"death",assets:w.getAssets("johnDies")},johnLives:{who:"John Smith",type:"alive",assets:w.getAssets("johnLives")}},n.updateFootage(n.videos.johnDies),n}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ne(t,e)}(e,t),n=e,(i=[{key:"setActive",value:function(){this.state="idle"}},{key:"appLoaded",value:function(){this.handler.getEntityManager().addEntity(new Yt(this.handler,this.footage,this.setActive.bind(this)))}},{key:"intervened",value:function(){console.log("footage intervened!"),this.updateFootage(this.videos.johnLives)}},{key:"updateFootage",value:function(t){var e=Qt(this.handler.getEntityManager().getEntitiesByType(u.TYPES.COMPUTER),1)[0],n={x:e.x,y:e.y};this.footage=[new qt(this.handler,n.x,n.y,t,!1)]}}])&&$t(n.prototype,i),r&&$t(n,r),e}(ot);function re(t){return(re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function oe(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);i=!0);}catch(t){r=!0,o=t}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function ae(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function se(t,e){return!e||"object"!==re(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ue(t){return(ue=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function he(t,e){return(he=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var ce=function(t){function e(t,n,i){var r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=se(this,ue(e).call(this,t,n,i))).states={OFF:"off",INITIALIZE:"initialize",BOOTING:"booting",IDLE:"idle"},r.width=u.SCREEN_WIDTH,r.height=u.SCREEN_HEIGHT,r.bounds={x:4,y:4,width:r.width-4,height:r.height-4},r.assets=w.getAssets("os"),r.padding=32,r.iconsPerRow=4,r.bootCounter=0,r.bootWait=0,r.type=u.TYPES.COMPUTER;r.handler.getEntityManager();return r.state=r.states.OFF,r}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&he(t,e)}(e,t),n=e,(i=[{key:"initializeApps",value:function(){this.apps=[this.handler.getEntityManager().addEntity(new xt(this.handler))]}},{key:"addApp",value:function(t){this.apps.push(t),this.handler.getEntityManager().addEntity(t),this.resetAppPositions()}},{key:"alignIconsTopLeftToBottomRight",value:function(){var t=this.x,e=this.y;e+=this.padding;for(var n=0;n<this.apps.length;n+=1){var i=this.apps[n];t+=this.padding,n%this.iconsPerRow==0&&0!==n&&(e+=i.height+this.padding,t=this.x+this.padding),i.x=t,i.y=e,t+=i.width,t+=this.padding}}},{key:"resetAppPositions",value:function(){var t=this.x+this.width/2,e=this.y+this.height/2;if(1===this.apps.length){var n=oe(this.apps,1)[0];return n.x=t-n.bounds.width/2,void(n.y=e-n.bounds.height)}if(2===this.apps.length){var i=oe(this.apps,2),r=i[0],o=i[1];return r.x=t-r.bounds.width/2-96,r.y=e-r.bounds.height,o.x=t-o.bounds.width/2+96,void(o.y=e-o.bounds.height)}throw new Error("apps length is great then expected (".concat(this.apps.length,") in ComputerScreen.resetAppPositions()"))}},{key:"tick",value:function(){switch(this.state){case this.states.OFF:this.state=this.states.INITIALIZE;break;case this.states.INITIALIZE:this.initializeApps(),this.resetAppPositions(),this.state=this.states.BOOTING;break;case this.states.IDLE:break;case this.states.BOOTING:var t=this.assets.animations[this.states.BOOTING];if(t.index>=9)return this.bootCounter+=1,void(this.bootCounter>=this.bootWait&&(this.bootCounter=0,this.state=this.states.IDLE));t.tick();break;default:throw new Error('Computer Screen animation state "'.concat(this.state," is not accounted for"))}}},{key:"getCurrentAnimationFrame",value:function(){switch(this.state){case"off":case this.states.INITIALIZE:case this.states.IDLE:break;case this.states.BOOTING:return this.assets.animations[this.states.BOOTING].getCurrentFrame();default:throw new Error('Computer App animation state "'.concat(this.state," is not accounted for"))}}},{key:"render",value:function(t){switch(t.fillStyle=this.state===this.states.OFF?"black":u.COLORS.PURPLE,t.fillRect(this.x,this.y,this.width,this.height),this.state){case"off":case this.states.INITIALIZE:break;case this.states.IDLE:for(var e=0;e<this.apps.length;e+=1){var n=this.apps[e];t.drawText(n.name,n.x+n.textXOffset,n.y+n.textYOffset),n.render(t)}break;case this.states.BOOTING:this.bootCounter>this.bootWait/4&&(t.globalAlpha-=this.bootCounter/this.bootWait),t.drawSprite(this.getCurrentAnimationFrame(),this.x,this.y,this.width,this.height),t.globalAlpha=1;break;default:throw new Error('Computer App animation state "'.concat(this.state," is not accounted for"))}}}])&&ae(n.prototype,i),r&&ae(n,r),e}(Q);function le(t){return(le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function fe(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function de(t,e){return!e||"object"!==le(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ye(t){return(ye=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function pe(t,e){return(pe=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var ge=function(t){function e(t,n){var i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(i=de(this,ye(e).call(this,t,u.DIALOGUE.X,u.DIALOGUE.Y))).x=u.DIALOGUE.X,i.y=u.DIALOGUE.Y,i.width=u.DIALOGUE.WIDTH,i.height=u.DIALOGUE.HEIGHT,i.bounds={x:-i.x,y:-i.y,width:u.GAME_WIDTH,height:u.GAME_HEIGHT},i.fontSize=42,i.textX=i.x+i.fontSize,i.textY=i.y+i.height/2+i.fontSize/3,i.type=u.TYPES.INTERACTIVE,i.dialogue="",i.speechTimer=5,i.wasClicked=!1,i.words=[],i.addWords(n),i}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&pe(t,e)}(e,t),n=e,(i=[{key:"tick",value:function(t){if(!this.words.length)return this.handler.getWorld().dialogueFinished(),void this.handler.getEntityManager().removeEntity(this);this.speechTimer>=2&&this.words.length&&(this.words[0].length?this.sayNextLetter():this.wasClicked&&(this.wasClicked=!1,this.readNextSentence())),this.speechTimer<30&&this.speechTimer++}},{key:"render",value:function(t){this.words[0]&&(t.fillStyle="black",t.globalAlpha=.6,t.fillRect(this.x+this.bounds.x,this.y+this.bounds.y,this.bounds.width,this.bounds.height),t.globalAlpha=1,t.fillStyle="white",t.fillRect(this.x,this.y,this.width,this.height),t.drawText(this.dialogue,this.textX,this.textY,"black",!1,this.fontSize),this.words[0].length||t.drawText(">>",this.x+this.width-96,this.y+this.height-8,"black",!1,64))}},{key:"readNextSentence",value:function(){this.words.splice(0,1),this.clean()}},{key:"clean",value:function(){this.dialogue="",this.sentencePause=0}},{key:"sayNextLetter",value:function(){var t=this.words[0][0];this.dialogue+=t,this.words[0].splice(0,1),this.speechTimer=0}},{key:"addWords",value:function(t){var e=this;t instanceof Array||(t=[t]),t.forEach((function(t){e.words.push(t.split(""))}))}},{key:"clear",value:function(){this.words=[],this.clean()}},{key:"wasClickedAt",value:function(){this.words[0].length||(this.wasClicked=!0)}}])&&fe(n.prototype,i),r&&fe(n,r),e}(Q);function be(t){return(be="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ve(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function we(t,e){return!e||"object"!==be(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ee(t){return(Ee=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function me(t,e){return(me=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var ke=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=we(this,Ee(e).call(this,t,0,0))).width=u.GAME_WIDTH,n.height=u.GAME_HEIGHT,n.states={INIT:"init",IDLE:"idle"},n.bounds={x:0,y:0,width:0,height:0},n.state=n.states.INIT,n.parentWindow=document.querySelector("#main"),n}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&me(t,e)}(e,t),n=e,(i=[{key:"initIframe",value:function(){this.wrapper=document.createElement("div");var t=document.createElement("iframe");this.wrapper.style.cursor="auto",this.wrapper.style.width="".concat(this.width,"px"),this.wrapper.style.height="".concat(this.height,"px"),this.wrapper.style.position="absolute",t.style.width=this.wrapper.style.width,t.style.height=this.wrapper.style.height,this.wrapper.setAttribute("z-index","9999"),t.setAttribute("z-index","9998"),t.setAttribute("src",this.src),this.parentWindow.appendChild(this.wrapper),this.wrapper.appendChild(t),this.initGameHeader()}},{key:"initGameHeader",value:function(){var t=document.createElement("div");t.setAttribute("id","game-header");var e=t.style;e.width="".concat(this.width+4,"px"),e.height="40px",e.position="absolute",e.top="0px",e.borderRadius="1%",e.border="2px black solid",t.setAttribute("z-index","9999"),this.wrapper.appendChild(t),this.initGameHeaderStripes(t),this.initGameHeaderCloseButton(t)}},{key:"initGameHeaderStripes",value:function(t){var e=document.createElement("div");e.style.height="100%",e.style.width="95%",e.style.display="inline-block",t.appendChild(e);for(var n=0;n<3;n+=1){var i=document.createElement("div");i.style.height="33%",i.style.backgroundColor=0===n?u.COLORS.PURPLE:1===n?u.COLORS.CREAM:u.COLORS.RED,e.appendChild(i)}}},{key:"initGameHeaderCloseButton",value:function(t){var e=document.createElement("div"),n=e.style;n.display="inline-block",n.width="4%",n.backgroundColor="lightgrey",n.height="80%",n.borderLeftColor="grey",n.borderTopColor="white",n.borderRightColor="white",n.borderBottomColor="grey",n.borderWidth="4px",n.borderStyle="solid",n.position="relative",t.appendChild(e);var i=document.createElement("h2");i.innerHTML="X",i.style.position="absolute",i.style.top="-17px",i.style.right="11px",e.appendChild(i),e.addEventListener("click",this.closeSelf.bind(this))}},{key:"closeSelf",value:function(){this.parentWindow.removeChild(this.wrapper),this.destroySelf()}},{key:"tick",value:function(){switch(this.state){case this.states.INIT:if(!this.src)throw new Error("Easter egg game has no .src!");this.initIframe(),this.state=this.states.IDLE;break;case this.states.IDLE:break;default:throw new Error('Easter Egg Game state "'.concat(this.state," is not accounted for"))}}},{key:"render",value:function(t){}}])&&ve(n.prototype,i),r&&ve(n,r),e}(Q);function Ie(t){return(Ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Oe(t,e){return!e||"object"!==Ie(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Te(t){return(Te=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Se(t,e){return(Se=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var _e=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Oe(this,Te(e).call(this,t))).src="https://mccordgh.github.io/js13kgames_2017_entry/",n.title="Me, Myself, and i",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Se(t,e)}(e,t),e}(ke);function Ae(t){return(Ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Me(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Pe(t,e){return!e||"object"!==Ae(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function xe(t){return(xe=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ce(t,e){return(Ce=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var He=function(t){function e(t,n,i){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=Pe(this,xe(e).call(this,t,n,i))).width=132,r.height=73,r.bounds={x:0,y:22,width:r.width,height:r.height-22},r.type=u.TYPES.INTERACTIVE,r}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ce(t,e)}(e,t),n=e,(i=[{key:"tick",value:function(){}},{key:"render",value:function(t){}},{key:"wasClickedAt",value:function(t,e){this.handler.getFootageManager().updateIntervened()}}])&&Me(n.prototype,i),r&&Me(n,r),e}(Q);function je(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var Ge=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.handler=e,this.entityManager=e.createEntityManager(),this.assets={background:w.getAssets("background").image},this.spatialGrid=new U(u.GAME_WIDTH,u.GAME_HEIGHT,u.SPATIAL_GRID_SIZE),this.states={INITIALIZE:"initialize",INTRO:"intro",IDLE:"idle",TEST:"test",TEST_INIT:"test-init",GAME_WON:"game-won"},this.state=this.states.INITIALIZE}var e,n,i;return e=t,(n=[{key:"initDialogue",value:function(){this.dialogue=this.entityManager.addEntity(new ge(this.handler,["Hey, newbie! Looks like the manager","is out sick today...","I bet you can figure this one out","on your own though...","Check your email!"]))}},{key:"gameWon",value:function(){this.dialogue=this.entityManager.addEntity(new ge(this.handler,["Yo, newbie! You did it!","Looks like John Smith is alive!","Great Job!","Also we need you in on Saturday..."])),this.state=this.states.GAME_WON}},{key:"dialogueFinished",value:function(){switch(this.state){case this.states.INITIALIZE:break;case this.states.INTRO:this.state=this.states.IDLE;break;case this.states.IDLE:this.spatialGrid.render(graphics),this.entityManager.render(graphics);break;case this.states.GAME_WON:console.log("game won dialogue finished");break;default:throw new Error('World One animation state "'.concat(this.state," is not accounted for"))}}},{key:"loadEntities",value:function(){var t=this;[new ce(this.handler,256,136),new He(this.handler,52,62)].forEach((function(e){t.entityManager.addEntity(e)}))}},{key:"tick",value:function(t){switch(this.state){case this.states.TEST_INIT:this.entityManager.addEntity(new _e(this.handler)),this.state=this.states.IDLE;break;case this.states.TEST:break;case this.states.INITIALIZE:this.initDialogue(),this.state=this.states.INTRO;break;case this.states.GAME_WON:case this.states.INTRO:this.dialogue&&this.dialogue.tick();break;case this.states.IDLE:this.entityManager.tick(t);break;default:throw new Error('World One animation state "'.concat(this.state," is not accounted for"))}}},{key:"render",value:function(t){switch(this.drawBackground(t),this.state){case this.states.TEST_INIT:case this.states.INITIALIZE:break;case this.states.GAME_WON:case this.states.INTRO:this.dialogue&&this.dialogue.render(t);break;case this.states.TEST:case this.states.IDLE:this.spatialGrid.render(t),this.entityManager.render(t);break;default:throw new Error('World One state "'.concat(this.state," is not accounted for"))}}},{key:"init",value:function(){this.loadEntities()}},{key:"drawBackground",value:function(t){var e=this.assets.background;t.drawSprite(e)}},{key:"getSpatialGrid",value:function(){return this.spatialGrid}}])&&je(e.prototype,n),i&&je(e,i),t}();function Re(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);i=!0);}catch(t){r=!0,o=t}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function Le(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var Ne=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.handler=e}var e,n,i;return e=t,(n=[{key:"unlockApp",value:function(t){var e=Re(this.handler.getEntityManager().getEntitiesByType(u.TYPES.COMPUTER),1)[0];switch(t){case u.APPS.FOOTAGE:this.appExistsOnComputer(e,u.APPS.FOOTAGE)||e.addApp(new ie(this.handler));break;default:throw new Error("".concat(t," is not a valid app name to unlock"))}}},{key:"appExistsOnComputer",value:function(t,e){return!!t.apps.find((function(t){return t.name===e}))}}])&&Le(e.prototype,n),i&&Le(e,i),t}();function De(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var Fe=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.handler=e,this.log={john:{intervened:!1,watchedBestVideo:!1}}}var e,n,i;return e=t,(n=[{key:"updateIntervened",value:function(){console.log("intervened!!"),this.log.john.intervened=!0;var t=this.handler.getEntityManager().findEntityByName(u.APPS.FOOTAGE);console.log({footage:t}),t.intervened()}},{key:"updateWatchedBestVideo",value:function(){console.log("watched best vid!"),this.log.john.watchedBestVideo=!0}},{key:"isLogComplete",value:function(){return!!this.log.john.intervened&&!!this.log.john.watchedBestVideo}}])&&De(e.prototype,n),i&&De(e,i),t}();function Be(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var We=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.game=e,this.entityManager=null,this.graphicsManager=null,this.monsterManager=null,this.mouseManager=null,this.seedManager=null,this.stateManager=null,this.uiManager=null,this.world=null}var e,n,i;return e=t,(n=[{key:"getEmailManager",value:function(){return this.emailManager}},{key:"getFootageManager",value:function(){return this.footageManager}},{key:"getEntityManager",value:function(){return this.entityManager}},{key:"getGame",value:function(){return this.game}},{key:"getGraphicsManager",value:function(){return this.graphicsManager}},{key:"getMouseManager",value:function(){return this.mouseManager}},{key:"getUiManager",value:function(){return this.uiManager}},{key:"getWorld",value:function(){return this.world}},{key:"createEntityManager",value:function(){return this.entityManager=new B(this)}},{key:"createEmailManager",value:function(){return this.emailManager=new Ne(this)}},{key:"createFootageManager",value:function(){return this.footageManager=new Fe(this)}},{key:"createGraphicsManager",value:function(){return this.graphicsManager=new c}},{key:"createMouseManager",value:function(){return this.mouseManager=new a(this)}},{key:"createStateManager",value:function(){return this.stateManager=new Y}},{key:"createUiManager",value:function(){return this.uiManager=new UiManager(this)}},{key:"createWorld",value:function(){return this.world=new Ge(this)}},{key:"event",value:function(t,e){"click"===t&&this.entityManager.mouseClick(e),"move"===t&&this.entityManager.mouseMove(e)}}])&&Be(e.prototype,n),i&&Be(e,i),t}();function Ye(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var ze=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,i;return e=t,(n=[{key:"initialize",value:function(){this.managerHandler=new We(this),this.graphicsManager=this.managerHandler.createGraphicsManager(),this.stateManager=this.managerHandler.createStateManager(),this.mouseManager=this.managerHandler.createMouseManager(),this.managerHandler.createEmailManager(),this.managerHandler.createFootageManager();var t=this.managerHandler.createWorld();t.init();var e=new r(this.managerHandler,t);this.stateManager.setState(e)}},{key:"run",value:function(){var t=this;this.initialize();var e=1e3/u.FPS,n=0,i=a/1e3,r=Date.now(),o=r,a=0;!function s(){r=Date.now(),n=r-o,o=r,(a+=n)>=e&&(i=a/1e3,t.tick(i),t.render(t.graphicsManager.getGraphics()),a=0),window.requestAnimationFrame(s)}()}},{key:"tick",value:function(t){this.stateManager.getState().tick(t)}},{key:"render",value:function(t){t.clearRect(0,0,u.GAME_WIDTH,u.GAME_HEIGHT),this.stateManager.getState().render(t)}}])&&Ye(e.prototype,n),i&&Ye(e,i),t}();document.title="Gamedev.js 2020",(new ze).run()}]);